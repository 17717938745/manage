(self.webpackChunkwebpack_react=self.webpackChunkwebpack_react||[]).push([[172],{172:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});n(2526),n(1817),n(2165),n(9554),n(6992),n(1249),n(8309),n(1539),n(8783),n(4747),n(3948),n(285);var r=n(3804),a=n.n(r),o=n(1120),l=n(7623),i=n(6912),c=n(2692),u=n(5477),s=n(727),f=n(7812),m=n(282),p=n(8551),d=n(6657),h=n(1398);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=(0,o.Z)((function(e){return(0,l.Z)({root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},closeIcon:{width:20,height:20},img:{width:"100%"}})}));function v(){var e=g(),t=b((0,r.useState)(new Array(null)[0]),2),n=t[0],o=t[1],l=b((0,r.useState)(new Array),2),y=l[0],v=l[1],w=b((0,r.useState)(!1),2),E=w[0],k=w[1],S=b((0,r.useState)(!1),2),A=S[0],C=S[1],Z=b((0,r.useState)("error"),2),I=Z[0],N=Z[1],j=b((0,r.useState)(""),2),O=j[0],L=j[1],U=b((0,r.useState)(""),2),x=U[0],z=U[1],R=b((0,r.useState)(""),2),T=R[0],D=R[1];return a().createElement("form",{className:e.root,noValidate:!0,autoComplete:"off"},a().createElement(i.Z,{anchorOrigin:{vertical:"top",horizontal:"right"},open:A,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&C(!1)},message:I,action:a().createElement(a().Fragment,null,a().createElement("img",{src:h.Z,onClick:function(){C(!1)},className:e.closeIcon}))}),a().createElement(c.Z,{className:e.backdrop,open:E,onClick:function(){k(!1)}},a().createElement(u.Z,{color:"inherit"})),a().createElement(s.Z,{label:"名称",value:x,onChange:function(e){z(e.target.value)}}),a().createElement(s.Z,{label:"描述",value:T,onChange:function(e){D(e.target.value)}}),a().createElement(f.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(e){if(n)n.click();else{var t=document.createElement("input");t.setAttribute("accept","image/*"),t.setAttribute("display","none"),t.setAttribute("multiple","true"),t.setAttribute("type","file"),t.addEventListener("change",(function(e){for(var t=e.currentTarget.files,n=[],r=0;r<t.length;r++)n.push({fileName:t[r].name});v(n)})),o(t),t.click()}}},a().createElement(p.Z,null)),a().createElement("ul",null,y.map((function(e){return a().createElement("li",{key:e.fileName},e.fileName)}))),y&&y.length>0?a().createElement(m.Z,{variant:"contained",color:"primary",component:"span",onClick:function(){var e=n.files;if(e.length<=0)C(!0),N("请选择图片");else{var t=new FormData;e.forEach((function(e){t.append("file",e)})),t.append("name",x),t.append("describe",T),k(!0),(0,d.ws)("auth/tools/business/merge",t,{responseType:"blob"}).then((function(e){if(200===e.status){console.log((e.headers||{})["content-type"]);var t=(window.URL||window.webkitURL).createObjectURL(new Blob([e.data],{type:(e.headers||{})["content-type"]}));L(t)}k(!1)})).catch((function(){k(!1)}))}}},"上传"):null,O?a().createElement("img",{src:O,className:e.img,alt:"图片"}):null)}}}]);