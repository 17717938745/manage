(self.webpackChunkwebpack_react=self.webpackChunkwebpack_react||[]).push([[319],{8319:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});n(2526),n(1817),n(2165),n(2222),n(9554),n(6992),n(1249),n(8309),n(1539),n(8783),n(4747),n(3948),n(285);var a=n(3804),r=n.n(a),l=n(1120),o=n(7623),c=n(8727),i=n(5639),u=n(727),m=n(6912),s=n(2692),p=n(5477),f=n(1749),y=n(4436),b=n(6019),d=n(7812),g=n(282),h=n(8551),k=n(6657),v=n(1398);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Z=(0,l.Z)((function(e){return(0,o.Z)({root:{"& > *":{margin:e.spacing(1)}},formRoot:{flexGrow:1},formSubmit:{display:"flex",alignItems:"center",justifyContent:"center"},input:{display:"none"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},closeIcon:{width:20,height:20},img:{width:"100%"},submitButton:{margin:e.spacing(2)}})}));function S(){var e=Z(),t=E((0,a.useState)(new Array(null)[0]),2),n=t[0],l=t[1],o=E((0,a.useState)(new Array),2),w=o[0],S=o[1],C=E((0,a.useState)(!1),2),A=C[0],N=C[1],L=E((0,a.useState)(!1),2),F=L[0],T=L[1],j=E((0,a.useState)("error"),2),I=j[0],R=j[1],x=E((0,a.useState)(""),2),U=x[0],z=x[1],O=E((0,a.useState)(new Array({})[0]),2),B=O[0],W=O[1];(0,a.useEffect)((function(){(0,k.uz)("auth/tools/business/defaultConfig",{}).then((function(e){W((0,k.d9)(e.data))}))}),["init"]);var _=[{value:0,label:"常规"},{value:1,label:"加粗"}],D=function(e){var t=e.key,n=e.type,a=e.valueType||n,l=B[t],o="color"===n?"#000000":"number"===a?0:"";return l=("color"===n?"#".concat(l):l)||o,"select"===n?r().createElement(c.Z,{key:"".concat(e.key),value:l,onChange:function(e){B[t]=e.target.value,W((0,k.d9)(B))}},_.map((function(e,t){return r().createElement(i.Z,{key:"".concat(e.key,"-").concat(t),value:e.value},e.label)}))):r().createElement(u.Z,{key:"".concat(e.key),type:e.type,label:e.label,value:l,onChange:function(e){var a=e.target.value;B[t]="color"===n?a.substr(1):a,W((0,k.d9)(B))}})};return r().createElement("form",{className:e.root,noValidate:!0,autoComplete:"off"},r().createElement(m.Z,{anchorOrigin:{vertical:"top",horizontal:"right"},open:F,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&T(!1)},message:I,action:r().createElement(r().Fragment,null,r().createElement("img",{src:v.Z,onClick:function(){T(!1)},className:e.closeIcon}))}),r().createElement(s.Z,{className:e.backdrop,open:A,onClick:function(){N(!1)}},r().createElement(p.Z,{color:"inherit"})),r().createElement(f.Z,{container:!0,justifyContent:"center",className:e.formRoot,spacing:2},r().createElement(f.Z,{item:!0},r().createElement(y.Z,{component:"fieldset",fullWidth:!0},r().createElement(b.Z,{component:"legend"},"二维码"),[{key:"width",type:"number",label:"宽度"},{key:"height",type:"number",label:"宽度"},{key:"left",type:"number",label:"左边距"},{key:"top",type:"number",label:"上边距"}].map(D))),r().createElement(f.Z,{item:!0},r().createElement(y.Z,{component:"fieldset",fullWidth:!0},r().createElement(b.Z,{component:"legend"},"姓名"),[{key:"nameFontColor",type:"color",label:"颜色"},{key:"nameFontName",type:"text",label:"字体"},{key:"nameFontStyle",type:"select",valueType:"number",optionList:_,label:"字体样式"},{key:"nameFontSize",type:"number",label:"字体大小"},{key:"nameLeft",type:"number",label:"左边距"},{key:"nameTop",type:"number",label:"上边距"}].map(D))),r().createElement(f.Z,{item:!0},r().createElement(y.Z,{component:"fieldset",fullWidth:!0},r().createElement(b.Z,{component:"legend"},"描述"),[{key:"describeFontColor",type:"color",label:"颜色"},{key:"describeFontName",type:"text",label:"字体"},{key:"describeFontStyle",type:"select",valueType:"number",optionList:_,label:"字体样式"},{key:"describeFontSize",type:"number",label:"字体大小"},{key:"describeLeft",type:"number",label:"左边距"},{key:"describeTop",type:"number",label:"上边距"}].map(D))),r().createElement(f.Z,{item:!0},r().createElement(y.Z,{component:"fieldset",fullWidth:!0},r().createElement(b.Z,{component:"legend"},"背景图"),r().createElement(d.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){if(n)n.click();else{var e=document.createElement("input");e.setAttribute("accept","image/*"),e.setAttribute("display","none"),e.setAttribute("multiple","true"),e.setAttribute("type","file"),e.addEventListener("change",(function(e){for(var t=e.currentTarget.files,n=[],a=0;a<t.length;a++)n.push({fileName:t[a].name});S(n)})),l(e),e.click()}}},r().createElement(h.Z,null)),r().createElement("ul",null,w.map((function(e){return r().createElement("li",{key:e.fileName},e.fileName)}))))),r().createElement(f.Z,{item:!0,sm:12,className:e.formSubmit},w&&w.length>=0?r().createElement(g.Z,{variant:"contained",color:"primary",component:"span",onClick:function(){var e=n.files;if(e.length<=0)T(!0),R("请选择图片");else{var t=new FormData;for(var a in e.forEach((function(e){t.append("file",e)})),B)t.append(a,B[a]);N(!0),(0,k.ws)("upload/tools/business/editTemplate",t,{responseType:"blob"}).then((function(e){var t=(window.URL||window.webkitURL).createObjectURL(new Blob([e],{type:"image/png"}));z(t),N(!1)})).catch((function(){N(!1)}))}}},"上传"):null,r().createElement(g.Z,{className:e.submitButton,variant:"contained",color:"secondary",component:"span",onClick:function(){(0,k.v_)("upload/tools/business/merge",{name:"姓名",describe:"部门",url:"https://www.baidu.com"},{responseType:"blob"}).then((function(e){var t=(window.URL||window.webkitURL).createObjectURL(new Blob([e],{type:"image/png"}));z(t),N(!1)})).catch((function(){N(!1)}))}},"查看"))),U?r().createElement("img",{src:U,className:e.img,alt:"图片"}):null)}}}]);