/*! For license information please see plugin.js.LICENSE.txt */
(self.webpackChunkwebpack_react=self.webpackChunkwebpack_react||[]).push([[975],{9669:function(t,e,n){t.exports=n(1609)},5448:function(t,e,n){"use strict";var r=n(4867),i=n(6026),s=n(5327),o=n(4109),a=n(7985),u=n(5061),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(4657);t.exports=function(t){return new Promise((function(e,h){var f=t.data,l=t.headers;r.isFormData(f)&&delete l["Content-Type"];var d=new XMLHttpRequest,g="onreadystatechange",p=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||a(t.url)||(d=new window.XDomainRequest,g="onload",p=!0,d.onprogress=function(){},d.ontimeout=function(){}),t.auth){var y=t.auth.username||"",v=t.auth.password||"";l.Authorization="Basic "+c(y+":"+v)}if(d.open(t.method.toUpperCase(),s(t.url,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d[g]=function(){if(d&&(4===d.readyState||p)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?o(d.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:n,config:t,request:d};i(e,h,r),d=null}},d.onerror=function(){h(u("Network Error",t,null,d)),d=null},d.ontimeout=function(){h(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var m=n(4372),S=(t.withCredentials||a(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;S&&(l[t.xsrfHeaderName]=S)}if("setRequestHeader"in d&&r.forEach(l,(function(t,e){void 0===f&&"content-type"===e.toLowerCase()?delete l[e]:d.setRequestHeader(e,t)})),t.withCredentials&&(d.withCredentials=!0),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){d&&(d.abort(),h(t),d=null)})),void 0===f&&(f=null),d.send(f)}))}},1609:function(t,e,n){"use strict";var r=n(4867),i=n(1849),s=n(321),o=n(5655);function a(t){var e=new s(t),n=i(s.prototype.request,e);return r.extend(n,s.prototype,e),r.extend(n,e),n}var u=a(o);u.Axios=s,u.create=function(t){return a(r.merge(o,t))},u.Cancel=n(5263),u.CancelToken=n(4972),u.isCancel=n(6502),u.all=function(t){return Promise.all(t)},u.spread=n(8713),t.exports=u,t.exports.default=u},5263:function(t){"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},4972:function(t,e,n){"use strict";var r=n(5263);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},6502:function(t){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:function(t,e,n){"use strict";var r=n(5655),i=n(4867),s=n(782),o=n(3572);function a(t){this.defaults=t,this.interceptors={request:new s,response:new s}}a.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),(t=i.merge(r,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[o,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},i.forEach(["delete","get","head","options"],(function(t){a.prototype[t]=function(e,n){return this.request(i.merge(n||{},{method:t,url:e}))}})),i.forEach(["post","put","patch"],(function(t){a.prototype[t]=function(e,n,r){return this.request(i.merge(r||{},{method:t,url:e,data:n}))}})),t.exports=a},782:function(t,e,n){"use strict";var r=n(4867);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},5061:function(t,e,n){"use strict";var r=n(481);t.exports=function(t,e,n,i,s){var o=new Error(t);return r(o,e,n,i,s)}},3572:function(t,e,n){"use strict";var r=n(4867),i=n(8527),s=n(6502),o=n(5655),a=n(1793),u=n(7303);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!a(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||o.adapter)(t).then((function(e){return c(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return s(e)||(c(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:function(t){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t}},6026:function(t,e,n){"use strict";var r=n(5061);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},8527:function(t,e,n){"use strict";var r=n(4867);t.exports=function(t,e,n){return r.forEach(n,(function(n){t=n(t,e)})),t}},5655:function(t,e,n){"use strict";var r=n(4867),i=n(6016),s={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,u={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process)&&(a=n(5448)),a),transformRequest:[function(t,e){return i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){u.headers[t]=r.merge(s)})),t.exports=u},1849:function(t){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},4657:function(t){"use strict";function e(){this.message="String contains an invalid character"}e.prototype=new Error,e.prototype.code=5,e.prototype.name="InvalidCharacterError",t.exports=function(t){for(var n,r,i=String(t),s="",o=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.charAt(0|o)||(a="=",o%1);s+=a.charAt(63&n>>8-o%1*8)){if((r=i.charCodeAt(o+=3/4))>255)throw new e;n=n<<8|r}return s}},5327:function(t,e,n){"use strict";var r=n(4867);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var s;if(n)s=n(e);else if(r.isURLSearchParams(e))s=e.toString();else{var o=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),o.push(i(e)+"="+i(t))})))})),s=o.join("&")}return s&&(t+=(-1===t.indexOf("?")?"?":"&")+s),t}},7303:function(t){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},4372:function(t,e,n){"use strict";var r=n(4867);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,s,o){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:function(t){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},7985:function(t,e,n){"use strict";var r=n(4867);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},6016:function(t,e,n){"use strict";var r=n(4867);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},4109:function(t,e,n){"use strict";var r=n(4867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,s,o={};return t?(r.forEach(t.split("\n"),(function(t){if(s=t.indexOf(":"),e=r.trim(t.substr(0,s)).toLowerCase(),n=r.trim(t.substr(s+1)),e){if(o[e]&&i.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}})),o):o}},8713:function(t){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},4867:function(t,e,n){"use strict";var r=n(1849),i=n(8738),s=Object.prototype.toString;function o(t){return"[object Array]"===s.call(t)}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===s.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===s.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===s.call(t)},isFile:function(t){return"[object File]"===s.call(t)},isBlob:function(t){return"[object Blob]"===s.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return e},extend:function(t,e,n){return c(e,(function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},3099:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},6077:function(t,e,n){var r=n(111);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},1223:function(t,e,n){var r=n(5112),i=n(30),s=n(3070),o=r("unscopables"),a=Array.prototype;null==a[o]&&s.f(a,o,{configurable:!0,value:i(null)}),t.exports=function(t){a[o][t]=!0}},1530:function(t,e,n){"use strict";var r=n(8710).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},5787:function(t){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},9670:function(t,e,n){var r=n(111);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},1318:function(t,e,n){var r=n(5656),i=n(7466),s=n(1400),o=function(t){return function(e,n,o){var a,u=r(e),c=i(u.length),h=s(o,c);if(t&&n!=n){for(;c>h;)if((a=u[h++])!=a)return!0}else for(;c>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},2092:function(t,e,n){var r=n(9974),i=n(8361),s=n(7908),o=n(7466),a=n(5417),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,h=4==t,f=6==t,l=7==t,d=5==t||f;return function(g,p,y,v){for(var m,S,x=s(g),b=i(x),A=r(p,y,3),F=o(b.length),E=0,w=v||a,O=e?w(g,F):n||l?w(g,0):void 0;F>E;E++)if((d||E in b)&&(S=A(m=b[E],E,x),t))if(e)O[E]=S;else if(S)switch(t){case 3:return!0;case 5:return m;case 6:return E;case 2:u.call(O,m)}else switch(t){case 4:return!1;case 7:u.call(O,m)}return f?-1:c||h?h:O}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},6583:function(t,e,n){"use strict";var r=n(5656),i=n(9958),s=n(7466),o=n(9341),a=n(9207),u=Math.min,c=[].lastIndexOf,h=!!c&&1/[1].lastIndexOf(1,-0)<0,f=o("lastIndexOf"),l=a("indexOf",{ACCESSORS:!0,1:0}),d=h||!f||!l;t.exports=d?function(t){if(h)return c.apply(this,arguments)||0;var e=r(this),n=s(e.length),o=n-1;for(arguments.length>1&&(o=u(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in e&&e[o]===t)return o||0;return-1}:c},1194:function(t,e,n){var r=n(7293),i=n(5112),s=n(7392),o=i("species");t.exports=function(t){return s>=51||!r((function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:function(t,e,n){"use strict";var r=n(7293);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},9207:function(t,e,n){var r=n(9781),i=n(7293),s=n(6656),o=Object.defineProperty,a={},u=function(t){throw t};t.exports=function(t,e){if(s(a,t))return a[t];e||(e={});var n=[][t],c=!!s(e,"ACCESSORS")&&e.ACCESSORS,h=s(e,0)?e[0]:u,f=s(e,1)?e[1]:void 0;return a[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?o(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,h,f)}))}},5417:function(t,e,n){var r=n(111),i=n(3157),s=n(5112)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[s])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},7072:function(t,e,n){var r=n(5112)("iterator"),i=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var s={};s[r]=function(){return{next:function(){return{done:n=!0}}}},t(s)}catch(t){}return n}},4326:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},648:function(t,e,n){var r=n(1694),i=n(4326),s=n(5112)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),s))?n:o?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},9920:function(t,e,n){var r=n(6656),i=n(3887),s=n(1236),o=n(3070);t.exports=function(t,e){for(var n=i(e),a=o.f,u=s.f,c=0;c<n.length;c++){var h=n[c];r(t,h)||a(t,h,u(e,h))}}},4964:function(t,e,n){var r=n(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4994:function(t,e,n){"use strict";var r=n(3383).IteratorPrototype,i=n(30),s=n(9114),o=n(8003),a=n(7497),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:s(1,n)}),o(t,c,!1,!0),a[c]=u,t}},8880:function(t,e,n){var r=n(9781),i=n(3070),s=n(9114);t.exports=r?function(t,e,n){return i.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,n){"use strict";var r=n(7593),i=n(3070),s=n(9114);t.exports=function(t,e,n){var o=r(e);o in t?i.f(t,o,s(0,n)):t[o]=n}},654:function(t,e,n){"use strict";var r=n(2109),i=n(4994),s=n(9518),o=n(7674),a=n(8003),u=n(8880),c=n(1320),h=n(5112),f=n(1913),l=n(7497),d=n(3383),g=d.IteratorPrototype,p=d.BUGGY_SAFARI_ITERATORS,y=h("iterator"),v="keys",m="values",S="entries",x=function(){return this};t.exports=function(t,e,n,h,d,b,A){i(n,e,h);var F,E,w,O=function(t){if(t===d&&I)return I;if(!p&&t in H)return H[t];switch(t){case v:case m:case S:return function(){return new n(this,t)}}return function(){return new n(this)}},P=e+" Iterator",C=!1,H=t.prototype,D=H[y]||H["@@iterator"]||d&&H[d],I=!p&&D||O(d),j="Array"==e&&H.entries||D;if(j&&(F=s(j.call(new t)),g!==Object.prototype&&F.next&&(f||s(F)===g||(o?o(F,g):"function"!=typeof F[y]&&u(F,y,x)),a(F,P,!0,!0),f&&(l[P]=x))),d==m&&D&&D.name!==m&&(C=!0,I=function(){return D.call(this)}),f&&!A||H[y]===I||u(H,y,I),l[e]=I,d)if(E={values:O(m),keys:b?I:O(v),entries:O(S)},A)for(w in E)(p||C||!(w in H))&&c(H,w,E[w]);else r({target:e,proto:!0,forced:p||C},E);return E}},7235:function(t,e,n){var r=n(857),i=n(6656),s=n(6061),o=n(3070).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||o(e,t,{value:s.f(t)})}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,n){var r=n(7854),i=n(111),s=r.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},6833:function(t,e,n){var r=n(8113);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},5268:function(t,e,n){var r=n(4326),i=n(7854);t.exports="process"==r(i.process)},8113:function(t,e,n){var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,e,n){var r,i,s=n(7854),o=n(8113),a=s.process,u=a&&a.versions,c=u&&u.v8;c?i=(r=c.split("."))[0]+r[1]:o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var r=n(7854),i=n(1236).f,s=n(8880),o=n(1320),a=n(3505),u=n(9920),c=n(4705);t.exports=function(t,e){var n,h,f,l,d,g=t.target,p=t.global,y=t.stat;if(n=p?r:y?r[g]||a(g,{}):(r[g]||{}).prototype)for(h in e){if(l=e[h],f=t.noTargetGet?(d=i(n,h))&&d.value:n[h],!c(p?h:g+(y?".":"#")+h,t.forced)&&void 0!==f){if(typeof l==typeof f)continue;u(l,f)}(t.sham||f&&f.sham)&&s(l,"sham",!0),o(n,h,l,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},7007:function(t,e,n){"use strict";n(4916);var r=n(1320),i=n(7293),s=n(5112),o=n(2261),a=n(8880),u=s("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h="$0"==="a".replace(/./,"$0"),f=s("replace"),l=!!/./[f]&&""===/./[f]("a","$0"),d=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var g=s(t),p=!i((function(){var e={};return e[g]=function(){return 7},7!=""[t](e)})),y=p&&!i((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return e=!0,null},n[g](""),!e}));if(!p||!y||"replace"===t&&(!c||!h||l)||"split"===t&&!d){var v=/./[g],m=n(g,""[t],(function(t,e,n,r,i){return e.exec===o?p&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:l}),S=m[0],x=m[1];r(String.prototype,t,S),r(RegExp.prototype,g,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}f&&a(RegExp.prototype[g],"sham",!0)}},9974:function(t,e,n){var r=n(3099);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},5005:function(t,e,n){var r=n(857),i=n(7854),s=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?s(r[t])||s(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},1246:function(t,e,n){var r=n(648),i=n(7497),s=n(5112)("iterator");t.exports=function(t){if(null!=t)return t[s]||t["@@iterator"]||i[r(t)]}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6656:function(t){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},3501:function(t){t.exports={}},842:function(t,e,n){var r=n(7854);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),i=n(7293),s=n(317);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var r=n(7293),i=n(4326),s="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?s.call(t,""):Object(t)}:Object},9587:function(t,e,n){var r=n(111),i=n(7674);t.exports=function(t,e,n){var s,o;return i&&"function"==typeof(s=e.constructor)&&s!==n&&r(o=s.prototype)&&o!==n.prototype&&i(t,o),t}},2788:function(t,e,n){var r=n(5465),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},9909:function(t,e,n){var r,i,s,o=n(8536),a=n(7854),u=n(111),c=n(8880),h=n(6656),f=n(5465),l=n(6200),d=n(3501),g=a.WeakMap;if(o){var p=f.state||(f.state=new g),y=p.get,v=p.has,m=p.set;r=function(t,e){return e.facade=t,m.call(p,t,e),e},i=function(t){return y.call(p,t)||{}},s=function(t){return v.call(p,t)}}else{var S=l("state");d[S]=!0,r=function(t,e){return e.facade=t,c(t,S,e),e},i=function(t){return h(t,S)?t[S]:{}},s=function(t){return h(t,S)}}t.exports={set:r,get:i,has:s,enforce:function(t){return s(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},7659:function(t,e,n){var r=n(5112),i=n(7497),s=r("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[s]===t)}},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},4705:function(t,e,n){var r=n(7293),i=/#|\.prototype\./,s=function(t,e){var n=a[o(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},o=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=s.data={},u=s.NATIVE="N",c=s.POLYFILL="P";t.exports=s},111:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},1913:function(t){t.exports=!1},7850:function(t,e,n){var r=n(111),i=n(4326),s=n(5112)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},408:function(t,e,n){var r=n(9670),i=n(7659),s=n(7466),o=n(9974),a=n(1246),u=n(9212),c=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var h,f,l,d,g,p,y,v=n&&n.that,m=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_ITERATOR),x=!(!n||!n.INTERRUPTED),b=o(e,v,1+m+x),A=function(t){return h&&u(h),new c(!0,t)},F=function(t){return m?(r(t),x?b(t[0],t[1],A):b(t[0],t[1])):x?b(t,A):b(t)};if(S)h=t;else{if("function"!=typeof(f=a(t)))throw TypeError("Target is not iterable");if(i(f)){for(l=0,d=s(t.length);d>l;l++)if((g=F(t[l]))&&g instanceof c)return g;return new c(!1)}h=f.call(t)}for(p=h.next;!(y=p.call(h)).done;){try{g=F(y.value)}catch(t){throw u(h),t}if("object"==typeof g&&g&&g instanceof c)return g}return new c(!1)}},9212:function(t,e,n){var r=n(9670);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},3383:function(t,e,n){"use strict";var r,i,s,o=n(9518),a=n(8880),u=n(6656),c=n(5112),h=n(1913),f=c("iterator"),l=!1;[].keys&&("next"in(s=[].keys())?(i=o(o(s)))!==Object.prototype&&(r=i):l=!0),null==r&&(r={}),h||u(r,f)||a(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:l}},7497:function(t){t.exports={}},5948:function(t,e,n){var r,i,s,o,a,u,c,h,f=n(7854),l=n(1236).f,d=n(261).set,g=n(6833),p=n(5268),y=f.MutationObserver||f.WebKitMutationObserver,v=f.document,m=f.process,S=f.Promise,x=l(f,"queueMicrotask"),b=x&&x.value;b||(r=function(){var t,e;for(p&&(t=m.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?o():s=void 0,t}}s=void 0,t&&t.enter()},!g&&!p&&y&&v?(a=!0,u=v.createTextNode(""),new y(r).observe(u,{characterData:!0}),o=function(){u.data=a=!a}):S&&S.resolve?(c=S.resolve(void 0),h=c.then,o=function(){h.call(c,r)}):o=p?function(){m.nextTick(r)}:function(){d.call(f,r)}),t.exports=b||function(t){var e={fn:t,next:void 0};s&&(s.next=e),i||(i=e,o()),s=e}},3366:function(t,e,n){var r=n(7854);t.exports=r.Promise},133:function(t,e,n){var r=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},8536:function(t,e,n){var r=n(7854),i=n(2788),s=r.WeakMap;t.exports="function"==typeof s&&/native code/.test(i(s))},8523:function(t,e,n){"use strict";var r=n(3099),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},3929:function(t,e,n){var r=n(7850);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},1574:function(t,e,n){"use strict";var r=n(9781),i=n(7293),s=n(1956),o=n(5181),a=n(5296),u=n(7908),c=n(8361),h=Object.assign,f=Object.defineProperty;t.exports=!h||i((function(){if(r&&1!==h({b:1},h(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||s(h({},e)).join("")!=i}))?function(t,e){for(var n=u(t),i=arguments.length,h=1,f=o.f,l=a.f;i>h;)for(var d,g=c(arguments[h++]),p=f?s(g).concat(f(g)):s(g),y=p.length,v=0;y>v;)d=p[v++],r&&!l.call(g,d)||(n[d]=g[d]);return n}:h},30:function(t,e,n){var r,i=n(9670),s=n(6048),o=n(748),a=n(3501),u=n(490),c=n(317),h=n(6200),f=h("IE_PROTO"),l=function(){},d=function(t){return"<script>"+t+"</"+"script>"},g=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;g=r?function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F);for(var n=o.length;n--;)delete g.prototype[o[n]];return g()};a[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=i(t),n=new l,l.prototype=null,n[f]=t):n=g(),void 0===e?n:s(n,e)}},6048:function(t,e,n){var r=n(9781),i=n(3070),s=n(9670),o=n(1956);t.exports=r?Object.defineProperties:function(t,e){s(t);for(var n,r=o(e),a=r.length,u=0;a>u;)i.f(t,n=r[u++],e[n]);return t}},3070:function(t,e,n){var r=n(9781),i=n(4664),s=n(9670),o=n(7593),a=Object.defineProperty;e.f=r?a:function(t,e,n){if(s(t),e=o(e,!0),s(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),i=n(5296),s=n(9114),o=n(5656),a=n(7593),u=n(6656),c=n(4664),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=o(t),e=a(e,!0),c)try{return h(t,e)}catch(t){}if(u(t,e))return s(!i.f.call(t,e),t[e])}},1156:function(t,e,n){var r=n(5656),i=n(8006).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==s.call(t)?function(t){try{return i(t)}catch(t){return o.slice()}}(t):i(r(t))}},8006:function(t,e,n){var r=n(6324),i=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(6656),i=n(7908),s=n(6200),o=n(8544),a=s("IE_PROTO"),u=Object.prototype;t.exports=o?Object.getPrototypeOf:function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},6324:function(t,e,n){var r=n(6656),i=n(5656),s=n(1318).indexOf,o=n(3501);t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)!r(o,n)&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~s(c,n)||c.push(n));return c}},1956:function(t,e,n){var r=n(6324),i=n(748);t.exports=Object.keys||function(t){return r(t,i)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(9670),i=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,s){return r(n),i(s),e?t.call(n,s):n.__proto__=s,n}}():void 0)},288:function(t,e,n){"use strict";var r=n(1694),i=n(648);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},3887:function(t,e,n){var r=n(5005),i=n(8006),s=n(5181),o=n(9670);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(o(t)),n=s.f;return n?e.concat(n(t)):e}},857:function(t,e,n){var r=n(7854);t.exports=r},2534:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},9478:function(t,e,n){var r=n(9670),i=n(111),s=n(8523);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=s.f(t);return(0,n.resolve)(e),n.promise}},2248:function(t,e,n){var r=n(1320);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},1320:function(t,e,n){var r=n(7854),i=n(8880),s=n(6656),o=n(3505),a=n(2788),u=n(9909),c=u.get,h=u.enforce,f=String(String).split("String");(t.exports=function(t,e,n,a){var u,c=!!a&&!!a.unsafe,l=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||s(n,"name")||i(n,"name",e),(u=h(n)).source||(u.source=f.join("string"==typeof e?e:""))),t!==r?(c?!d&&t[e]&&(l=!0):delete t[e],l?t[e]=n:i(t,e,n)):l?t[e]=n:o(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},7651:function(t,e,n){var r=n(4326),i=n(2261);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var s=n.call(t,e);if("object"!=typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},2261:function(t,e,n){"use strict";var r,i,s=n(7066),o=n(2999),a=RegExp.prototype.exec,u=String.prototype.replace,c=a,h=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=o.UNSUPPORTED_Y||o.BROKEN_CARET,l=void 0!==/()??/.exec("")[1];(h||l||f)&&(c=function(t){var e,n,r,i,o=this,c=f&&o.sticky,d=s.call(o),g=o.source,p=0,y=t;return c&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),y=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(g="(?: "+g+")",y=" "+y,p++),n=new RegExp("^(?:"+g+")",d)),l&&(n=new RegExp("^"+g+"$(?!\\s)",d)),h&&(e=o.lastIndex),r=a.call(c?n:o,y),c?r?(r.input=r.input.slice(p),r[0]=r[0].slice(p),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:h&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),l&&r&&r.length>1&&u.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=c},7066:function(t,e,n){"use strict";var r=n(9670);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},2999:function(t,e,n){"use strict";var r=n(7293);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},4488:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},1150:function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},3505:function(t,e,n){var r=n(7854),i=n(8880);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},6340:function(t,e,n){"use strict";var r=n(5005),i=n(3070),s=n(5112),o=n(9781),a=s("species");t.exports=function(t){var e=r(t),n=i.f;o&&e&&!e[a]&&n(e,a,{configurable:!0,get:function(){return this}})}},8003:function(t,e,n){var r=n(3070).f,i=n(6656),s=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,s)&&r(t,s,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(2309),i=n(9711),s=r("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},5465:function(t,e,n){var r=n(7854),i=n(3505),s="__core-js_shared__",o=r[s]||i(s,{});t.exports=o},2309:function(t,e,n){var r=n(1913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.0",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},6707:function(t,e,n){var r=n(9670),i=n(3099),s=n(5112)("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||null==(n=r(o)[s])?e:i(n)}},8710:function(t,e,n){var r=n(9958),i=n(4488),s=function(t){return function(e,n){var s,o,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(s=a.charCodeAt(u))<55296||s>56319||u+1===c||(o=a.charCodeAt(u+1))<56320||o>57343?t?a.charAt(u):s:t?a.slice(u,u+2):o-56320+(s-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},8415:function(t,e,n){"use strict";var r=n(9958),i=n(4488);t.exports="".repeat||function(t){var e=String(i(this)),n="",s=r(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(n+=e);return n}},3111:function(t,e,n){var r=n(4488),i="["+n(1361)+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),a=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(s,"")),2&t&&(n=n.replace(o,"")),n}};t.exports={start:a(1),end:a(2),trim:a(3)}},261:function(t,e,n){var r,i,s,o=n(7854),a=n(7293),u=n(9974),c=n(490),h=n(317),f=n(6833),l=n(5268),d=o.location,g=o.setImmediate,p=o.clearImmediate,y=o.process,v=o.MessageChannel,m=o.Dispatch,S=0,x={},b="onreadystatechange",A=function(t){if(x.hasOwnProperty(t)){var e=x[t];delete x[t],e()}},F=function(t){return function(){A(t)}},E=function(t){A(t.data)},w=function(t){o.postMessage(t+"",d.protocol+"//"+d.host)};g&&p||(g=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return x[++S]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(S),S},p=function(t){delete x[t]},l?r=function(t){y.nextTick(F(t))}:m&&m.now?r=function(t){m.now(F(t))}:v&&!f?(s=(i=new v).port2,i.port1.onmessage=E,r=u(s.postMessage,s,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&d&&"file:"!==d.protocol&&!a(w)?(r=w,o.addEventListener("message",E,!1)):r=b in h("script")?function(t){c.appendChild(h("script")).onreadystatechange=function(){c.removeChild(this),A(t)}}:function(t){setTimeout(F(t),0)}),t.exports={set:g,clear:p}},863:function(t,e,n){var r=n(4326);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},1400:function(t,e,n){var r=n(9958),i=Math.max,s=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):s(n,e)}},5656:function(t,e,n){var r=n(8361),i=n(4488);t.exports=function(t){return r(i(t))}},9958:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},7466:function(t,e,n){var r=n(9958),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488);t.exports=function(t){return Object(r(t))}},7593:function(t,e,n){var r=n(111);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},1694:function(t,e,n){var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},9711:function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+n).toString(36)}},3307:function(t,e,n){var r=n(133);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},6061:function(t,e,n){var r=n(5112);e.f=r},5112:function(t,e,n){var r=n(7854),i=n(2309),s=n(6656),o=n(9711),a=n(133),u=n(3307),c=i("wks"),h=r.Symbol,f=u?h:h&&h.withoutSetter||o;t.exports=function(t){return s(c,t)||(a&&s(h,t)?c[t]=h[t]:c[t]=f("Symbol."+t)),c[t]}},1361:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2222:function(t,e,n){"use strict";var r=n(2109),i=n(7293),s=n(3157),o=n(111),a=n(7908),u=n(7466),c=n(6135),h=n(5417),f=n(1194),l=n(5112),d=n(7392),g=l("isConcatSpreadable"),p=9007199254740991,y="Maximum allowed index exceeded",v=d>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),m=f("concat"),S=function(t){if(!o(t))return!1;var e=t[g];return void 0!==e?!!e:s(t)};r({target:"Array",proto:!0,forced:!v||!m},{concat:function(t){var e,n,r,i,s,o=a(this),f=h(o,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(S(s=-1===e?o:arguments[e])){if(l+(i=u(s.length))>p)throw TypeError(y);for(n=0;n<i;n++,l++)n in s&&c(f,l,s[n])}else{if(l>=p)throw TypeError(y);c(f,l++,s)}return f.length=l,f}})},7327:function(t,e,n){"use strict";var r=n(2109),i=n(2092).filter,s=n(1194),o=n(9207),a=s("filter"),u=o("filter");r({target:"Array",proto:!0,forced:!a||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},2772:function(t,e,n){"use strict";var r=n(2109),i=n(1318).indexOf,s=n(9341),o=n(9207),a=[].indexOf,u=!!a&&1/[1].indexOf(1,-0)<0,c=s("indexOf"),h=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!h},{indexOf:function(t){return u?a.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},6992:function(t,e,n){"use strict";var r=n(5656),i=n(1223),s=n(7497),o=n(9909),a=n(654),u="Array Iterator",c=o.set,h=o.getterFor(u);t.exports=a(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=h(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},9600:function(t,e,n){"use strict";var r=n(2109),i=n(8361),s=n(5656),o=n(9341),a=[].join,u=i!=Object,c=o("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(t){return a.call(s(this),void 0===t?",":t)}})},4986:function(t,e,n){var r=n(2109),i=n(6583);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},1249:function(t,e,n){"use strict";var r=n(2109),i=n(2092).map,s=n(1194),o=n(9207),a=s("map"),u=o("map");r({target:"Array",proto:!0,forced:!a||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},7042:function(t,e,n){"use strict";var r=n(2109),i=n(111),s=n(3157),o=n(1400),a=n(7466),u=n(5656),c=n(6135),h=n(5112),f=n(1194),l=n(9207),d=f("slice"),g=l("slice",{ACCESSORS:!0,0:0,1:2}),p=h("species"),y=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!d||!g},{slice:function(t,e){var n,r,h,f=u(this),l=a(f.length),d=o(t,l),g=o(void 0===e?l:e,l);if(s(f)&&("function"!=typeof(n=f.constructor)||n!==Array&&!s(n.prototype)?i(n)&&null===(n=n[p])&&(n=void 0):n=void 0,n===Array||void 0===n))return y.call(f,d,g);for(r=new(void 0===n?Array:n)(v(g-d,0)),h=0;d<g;d++,h++)d in f&&c(r,h,f[d]);return r.length=h,r}})},9653:function(t,e,n){"use strict";var r=n(9781),i=n(7854),s=n(4705),o=n(1320),a=n(6656),u=n(4326),c=n(9587),h=n(7593),f=n(7293),l=n(30),d=n(8006).f,g=n(1236).f,p=n(3070).f,y=n(3111).trim,v="Number",m=i.Number,S=m.prototype,x=u(l(S))==v,b=function(t){var e,n,r,i,s,o,a,u,c=h(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=y(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(o=(s=c.slice(2)).length,a=0;a<o;a++)if((u=s.charCodeAt(a))<48||u>i)return NaN;return parseInt(s,r)}return+c};if(s(v,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var A,F=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof F&&(x?f((function(){S.valueOf.call(n)})):u(n)!=v)?c(new m(b(e)),n,F):b(e)},E=r?d(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;E.length>w;w++)a(m,A=E[w])&&!a(F,A)&&p(F,A,g(m,A));F.prototype=S,S.constructor=F,o(i,v,F)}},6977:function(t,e,n){"use strict";var r=n(2109),i=n(9958),s=n(863),o=n(8415),a=n(7293),u=1..toFixed,c=Math.floor,h=function(t,e,n){return 0===e?n:e%2==1?h(t,e-1,n*t):h(t*t,e/2,n)};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){u.call({})}))},{toFixed:function(t){var e,n,r,a,u=s(this),f=i(t),l=[0,0,0,0,0,0],d="",g="0",p=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*l[n],l[n]=r%1e7,r=c(r/1e7)},y=function(t){for(var e=6,n=0;--e>=0;)n+=l[e],l[e]=c(n/t),n=n%t*1e7},v=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var n=String(l[t]);e=""===e?n:e+o.call("0",7-n.length)+n}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(d="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*h(2,69,1))-69)<0?u*h(2,-e,1):u/h(2,e,1),n*=4503599627370496,(e=52-e)>0){for(p(0,n),r=f;r>=7;)p(1e7,0),r-=7;for(p(h(10,r,1),0),r=e-1;r>=23;)y(1<<23),r-=23;y(1<<r),p(1,1),y(2),g=v()}else p(0,n),p(1<<-e,0),g=v()+o.call("0",f);return g=f>0?d+((a=g.length)<=f?"0."+o.call("0",f-a)+g:g.slice(0,a-f)+"."+g.slice(a-f)):d+g}})},9601:function(t,e,n){var r=n(2109),i=n(1574);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},1539:function(t,e,n){var r=n(1694),i=n(1320),s=n(288);r||i(Object.prototype,"toString",s,{unsafe:!0})},8674:function(t,e,n){"use strict";var r,i,s,o,a=n(2109),u=n(1913),c=n(7854),h=n(5005),f=n(3366),l=n(1320),d=n(2248),g=n(8003),p=n(6340),y=n(111),v=n(3099),m=n(5787),S=n(2788),x=n(408),b=n(7072),A=n(6707),F=n(261).set,E=n(5948),w=n(9478),O=n(842),P=n(8523),C=n(2534),H=n(9909),D=n(4705),I=n(5112),j=n(5268),T=n(7392),R=I("species"),B="Promise",N=H.get,V=H.set,_=H.getterFor(B),L=f,K=c.TypeError,k=c.document,M=c.process,U=h("fetch"),q=P.f,G=q,W=!!(k&&k.createEvent&&c.dispatchEvent),z="function"==typeof PromiseRejectionEvent,J="unhandledrejection",X=D(B,(function(){if(!(S(L)!==String(L))){if(66===T)return!0;if(!j&&!z)return!0}if(u&&!L.prototype.finally)return!0;if(T>=51&&/native code/.test(L))return!1;var t=L.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[R]=e,!(t.then((function(){}))instanceof e)})),Y=X||!b((function(t){L.all(t).catch((function(){}))})),$=function(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e},Z=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;E((function(){for(var r=t.value,i=1==t.state,s=0;n.length>s;){var o,a,u,c=n[s++],h=i?c.ok:c.fail,f=c.resolve,l=c.reject,d=c.domain;try{h?(i||(2===t.rejection&&nt(t),t.rejection=1),!0===h?o=r:(d&&d.enter(),o=h(r),d&&(d.exit(),u=!0)),o===c.promise?l(K("Promise-chain cycle")):(a=$(o))?a.call(o,f,l):f(o)):l(r)}catch(t){d&&!u&&d.exit(),l(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&tt(t)}))}},Q=function(t,e,n){var r,i;W?((r=k.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!z&&(i=c["on"+t])?i(r):t===J&&O("Unhandled promise rejection",n)},tt=function(t){F.call(c,(function(){var e,n=t.facade,r=t.value;if(et(t)&&(e=C((function(){j?M.emit("unhandledRejection",r,n):Q(J,n,r)})),t.rejection=j||et(t)?2:1,e.error))throw e.value}))},et=function(t){return 1!==t.rejection&&!t.parent},nt=function(t){F.call(c,(function(){var e=t.facade;j?M.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))},rt=function(t,e,n){return function(r){t(e,r,n)}},it=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Z(t,!0))},st=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw K("Promise can't be resolved itself");var r=$(e);r?E((function(){var n={done:!1};try{r.call(e,rt(st,n,t),rt(it,n,t))}catch(e){it(n,e,t)}})):(t.value=e,t.state=1,Z(t,!1))}catch(e){it({done:!1},e,t)}}};X&&(L=function(t){m(this,L,B),v(t),r.call(this);var e=N(this);try{t(rt(st,e),rt(it,e))}catch(t){it(e,t)}},(r=function(t){V(this,{type:B,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(L.prototype,{then:function(t,e){var n=_(this),r=q(A(this,L));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=j?M.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Z(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=N(t);this.promise=t,this.resolve=rt(st,e),this.reject=rt(it,e)},P.f=q=function(t){return t===L||t===s?new i(t):G(t)},u||"function"!=typeof f||(o=f.prototype.then,l(f.prototype,"then",(function(t,e){var n=this;return new L((function(t,e){o.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof U&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return w(L,U.apply(c,arguments))}}))),a({global:!0,wrap:!0,forced:X},{Promise:L}),g(L,B,!1,!0),p(B),s=h(B),a({target:B,stat:!0,forced:X},{reject:function(t){var e=q(this);return e.reject.call(void 0,t),e.promise}}),a({target:B,stat:!0,forced:u||X},{resolve:function(t){return w(u&&this===s?L:this,t)}}),a({target:B,stat:!0,forced:Y},{all:function(t){var e=this,n=q(e),r=n.resolve,i=n.reject,s=C((function(){var n=v(e.resolve),s=[],o=0,a=1;x(t,(function(t){var u=o++,c=!1;s.push(void 0),a++,n.call(e,t).then((function(t){c||(c=!0,s[u]=t,--a||r(s))}),i)})),--a||r(s)}));return s.error&&i(s.value),n.promise},race:function(t){var e=this,n=q(e),r=n.reject,i=C((function(){var i=v(e.resolve);x(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},4603:function(t,e,n){var r=n(9781),i=n(7854),s=n(4705),o=n(9587),a=n(3070).f,u=n(8006).f,c=n(7850),h=n(7066),f=n(2999),l=n(1320),d=n(7293),g=n(9909).set,p=n(6340),y=n(5112)("match"),v=i.RegExp,m=v.prototype,S=/a/g,x=/a/g,b=new v(S)!==S,A=f.UNSUPPORTED_Y;if(r&&s("RegExp",!b||A||d((function(){return x[y]=!1,v(S)!=S||v(x)==x||"/a/i"!=v(S,"i")})))){for(var F=function(t,e){var n,r=this instanceof F,i=c(t),s=void 0===e;if(!r&&i&&t.constructor===F&&s)return t;b?i&&!s&&(t=t.source):t instanceof F&&(s&&(e=h.call(t)),t=t.source),A&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a=o(b?new v(t,e):v(t,e),r?this:m,F);return A&&n&&g(a,{sticky:n}),a},E=function(t){t in F||a(F,t,{configurable:!0,get:function(){return v[t]},set:function(e){v[t]=e}})},w=u(v),O=0;w.length>O;)E(w[O++]);m.constructor=F,F.prototype=m,l(i,"RegExp",F)}p("RegExp")},4916:function(t,e,n){"use strict";var r=n(2109),i=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},9714:function(t,e,n){"use strict";var r=n(1320),i=n(9670),s=n(7293),o=n(7066),a="toString",u=RegExp.prototype,c=u.toString,h=s((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),f=c.name!=a;(h||f)&&r(RegExp.prototype,a,(function(){var t=i(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in u)?o.call(t):n)}),{unsafe:!0})},8783:function(t,e,n){"use strict";var r=n(8710).charAt,i=n(9909),s=n(654),o="String Iterator",a=i.set,u=i.getterFor(o);s(String,"String",(function(t){a(this,{type:o,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},5306:function(t,e,n){"use strict";var r=n(7007),i=n(9670),s=n(7908),o=n(7466),a=n(9958),u=n(4488),c=n(1530),h=n(7651),f=Math.max,l=Math.min,d=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(t,e,n,r){var y=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,m=y?"$":"$0";return[function(n,r){var i=u(this),s=null==n?void 0:n[t];return void 0!==s?s.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!y&&v||"string"==typeof r&&-1===r.indexOf(m)){var s=n(e,t,this,r);if(s.done)return s.value}var u=i(t),d=String(this),g="function"==typeof r;g||(r=String(r));var p=u.global;if(p){var x=u.unicode;u.lastIndex=0}for(var b=[];;){var A=h(u,d);if(null===A)break;if(b.push(A),!p)break;""===String(A[0])&&(u.lastIndex=c(d,o(u.lastIndex),x))}for(var F,E="",w=0,O=0;O<b.length;O++){A=b[O];for(var P=String(A[0]),C=f(l(a(A.index),d.length),0),H=[],D=1;D<A.length;D++)H.push(void 0===(F=A[D])?F:String(F));var I=A.groups;if(g){var j=[P].concat(H,C,d);void 0!==I&&j.push(I);var T=String(r.apply(void 0,j))}else T=S(P,d,C,H,I,r);C>=w&&(E+=d.slice(w,C)+T,w=C+P.length)}return E+d.slice(w)}];function S(t,n,r,i,o,a){var u=r+t.length,c=i.length,h=p;return void 0!==o&&(o=s(o),h=g),e.call(a,h,(function(e,s){var a;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":a=o[s.slice(1,-1)];break;default:var h=+s;if(0===h)return e;if(h>c){var f=d(h/10);return 0===f?e:f<=c?void 0===i[f-1]?s.charAt(1):i[f-1]+s.charAt(1):e}a=i[h-1]}return void 0===a?"":a}))}}))},4765:function(t,e,n){"use strict";var r=n(7007),i=n(9670),s=n(4488),o=n(1150),a=n(7651);r("search",1,(function(t,e,n){return[function(e){var n=s(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var s=i(t),u=String(this),c=s.lastIndex;o(c,0)||(s.lastIndex=0);var h=a(s,u);return o(s.lastIndex,c)||(s.lastIndex=c),null===h?-1:h.index}]}))},3123:function(t,e,n){"use strict";var r=n(7007),i=n(7850),s=n(9670),o=n(4488),a=n(6707),u=n(1530),c=n(7466),h=n(7651),f=n(2261),l=n(7293),d=[].push,g=Math.min,p=4294967295,y=!l((function(){return!RegExp(p,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(o(this)),s=void 0===n?p:n>>>0;if(0===s)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,s);for(var a,u,c,h=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,y=new RegExp(t.source,l+"g");(a=f.call(y,r))&&!((u=y.lastIndex)>g&&(h.push(r.slice(g,a.index)),a.length>1&&a.index<r.length&&d.apply(h,a.slice(1)),c=a[0].length,g=u,h.length>=s));)y.lastIndex===a.index&&y.lastIndex++;return g===r.length?!c&&y.test("")||h.push(""):h.push(r.slice(g)),h.length>s?h.slice(0,s):h}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=o(this),s=null==e?void 0:e[t];return void 0!==s?s.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var f=s(t),l=String(this),d=a(f,RegExp),v=f.unicode,m=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(y?"y":"g"),S=new d(y?f:"^(?:"+f.source+")",m),x=void 0===i?p:i>>>0;if(0===x)return[];if(0===l.length)return null===h(S,l)?[l]:[];for(var b=0,A=0,F=[];A<l.length;){S.lastIndex=y?A:0;var E,w=h(S,y?l:l.slice(A));if(null===w||(E=g(c(S.lastIndex+(y?0:A)),l.length))===b)A=u(l,A,v);else{if(F.push(l.slice(b,A)),F.length===x)return F;for(var O=1;O<=w.length-1;O++)if(F.push(w[O]),F.length===x)return F;A=b=E}}return F.push(l.slice(b)),F}]}),!y)},6755:function(t,e,n){"use strict";var r,i=n(2109),s=n(1236).f,o=n(7466),a=n(3929),u=n(4488),c=n(4964),h=n(1913),f="".startsWith,l=Math.min,d=c("startsWith");i({target:"String",proto:!0,forced:!!(h||d||(r=s(String.prototype,"startsWith"),!r||r.writable))&&!d},{startsWith:function(t){var e=String(u(this));a(t);var n=o(l(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return f?f.call(e,r,n):e.slice(n,n+r.length)===r}})},1817:function(t,e,n){"use strict";var r=n(2109),i=n(9781),s=n(7854),o=n(6656),a=n(111),u=n(3070).f,c=n(9920),h=s.Symbol;if(i&&"function"==typeof h&&(!("description"in h.prototype)||void 0!==h().description)){var f={},l=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof l?new h(t):void 0===t?h():h(t);return""===t&&(f[e]=!0),e};c(l,h);var d=l.prototype=h.prototype;d.constructor=l;var g=d.toString,p="Symbol(test)"==String(h("test")),y=/^Symbol\((.*)\)[^)]+$/;u(d,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=g.call(t);if(o(f,t))return"";var n=p?e.slice(7,-1):e.replace(y,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:l})}},2165:function(t,e,n){n(7235)("iterator")},2526:function(t,e,n){"use strict";var r=n(2109),i=n(7854),s=n(5005),o=n(1913),a=n(9781),u=n(133),c=n(3307),h=n(7293),f=n(6656),l=n(3157),d=n(111),g=n(9670),p=n(7908),y=n(5656),v=n(7593),m=n(9114),S=n(30),x=n(1956),b=n(8006),A=n(1156),F=n(5181),E=n(1236),w=n(3070),O=n(5296),P=n(8880),C=n(1320),H=n(2309),D=n(6200),I=n(3501),j=n(9711),T=n(5112),R=n(6061),B=n(7235),N=n(8003),V=n(9909),_=n(2092).forEach,L=D("hidden"),K="Symbol",k=T("toPrimitive"),M=V.set,U=V.getterFor(K),q=Object.prototype,G=i.Symbol,W=s("JSON","stringify"),z=E.f,J=w.f,X=A.f,Y=O.f,$=H("symbols"),Z=H("op-symbols"),Q=H("string-to-symbol-registry"),tt=H("symbol-to-string-registry"),et=H("wks"),nt=i.QObject,rt=!nt||!nt.prototype||!nt.prototype.findChild,it=a&&h((function(){return 7!=S(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=z(q,e);r&&delete q[e],J(t,e,n),r&&t!==q&&J(q,e,r)}:J,st=function(t,e){var n=$[t]=S(G.prototype);return M(n,{type:K,tag:t,description:e}),a||(n.description=e),n},ot=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},at=function(t,e,n){t===q&&at(Z,e,n),g(t);var r=v(e,!0);return g(n),f($,r)?(n.enumerable?(f(t,L)&&t[L][r]&&(t[L][r]=!1),n=S(n,{enumerable:m(0,!1)})):(f(t,L)||J(t,L,m(1,{})),t[L][r]=!0),it(t,r,n)):J(t,r,n)},ut=function(t,e){g(t);var n=y(e),r=x(n).concat(lt(n));return _(r,(function(e){a&&!ct.call(n,e)||at(t,e,n[e])})),t},ct=function(t){var e=v(t,!0),n=Y.call(this,e);return!(this===q&&f($,e)&&!f(Z,e))&&(!(n||!f(this,e)||!f($,e)||f(this,L)&&this[L][e])||n)},ht=function(t,e){var n=y(t),r=v(e,!0);if(n!==q||!f($,r)||f(Z,r)){var i=z(n,r);return!i||!f($,r)||f(n,L)&&n[L][r]||(i.enumerable=!0),i}},ft=function(t){var e=X(y(t)),n=[];return _(e,(function(t){f($,t)||f(I,t)||n.push(t)})),n},lt=function(t){var e=t===q,n=X(e?Z:y(t)),r=[];return _(n,(function(t){!f($,t)||e&&!f(q,t)||r.push($[t])})),r};(u||(C((G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=j(t),n=function(t){this===q&&n.call(Z,t),f(this,L)&&f(this[L],e)&&(this[L][e]=!1),it(this,e,m(1,t))};return a&&rt&&it(q,e,{configurable:!0,set:n}),st(e,t)}).prototype,"toString",(function(){return U(this).tag})),C(G,"withoutSetter",(function(t){return st(j(t),t)})),O.f=ct,w.f=at,E.f=ht,b.f=A.f=ft,F.f=lt,R.f=function(t){return st(T(t),t)},a&&(J(G.prototype,"description",{configurable:!0,get:function(){return U(this).description}}),o||C(q,"propertyIsEnumerable",ct,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:G}),_(x(et),(function(t){B(t)})),r({target:K,stat:!0,forced:!u},{for:function(t){var e=String(t);if(f(Q,e))return Q[e];var n=G(e);return Q[e]=n,tt[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(f(tt,t))return tt[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!a},{create:function(t,e){return void 0===e?S(t):ut(S(t),e)},defineProperty:at,defineProperties:ut,getOwnPropertyDescriptor:ht}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ft,getOwnPropertySymbols:lt}),r({target:"Object",stat:!0,forced:h((function(){F.f(1)}))},{getOwnPropertySymbols:function(t){return F.f(p(t))}}),W)&&r({target:"JSON",stat:!0,forced:!u||h((function(){var t=G();return"[null]"!=W([t])||"{}"!=W({a:t})||"{}"!=W(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],s=1;arguments.length>s;)i.push(arguments[s++]);if(r=e,(d(e)||void 0!==t)&&!ot(t))return l(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ot(e))return e}),i[1]=e,W.apply(null,i)}});G.prototype[k]||P(G.prototype,k,G.prototype.valueOf),N(G,K),I[L]=!0},3948:function(t,e,n){var r=n(7854),i=n(8324),s=n(6992),o=n(8880),a=n(5112),u=a("iterator"),c=a("toStringTag"),h=s.values;for(var f in i){var l=r[f],d=l&&l.prototype;if(d){if(d[u]!==h)try{o(d,u,h)}catch(t){d[u]=h}if(d[c]||o(d,c,f),i[f])for(var g in s)if(d[g]!==s[g])try{o(d,g,s[g])}catch(t){d[g]=s[g]}}}},8738:function(t){function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},2703:function(t,e,n){"use strict";var r=n(414);function i(){}function s(){}s.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},5697:function(t,e,n){t.exports=n(2703)()},414:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5666:function(t){var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,s=Object.create(i.prototype),o=new C(r||[]);return s._invoke=function(t,e,n){var r=f;return function(i,s){if(r===d)throw new Error("Generator is already running");if(r===g){if("throw"===i)throw s;return D()}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=w(o,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=h(t,e,n);if("normal"===u.type){if(r=n.done?g:l,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=g,n.method="throw",n.arg=u.arg)}}}(t,n,o),s}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f="suspendedStart",l="suspendedYield",d="executing",g="completed",p={};function y(){}function v(){}function m(){}var S={};S[s]=function(){return this};var x=Object.getPrototypeOf,b=x&&x(x(H([])));b&&b!==n&&r.call(b,s)&&(S=b);var A=m.prototype=y.prototype=Object.create(S);function F(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,s,o,a){var u=h(t[i],t,s);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(f).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,a)}))}a(u.arg)}var i;this._invoke=function(t,r){function s(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(s,s):s()}}function w(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=h(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function H(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:D}}function D(){return{value:e,done:!0}}return v.prototype=A.constructor=m,m.constructor=v,v.displayName=u(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,a,"GeneratorFunction")),t.prototype=Object.create(A),t},t.awrap=function(t){return{__await:t}},F(E.prototype),E.prototype[o]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new E(c(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},F(A),u(A,a,"Generator"),A[s]=function(){return this},A.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=H,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:H(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},3262:function(t,e){var n,r,i,s,o,a,u=u||function(t,e){var n={},r=n.lib={},i=r.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=r.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var s=0;s<i;s++){var o=n[s>>>2]>>>24-s%4*8&255;e[r+s>>>2]|=o<<24-(r+s)%4*8}else if(n.length>65535)for(s=0;s<i;s+=4)e[r+s>>>2]=n[s>>>2];else e.push.apply(e,n);return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),o=n.enc={},a=o.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var s=e[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},u=o.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var s=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(s))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},c=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,c=t.min(4*u,i);if(u){for(var h=0;h<u;h+=o)this._doProcessBlock(r,h);var f=r.splice(0,u);n.sigBytes-=c}return new s.init(f,c)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),f=(r.Hasher=h.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}}),n.algo={});return n}(Math);if(void 0===c||!c)var c={};c.namespace=function(){var t,e,n,r=arguments,i=null;for(t=0;t<r.length;t+=1)for(n=(""+r[t]).split("."),i=c,e="YAHOO"==n[0]?1:0;e<n.length;e+=1)i[n[e]]=i[n[e]]||{},i=i[n[e]];return i},c.log=function(t,e,n){var r=c.widget.Logger;return!(!r||!r.log)&&r.log(t,e,n)},c.register=function(t,e,n){var r,i,s,o,a,u=c.env.modules;for(u[t]||(u[t]={versions:[],builds:[]}),r=u[t],i=n.version,s=n.build,o=c.env.listeners,r.name=t,r.version=i,r.build=s,r.versions.push(i),r.builds.push(s),r.mainClass=e,a=0;a<o.length;a+=1)o[a](r);e?(e.VERSION=i,e.BUILD=s):c.log("mainClass is undefined for module "+t,"warn")},c.env=c.env||{modules:[],listeners:[]},c.env.getVersion=function(t){return c.env.modules[t]||null},c.env.parseUA=function(t){var e,n=function(t){var e=0;return parseFloat(t.replace(/\./g,(function(){return 1==e++?"":"."})))},r=navigator,i={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:r&&r.cajaVersion,secure:!1,os:null},s=t||navigator&&navigator.userAgent,o=window&&window.location,a=o&&o.href;return i.secure=a&&0===a.toLowerCase().indexOf("https"),s&&(/windows|win32/i.test(s)?i.os="windows":/macintosh/i.test(s)?i.os="macintosh":/rhino/i.test(s)&&(i.os="rhino"),/KHTML/.test(s)&&(i.webkit=1),(e=s.match(/AppleWebKit\/([^\s]*)/))&&e[1]&&(i.webkit=n(e[1]),/ Mobile\//.test(s)?(i.mobile="Apple",(e=s.match(/OS ([^\s]*)/))&&e[1]&&(e=n(e[1].replace("_","."))),i.ios=e,i.ipad=i.ipod=i.iphone=0,(e=s.match(/iPad|iPod|iPhone/))&&e[0]&&(i[e[0].toLowerCase()]=i.ios)):((e=s.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))&&(i.mobile=e[0]),/webOS/.test(s)&&(i.mobile="WebOS",(e=s.match(/webOS\/([^\s]*);/))&&e[1]&&(i.webos=n(e[1]))),/ Android/.test(s)&&(i.mobile="Android",(e=s.match(/Android ([^\s]*);/))&&e[1]&&(i.android=n(e[1])))),(e=s.match(/Chrome\/([^\s]*)/))&&e[1]?i.chrome=n(e[1]):(e=s.match(/AdobeAIR\/([^\s]*)/))&&(i.air=e[0])),i.webkit||((e=s.match(/Opera[\s\/]([^\s]*)/))&&e[1]?(i.opera=n(e[1]),(e=s.match(/Version\/([^\s]*)/))&&e[1]&&(i.opera=n(e[1])),(e=s.match(/Opera Mini[^;]*/))&&(i.mobile=e[0])):(e=s.match(/MSIE\s([^;]*)/))&&e[1]?i.ie=n(e[1]):(e=s.match(/Gecko\/([^\s]*)/))&&(i.gecko=1,(e=s.match(/rv:([^\s\)]*)/))&&e[1]&&(i.gecko=n(e[1]))))),i},c.env.ua=c.env.parseUA(),function(){if(c.namespace("util","widget","example"),"undefined"!=typeof YAHOO_config){var t,e=YAHOO_config.listener,n=c.env.listeners,r=!0;if(e){for(t=0;t<n.length;t++)if(n[t]==e){r=!1;break}r&&n.push(e)}}}(),c.lang=c.lang||{},n=c.lang,r=Object.prototype,i=[],s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},o=["toString","valueOf"],a={isArray:function(t){return"[object Array]"===r.toString.apply(t)},isBoolean:function(t){return"boolean"==typeof t},isFunction:function(t){return"function"==typeof t||"[object Function]"===r.toString.apply(t)},isNull:function(t){return null===t},isNumber:function(t){return"number"==typeof t&&isFinite(t)},isObject:function(t){return t&&("object"==typeof t||n.isFunction(t))||!1},isString:function(t){return"string"==typeof t},isUndefined:function(t){return void 0===t},_IEEnumFix:c.env.ua.ie?function(t,e){var i,s,a;for(i=0;i<o.length;i+=1)a=e[s=o[i]],n.isFunction(a)&&a!=r[s]&&(t[s]=a)}:function(){},escapeHTML:function(t){return t.replace(/[&<>"'\/`]/g,(function(t){return s[t]}))},extend:function(t,e,i){if(!e||!t)throw new Error("extend failed, please check that all dependencies are included.");var s,o=function(){};if(o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==r.constructor&&(e.prototype.constructor=e),i){for(s in i)n.hasOwnProperty(i,s)&&(t.prototype[s]=i[s]);n._IEEnumFix(t.prototype,i)}},augmentObject:function(t,e){if(!e||!t)throw new Error("Absorb failed, verify dependencies.");var r,i,s=arguments,o=s[2];if(o&&!0!==o)for(r=2;r<s.length;r+=1)t[s[r]]=e[s[r]];else{for(i in e)!o&&i in t||(t[i]=e[i]);n._IEEnumFix(t,e)}return t},augmentProto:function(t,e){if(!e||!t)throw new Error("Augment failed, verify dependencies.");var r,i=[t.prototype,e.prototype];for(r=2;r<arguments.length;r+=1)i.push(arguments[r]);return n.augmentObject.apply(this,i),t},dump:function(t,e){var r,i,s=[],o="{...}";if(!n.isObject(t))return t+"";if(t instanceof Date||"nodeType"in t&&"tagName"in t)return t;if(n.isFunction(t))return"f(){...}";if(e=n.isNumber(e)?e:3,n.isArray(t)){for(s.push("["),r=0,i=t.length;r<i;r+=1)n.isObject(t[r])?s.push(e>0?n.dump(t[r],e-1):o):s.push(t[r]),s.push(", ");s.length>1&&s.pop(),s.push("]")}else{for(r in s.push("{"),t)n.hasOwnProperty(t,r)&&(s.push(r+" => "),n.isObject(t[r])?s.push(e>0?n.dump(t[r],e-1):o):s.push(t[r]),s.push(", "));s.length>1&&s.pop(),s.push("}")}return s.join("")},substitute:function(t,e,r,i){for(var s,o,a,u,c,h,f,l,d,g=[],p=t.length;!((s=t.lastIndexOf("{",p))<0||s+1>(o=t.indexOf("}",s)));)h=null,(a=(u=f=t.substring(s+1,o)).indexOf(" "))>-1&&(h=u.substring(a+1),u=u.substring(0,a)),c=e[u],r&&(c=r(u,c,h)),n.isObject(c)?n.isArray(c)?c=n.dump(c,parseInt(h,10)):((l=(h=h||"").indexOf("dump"))>-1&&(h=h.substring(4)),d=c.toString(),c="[object Object]"===d||l>-1?n.dump(c,parseInt(h,10)):d):n.isString(c)||n.isNumber(c)||(c="~-"+g.length+"-~",g[g.length]=f),t=t.substring(0,s)+c+t.substring(o+1),!1===i&&(p=s-1);for(s=g.length-1;s>=0;s-=1)t=t.replace(new RegExp("~-"+s+"-~"),"{"+g[s]+"}","g");return t},trim:function(t){try{return t.replace(/^\s+|\s+$/g,"")}catch(e){return t}},merge:function(){var t,e={},r=arguments,i=r.length;for(t=0;t<i;t+=1)n.augmentObject(e,r[t],!0);return e},later:function(t,e,r,s,o){t=t||0,e=e||{};var a,u,c=r,h=s;if(n.isString(r)&&(c=e[r]),!c)throw new TypeError("method undefined");return n.isUndefined(s)||n.isArray(h)||(h=[s]),a=function(){c.apply(e,h||i)},u=o?setInterval(a,t):setTimeout(a,t),{interval:o,cancel:function(){this.interval?clearInterval(u):clearTimeout(u)}}},isValue:function(t){return n.isObject(t)||n.isString(t)||n.isNumber(t)||n.isBoolean(t)}},n.hasOwnProperty=r.hasOwnProperty?function(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}:function(t,e){return!n.isUndefined(t[e])&&t.constructor.prototype[e]!==t[e]},a.augmentObject(n,a,!0),c.util.Lang=n,n.augment=n.augmentProto,c.augment=n.augmentProto,c.extend=n.extend,c.register("yahoo",c,{version:"2.9.0",build:"2800"}),void 0!==f&&f||(f={}),void 0!==f.asn1&&f.asn1||(f.asn1={}),f.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1).length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";e=new rt(r,16).xor(t).add(rt.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){var n=D(t).replace(/(.{64})/g,"$1\r\n");return"-----BEGIN "+e+"-----\r\n"+(n=n.replace(/\r\n$/,""))+"\r\n-----END "+e+"-----\r\n"},this.newObject=function(t){var e=f.asn1,n=Object.keys(t);if(1!=n.length)throw"key of param shall be only one.";var r=n[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+r+":"))throw"undefined key: "+r;if("bool"==r)return new e.DERBoolean(t[r]);if("int"==r)return new e.DERInteger(t[r]);if("bitstr"==r)return new e.DERBitString(t[r]);if("octstr"==r)return new e.DEROctetString(t[r]);if("null"==r)return new e.DERNull(t[r]);if("oid"==r)return new e.DERObjectIdentifier(t[r]);if("enum"==r)return new e.DEREnumerated(t[r]);if("utf8str"==r)return new e.DERUTF8String(t[r]);if("numstr"==r)return new e.DERNumericString(t[r]);if("prnstr"==r)return new e.DERPrintableString(t[r]);if("telstr"==r)return new e.DERTeletexString(t[r]);if("ia5str"==r)return new e.DERIA5String(t[r]);if("utctime"==r)return new e.DERUTCTime(t[r]);if("gentime"==r)return new e.DERGeneralizedTime(t[r]);if("seq"==r){for(var i=t[r],s=[],o=0;o<i.length;o++){var a=e.ASN1Util.newObject(i[o]);s.push(a)}return new e.DERSequence({array:s})}if("set"==r){for(i=t[r],s=[],o=0;o<i.length;o++){a=e.ASN1Util.newObject(i[o]);s.push(a)}return new e.DERSet({array:s})}if("tag"==r){var u=t[r];if("[object Array]"===Object.prototype.toString.call(u)&&3==u.length){var c=e.ASN1Util.newObject(u[2]);return new e.DERTaggedObject({tag:u[0],explicit:u[1],obj:c})}var h={};if(void 0!==u.explicit&&(h.explicit=u.explicit),void 0!==u.tag&&(h.tag=u.tag),void 0===u.obj)throw"obj shall be specified for 'tag'.";return h.obj=e.ASN1Util.newObject(u.obj),new e.DERTaggedObject(h)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},f.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",n=parseInt(t.substr(0,2),16),r=(e=Math.floor(n/40)+"."+n%40,""),i=2;i<t.length;i+=2){var s=("00000000"+parseInt(t.substr(i,2),16).toString(2)).slice(-8);if(r+=s.substr(1,7),"0"==s.substr(0,1))e=e+"."+new rt(r,2).toString(10),r=""}return e},f.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new rt(t,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";r=s+r;for(o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=e(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},f.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var n=e.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+n).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},f.asn1.DERAbstractString=function(t){f.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=b(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},c.lang.extend(f.asn1.DERAbstractString,f.asn1.ASN1Object),f.asn1.DERAbstractTime=function(t){f.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,n){var r=this.zeroPadding,i=this.localDateToUTC(t),s=String(i.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=s+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var a=i.getMilliseconds();if(0!=a){var u=r(String(a),3);o=o+"."+(u=u.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=b(t)},this.setByDateValue=function(t,e,n,r,i,s){var o=new Date(Date.UTC(t,e-1,n,r,i,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},c.lang.extend(f.asn1.DERAbstractTime,f.asn1.ASN1Object),f.asn1.DERAbstractStructured=function(t){f.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},c.lang.extend(f.asn1.DERAbstractStructured,f.asn1.ASN1Object),f.asn1.DERBoolean=function(){f.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},c.lang.extend(f.asn1.DERBoolean,f.asn1.ASN1Object),f.asn1.DERInteger=function(t){f.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=f.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new rt(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},c.lang.extend(f.asn1.DERInteger,f.asn1.ASN1Object),f.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=f.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}f.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var n="0"+t;this.hTLV=null,this.isModified=!0,this.hV=n+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var n=0;n<=e;n++)t+="0";var r="";for(n=0;n<t.length-1;n+=8){var i=t.substr(n,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",n=0;n<t.length;n++)1==t[n]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},c.lang.extend(f.asn1.DERBitString,f.asn1.ASN1Object),f.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=f.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}f.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},c.lang.extend(f.asn1.DEROctetString,f.asn1.DERAbstractString),f.asn1.DERNull=function(){f.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},c.lang.extend(f.asn1.DERNull,f.asn1.ASN1Object),f.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new rt(t,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";r=s+r;for(o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};f.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=e(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var e=f.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},c.lang.extend(f.asn1.DERObjectIdentifier,f.asn1.ASN1Object),f.asn1.DEREnumerated=function(t){f.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=f.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new rt(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},c.lang.extend(f.asn1.DEREnumerated,f.asn1.ASN1Object),f.asn1.DERUTF8String=function(t){f.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},c.lang.extend(f.asn1.DERUTF8String,f.asn1.DERAbstractString),f.asn1.DERNumericString=function(t){f.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},c.lang.extend(f.asn1.DERNumericString,f.asn1.DERAbstractString),f.asn1.DERPrintableString=function(t){f.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},c.lang.extend(f.asn1.DERPrintableString,f.asn1.DERAbstractString),f.asn1.DERTeletexString=function(t){f.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},c.lang.extend(f.asn1.DERTeletexString,f.asn1.DERAbstractString),f.asn1.DERIA5String=function(t){f.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},c.lang.extend(f.asn1.DERIA5String,f.asn1.DERAbstractString),f.asn1.DERUTCTime=function(t){f.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=b(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=b(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},c.lang.extend(f.asn1.DERUTCTime,f.asn1.DERAbstractTime),f.asn1.DERGeneralizedTime=function(t){f.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=b(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=b(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},c.lang.extend(f.asn1.DERGeneralizedTime,f.asn1.DERAbstractTime),f.asn1.DERSequence=function(t){f.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){t+=this.asn1Array[e].getEncodedHex()}return this.hV=t,this.hV}},c.lang.extend(f.asn1.DERSequence,f.asn1.DERAbstractStructured),f.asn1.DERSet=function(t){f.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var n=this.asn1Array[e];t.push(n.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},c.lang.extend(f.asn1.DERSet,f.asn1.DERAbstractStructured),f.asn1.DERTaggedObject=function(t){f.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,n){this.hT=e,this.isExplicit=t,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},c.lang.extend(f.asn1.DERTaggedObject,f.asn1.ASN1Object),void 0!==f&&f||(f={}),void 0!==f.asn1&&f.asn1||(f.asn1={}),void 0!==f.asn1.cms&&f.asn1.cms||(f.asn1.cms={}),f.asn1.cms.Attribute=function(t){f.asn1.cms.Attribute.superclass.constructor.call(this);this.getEncodedHex=function(){var t,e,n;t=new f.asn1.DERObjectIdentifier({oid:this.attrTypeOid}),e=new f.asn1.DERSet({array:this.valueList});try{e.getEncodedHex()}catch(t){throw"fail valueSet.getEncodedHex in Attribute(1)/"+t}n=new f.asn1.DERSequence({array:[t,e]});try{this.hTLV=n.getEncodedHex()}catch(t){throw"failed seq.getEncodedHex in Attribute(2)/"+t}return this.hTLV}},c.lang.extend(f.asn1.cms.Attribute,f.asn1.ASN1Object),f.asn1.cms.ContentType=function(t){f.asn1.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var e=null;if(void 0!==t){e=new f.asn1.DERObjectIdentifier(t);this.valueList=[e]}},c.lang.extend(f.asn1.cms.ContentType,f.asn1.cms.Attribute),f.asn1.cms.MessageDigest=function(t){if(f.asn1.cms.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==t)if(t.eciObj instanceof f.asn1.cms.EncapsulatedContentInfo&&"string"==typeof t.hashAlg){var e=t.eciObj.eContentValueHex,n=t.hashAlg,r=f.crypto.Util.hashHex(e,n);(i=new f.asn1.DEROctetString({hex:r})).getEncodedHex(),this.valueList=[i]}else{var i;(i=new f.asn1.DEROctetString(t)).getEncodedHex(),this.valueList=[i]}},c.lang.extend(f.asn1.cms.MessageDigest,f.asn1.cms.Attribute),f.asn1.cms.SigningTime=function(t){if(f.asn1.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==t){var e=new f.asn1.x509.Time(t);try{e.getEncodedHex()}catch(t){throw"SigningTime.getEncodedHex() failed/"+t}this.valueList=[e]}},c.lang.extend(f.asn1.cms.SigningTime,f.asn1.cms.Attribute),f.asn1.cms.SigningCertificate=function(t){f.asn1.cms.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12";var e=f.asn1,n=f.asn1.cms,r=f.crypto;this.setCerts=function(t){for(var i=[],s=0;s<t.length;s++){var o=Rt.getHexFromPEM(t[s]),a=r.Util.hashHex(o,"sha1"),u=new e.DEROctetString({hex:a});u.getEncodedHex();var c=new n.IssuerAndSerialNumber({cert:t[s]});c.getEncodedHex();var h=new e.DERSequence({array:[u,c]});h.getEncodedHex(),i.push(h)}var f=new e.DERSequence({array:i});f.getEncodedHex(),this.valueList=[f]},void 0!==t&&"object"==typeof t.array&&this.setCerts(t.array)},c.lang.extend(f.asn1.cms.SigningCertificate,f.asn1.cms.Attribute),f.asn1.cms.SigningCertificateV2=function(t){f.asn1.cms.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47";var e=f.asn1,n=f.asn1.x509,r=f.asn1.cms,i=f.crypto;if(this.setCerts=function(t,s){for(var o=[],a=0;a<t.length;a++){var u=Rt.getHexFromPEM(t[a]),c=[];"sha256"!=s&&c.push(new n.AlgorithmIdentifier({name:s}));var h=i.Util.hashHex(u,s),f=new e.DEROctetString({hex:h});f.getEncodedHex(),c.push(f);var l=new r.IssuerAndSerialNumber({cert:t[a]});l.getEncodedHex(),c.push(l);var d=new e.DERSequence({array:c});d.getEncodedHex(),o.push(d)}var g=new e.DERSequence({array:o});g.getEncodedHex(),this.valueList=[g]},void 0!==t&&"object"==typeof t.array){var s="sha256";"string"==typeof t.hashAlg&&(s=t.hashAlg),this.setCerts(t.array,s)}},c.lang.extend(f.asn1.cms.SigningCertificateV2,f.asn1.cms.Attribute),f.asn1.cms.IssuerAndSerialNumber=function(t){f.asn1.cms.IssuerAndSerialNumber.superclass.constructor.call(this);var e=f.asn1,n=e.x509;this.setByCertPEM=function(t){var r=Rt.getHexFromPEM(t),i=new Xt;i.hex=r;var s=i.getIssuerHex();this.dIssuer=new n.X500Name,this.dIssuer.hTLV=s;var o=i.getSerialNumberHex();this.dSerial=new e.DERInteger({hex:o})},this.getEncodedHex=function(){var t=new f.asn1.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),t.issuer&&t.serial&&(t.issuer instanceof f.asn1.x509.X500Name?this.dIssuer=t.issuer:this.dIssuer=new f.asn1.x509.X500Name(t.issuer),t.serial instanceof f.asn1.DERInteger?this.dSerial=t.serial:this.dSerial=new f.asn1.DERInteger(t.serial)),"string"==typeof t.cert&&this.setByCertPEM(t.cert))},c.lang.extend(f.asn1.cms.IssuerAndSerialNumber,f.asn1.ASN1Object),f.asn1.cms.AttributeList=function(t){f.asn1.cms.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(t){t instanceof f.asn1.cms.Attribute&&this.list.push(t)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new f.asn1.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},c.lang.extend(f.asn1.cms.AttributeList,f.asn1.ASN1Object),f.asn1.cms.SignerInfo=function(t){f.asn1.cms.SignerInfo.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.cms,r=f.asn1.x509;this.dCMSVersion=new e.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new n.AttributeList,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new n.AttributeList,this.setSignerIdentifier=function(t){if("string"==typeof t&&-1!=t.indexOf("CERTIFICATE")&&-1!=t.indexOf("BEGIN")&&-1!=t.indexOf("END")){this.dSignerIdentifier=new n.IssuerAndSerialNumber({cert:t})}},this.setForContentAndHash=function(t){void 0!==t&&(t.eciObj instanceof f.asn1.cms.EncapsulatedContentInfo&&(this.dSignedAttrs.add(new n.ContentType({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new n.MessageDigest({eciObj:t.eciObj,hashAlg:t.hashAlg}))),void 0!==t.sdObj&&t.sdObj instanceof f.asn1.cms.SignedData&&-1==t.sdObj.digestAlgNameList.join(":").indexOf(t.hashAlg)&&t.sdObj.digestAlgNameList.push(t.hashAlg),"string"==typeof t.hashAlg&&(this.dDigestAlgorithm=new r.AlgorithmIdentifier({name:t.hashAlg})))},this.sign=function(t,n){this.dSigAlg=new r.AlgorithmIdentifier({name:n});var i=this.dSignedAttrs.getEncodedHex(),s=Rt.getKey(t),o=new f.crypto.Signature({alg:n});o.init(s),o.updateHex(i);var a=o.sign();this.dSig=new e.DEROctetString({hex:a})},this.addUnsigned=function(t){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(t)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof f.asn1.cms.AttributeList&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var t=new e.DERTaggedObject({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),n=null;this.dUnsignedAttrs.length()>0&&(n=new e.DERTaggedObject({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var r=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,t,this.dSigAlg,this.dSig];null!=n&&r.push(n);var i=new e.DERSequence({array:r});return this.hTLV=i.getEncodedHex(),this.hTLV}},c.lang.extend(f.asn1.cms.SignerInfo,f.asn1.ASN1Object),f.asn1.cms.EncapsulatedContentInfo=function(t){f.asn1.cms.EncapsulatedContentInfo.superclass.constructor.call(this);var e=f.asn1;f.asn1.cms,f.asn1.x509;this.dEContentType=new e.DERObjectIdentifier({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(t){t.match(/^[0-2][.][0-9.]+$/)?this.dEContentType=new e.DERObjectIdentifier({oid:t}):this.dEContentType=new e.DERObjectIdentifier({name:t})},this.setContentValue=function(t){void 0!==t&&("string"==typeof t.hex?this.eContentValueHex=t.hex:"string"==typeof t.str&&(this.eContentValueHex=O(t.str)))},this.setContentValueHex=function(t){this.eContentValueHex=t},this.setContentValueStr=function(t){this.eContentValueHex=O(t)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var t=new e.DEROctetString({hex:this.eContentValueHex});this.dEContent=new e.DERTaggedObject({obj:t,tag:"a0",explicit:!0});var n=[this.dEContentType];this.isDetached||n.push(this.dEContent);var r=new e.DERSequence({array:n});return this.hTLV=r.getEncodedHex(),this.hTLV}},c.lang.extend(f.asn1.cms.EncapsulatedContentInfo,f.asn1.ASN1Object),f.asn1.cms.ContentInfo=function(t){f.asn1.cms.ContentInfo.superclass.constructor.call(this);var e=f.asn1,n=(f.asn1.cms,f.asn1.x509);this.dContentType=null,this.dContent=null,this.setContentType=function(t){"string"==typeof t&&(this.dContentType=n.OID.name2obj(t))},this.getEncodedHex=function(){var t=new e.DERTaggedObject({obj:this.dContent,tag:"a0",explicit:!0}),n=new e.DERSequence({array:[this.dContentType,t]});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&(t.type&&this.setContentType(t.type),t.obj&&t.obj instanceof e.ASN1Object&&(this.dContent=t.obj))},c.lang.extend(f.asn1.cms.ContentInfo,f.asn1.ASN1Object),f.asn1.cms.SignedData=function(t){f.asn1.cms.SignedData.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.cms,r=f.asn1.x509;this.dCMSVersion=new e.DERInteger({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new n.EncapsulatedContentInfo,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new n.SignerInfo],this.addCertificatesByPEM=function(t){var n=Rt.getHexFromPEM(t),r=new e.ASN1Object;r.hTLV=n,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var t=[],n=0;n<this.digestAlgNameList.length;n++){var i=this.digestAlgNameList[n],s=new r.AlgorithmIdentifier({name:i});t.push(s)}this.dDigestAlgs=new e.DERSet({array:t})}var o=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var a=new e.DERSet({array:this.certificateList});this.dCerts=new e.DERTaggedObject({obj:a,tag:"a0",explicit:!1})}null!=this.dCerts&&o.push(this.dCerts);var u=new e.DERSet({array:this.signerInfoList});o.push(u);var c=new e.DERSequence({array:o});return this.hTLV=c.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new n.ContentInfo({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){var t=this.getContentInfoEncodedHex();return e.ASN1Util.getPEMStringFromHex(t,"CMS")}},c.lang.extend(f.asn1.cms.SignedData,f.asn1.ASN1Object),f.asn1.cms.CMSUtil=new function(){},f.asn1.cms.CMSUtil.newSignedData=function(t){var e=f.asn1.cms,n=f.asn1.cades,r=new e.SignedData;if(r.dEncapContentInfo.setContentValue(t.content),"object"==typeof t.certs)for(var i=0;i<t.certs.length;i++)r.addCertificatesByPEM(t.certs[i]);r.signerInfoList=[];for(i=0;i<t.signerInfos.length;i++){var s=t.signerInfos[i],o=new e.SignerInfo;for(attrName in o.setSignerIdentifier(s.signerCert),o.setForContentAndHash({sdObj:r,eciObj:r.dEncapContentInfo,hashAlg:s.hashAlg}),s.sAttr){var a=s.sAttr[attrName];if("SigningTime"==attrName){var u=new e.SigningTime(a);o.dSignedAttrs.add(u)}if("SigningCertificate"==attrName){u=new e.SigningCertificate(a);o.dSignedAttrs.add(u)}if("SigningCertificateV2"==attrName){u=new e.SigningCertificateV2(a);o.dSignedAttrs.add(u)}if("SignaturePolicyIdentifier"==attrName){u=new n.SignaturePolicyIdentifier(a);o.dSignedAttrs.add(u)}}o.sign(s.signerPrvKey,s.sigAlg),r.signerInfoList.push(o)}return r},void 0!==f&&f||(f={}),void 0!==f.asn1&&f.asn1||(f.asn1={}),void 0!==f.asn1.cades&&f.asn1.cades||(f.asn1.cades={}),f.asn1.cades.SignaturePolicyIdentifier=function(t){f.asn1.cades.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15";var e=f.asn1,n=f.asn1.cades;if(void 0!==t&&"string"==typeof t.oid&&"object"==typeof t.hash){var r=new e.DERObjectIdentifier({oid:t.oid}),i=new n.OtherHashAlgAndValue(t.hash),s=new e.DERSequence({array:[r,i]});this.valueList=[s]}},c.lang.extend(f.asn1.cades.SignaturePolicyIdentifier,f.asn1.cms.Attribute),f.asn1.cades.OtherHashAlgAndValue=function(t){f.asn1.cades.OtherHashAlgAndValue.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.x509;this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.dAlg,this.dHash]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&"string"==typeof t.alg&&"string"==typeof t.hash&&(this.dAlg=new n.AlgorithmIdentifier({name:t.alg}),this.dHash=new e.DEROctetString({hex:t.hash}))},c.lang.extend(f.asn1.cades.OtherHashAlgAndValue,f.asn1.ASN1Object),f.asn1.cades.SignatureTimeStamp=function(t){f.asn1.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null;var e=f.asn1;if(void 0!==t){if(void 0!==t.res)if("string"==typeof t.res&&t.res.match(/^[0-9A-Fa-f]+$/));else if(!(t.res instanceof f.asn1.ASN1Object))throw"res param shall be ASN1Object or hex string";if(void 0!==t.tst)if("string"==typeof t.tst&&t.tst.match(/^[0-9A-Fa-f]+$/)){var n=new e.ASN1Object;this.tstHex=t.tst,n.hTLV=this.tstHex,n.getEncodedHex(),this.valueList=[n]}else if(!(t.tst instanceof f.asn1.ASN1Object))throw"tst param shall be ASN1Object or hex string"}},c.lang.extend(f.asn1.cades.SignatureTimeStamp,f.asn1.cms.Attribute),f.asn1.cades.CompleteCertificateRefs=function(t){f.asn1.cades.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21";f.asn1;var e=f.asn1.cades;this.setByArray=function(t){this.valueList=[];for(var n=0;n<t.length;n++){var r=new e.OtherCertID(t[n]);this.valueList.push(r)}},void 0!==t&&"object"==typeof t&&"number"==typeof t.length&&this.setByArray(t)},c.lang.extend(f.asn1.cades.CompleteCertificateRefs,f.asn1.cms.Attribute),f.asn1.cades.OtherCertID=function(t){f.asn1.cades.OtherCertID.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.cms,r=f.asn1.cades;this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(t){this.dOtherCertHash=new r.OtherHash(t),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(t))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var t=[this.dOtherCertHash];null!=this.dIssuerSerial&&t.push(this.dIssuerSerial);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),"object"==typeof t&&(!1===t.hasis&&(this.hasIssuerSerial=!1),"string"==typeof t.cert&&this.setByCertPEM(t.cert)))},c.lang.extend(f.asn1.cades.OtherCertID,f.asn1.ASN1Object),f.asn1.cades.OtherHash=function(t){f.asn1.cades.OtherHash.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.cades;if(this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(t){if(-1==t.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var e=Xt.pemToHex(t),r=f.crypto.Util.hashHex(e,this.alg);this.dOtherHash=new n.OtherHashAlgAndValue({alg:this.alg,hash:r})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==t)if("string"==typeof t)if(-1!=t.indexOf("-----BEGIN "))this.setByCertPEM(t);else{if(!t.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new e.DEROctetString({hex:t})}else"object"==typeof t&&("string"==typeof t.cert?("string"==typeof t.alg&&(this.alg=t.alg),this.setByCertPEM(t.cert)):this.dOtherHash=new n.OtherHashAlgAndValue(t))},c.lang.extend(f.asn1.cades.OtherHash,f.asn1.ASN1Object),f.asn1.cades.CAdESUtil=new function(){},f.asn1.cades.CAdESUtil.addSigTS=function(t,e,n){},f.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=f.asn1,n=f.asn1.cms,r=f.asn1.cades.CAdESUtil,i={};if("06092a864886f70d010702"!=h.getDecendantHexTLVByNthList(t,0,[0]))throw"hex is not CMS SignedData";var s=h.getDecendantIndexByNthList(t,0,[1,0]),o=h.getPosArrayOfChildren_AtObj(t,s);if(o.length<4)throw"num of SignedData elem shall be 4 at least";var a=o.shift();i.version=h.getHexOfTLV_AtObj(t,a);var u=o.shift();i.algs=h.getHexOfTLV_AtObj(t,u);var c=o.shift();i.encapcontent=h.getHexOfTLV_AtObj(t,c),i.certs=null,i.revs=null,i.si=[];var l=o.shift();"a0"==t.substr(l,2)&&(i.certs=h.getHexOfTLV_AtObj(t,l),l=o.shift()),"a1"==t.substr(l,2)&&(i.revs=h.getHexOfTLV_AtObj(t,l),l=o.shift());var d=l;if("31"!=t.substr(d,2))throw"Can't find signerInfos";for(var g=h.getPosArrayOfChildren_AtObj(t,d),p=0;p<g.length;p++){var y=g[p],v=r.parseSignerInfoForAddingUnsigned(t,y,p);i.si[p]=v}var m=null;i.obj=new n.SignedData,(m=new e.ASN1Object).hTLV=i.version,i.obj.dCMSVersion=m,(m=new e.ASN1Object).hTLV=i.algs,i.obj.dDigestAlgs=m,(m=new e.ASN1Object).hTLV=i.encapcontent,i.obj.dEncapContentInfo=m,(m=new e.ASN1Object).hTLV=i.certs,i.obj.dCerts=m,i.obj.signerInfoList=[];for(p=0;p<i.si.length;p++)i.obj.signerInfoList.push(i.si[p].obj);return i},f.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,n){var r=f.asn1,i=f.asn1.cms,s={},o=h.getPosArrayOfChildren_AtObj(t,e);if(6!=o.length)throw"not supported items for SignerInfo (!=6)";var a=o.shift();s.version=h.getHexOfTLV_AtObj(t,a);var u=o.shift();s.si=h.getHexOfTLV_AtObj(t,u);var c=o.shift();s.digalg=h.getHexOfTLV_AtObj(t,c);var l=o.shift();s.sattrs=h.getHexOfTLV_AtObj(t,l);var d=o.shift();s.sigalg=h.getHexOfTLV_AtObj(t,d);var g=o.shift();s.sig=h.getHexOfTLV_AtObj(t,g),s.sigval=h.getHexOfV_AtObj(t,g);var p=null;return s.obj=new i.SignerInfo,(p=new r.ASN1Object).hTLV=s.version,s.obj.dCMSVersion=p,(p=new r.ASN1Object).hTLV=s.si,s.obj.dSignerIdentifier=p,(p=new r.ASN1Object).hTLV=s.digalg,s.obj.dDigestAlgorithm=p,(p=new r.ASN1Object).hTLV=s.sattrs,s.obj.dSignedAttrs=p,(p=new r.ASN1Object).hTLV=s.sigalg,s.obj.dSigAlg=p,(p=new r.ASN1Object).hTLV=s.sig,s.obj.dSig=p,s.obj.dUnsignedAttrs=new i.AttributeList,s},void 0!==f.asn1.csr&&f.asn1.csr||(f.asn1.csr={}),f.asn1.csr.CertificationRequest=function(t){f.asn1.csr.CertificationRequest.superclass.constructor.call(this);this.sign=function(t,e){null==this.prvKey&&(this.prvKey=e),this.asn1SignatureAlg=new f.asn1.x509.AlgorithmIdentifier({name:t}),sig=new f.crypto.Signature({alg:t}),sig.initSign(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new f.asn1.DERBitString({hex:"00"+this.hexSig});var n=new f.asn1.DERSequence({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=n.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return f.asn1.ASN1Util.getPEMStringFromHex(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==t&&void 0!==t.csrinfo&&(this.asn1CSRInfo=t.csrinfo)},c.lang.extend(f.asn1.csr.CertificationRequest,f.asn1.ASN1Object),f.asn1.csr.CertificationRequestInfo=function(t){f.asn1.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new f.asn1.DERInteger({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(t){this.asn1Subject=new f.asn1.x509.X500Name(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=Rt.getKey(t);this.asn1SubjPKey=new f.asn1.x509.SubjectPublicKeyInfo(e)},this.appendExtensionByName=function(t,e){f.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new f.asn1.DERSequence({array:this.extensionsArray}),e=new f.asn1.DERSet({array:[t]}),n=new f.asn1.DERSequence({array:[new f.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.9.14"}),e]}),r=new f.asn1.DERTaggedObject({explicit:!0,tag:"a0",obj:n});this.asn1Array.push(r)}else{r=new f.asn1.DERTaggedObject({explicit:!1,tag:"a0",obj:new f.asn1.DERNull});this.asn1Array.push(r)}var i=new f.asn1.DERSequence({array:this.asn1Array});return this.hTLV=i.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},c.lang.extend(f.asn1.csr.CertificationRequestInfo,f.asn1.ASN1Object),f.asn1.csr.CSRUtil=new function(){},f.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=f.asn1.csr;if(void 0===t.subject)throw"parameter subject undefined";if(void 0===t.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===t.sigalg)throw"parameter sigalg undefined";if(void 0===t.sbjprvkey)throw"parameter sbjpubkey undefined";var n=new e.CertificationRequestInfo;if(n.setSubjectByParam(t.subject),n.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var r=0;r<t.ext.length;r++)for(key in t.ext[r])n.appendExtensionByName(key,t.ext[r][key]);var i=new e.CertificationRequest({csrinfo:n}),s=Rt.getKey(t.sbjprvkey);return i.sign(t.sigalg,s),i.getPEMString()},f.asn1.csr.CSRUtil.getInfo=function(t){var e={subject:{},pubkey:{}};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var n=Rt.getHexFromPEM(t,"CERTIFICATE REQUEST");return e.subject.hex=h.getDecendantHexTLVByNthList(n,0,[0,1]),e.subject.name=Xt.hex2dn(e.subject.hex),e.pubkey.hex=h.getDecendantHexTLVByNthList(n,0,[0,2]),e.pubkey.obj=Rt.getKey(e.pubkey.hex,null,"pkcs8pub"),e};var h=new function(){};h.getByteLengthOfL_AtObj=function(t,e){if("8"!=t.substring(e+2,e+3))return 1;var n=parseInt(t.substring(e+3,e+4));return 0==n?-1:0<n&&n<10?n+1:-2},h.getHexOfL_AtObj=function(t,e){var n=h.getByteLengthOfL_AtObj(t,e);return n<1?"":t.substring(e+2,e+2+2*n)},h.getIntOfL_AtObj=function(t,e){var n=h.getHexOfL_AtObj(t,e);return""==n?-1:(parseInt(n.substring(0,1))<8?new rt(n,16):new rt(n.substring(2),16)).intValue()},h.getStartPosOfV_AtObj=function(t,e){var n=h.getByteLengthOfL_AtObj(t,e);return n<0?n:e+2*(n+1)},h.getHexOfV_AtObj=function(t,e){var n=h.getStartPosOfV_AtObj(t,e),r=h.getIntOfL_AtObj(t,e);return t.substring(n,n+2*r)},h.getHexOfTLV_AtObj=function(t,e){return t.substr(e,2)+h.getHexOfL_AtObj(t,e)+h.getHexOfV_AtObj(t,e)},h.getPosOfNextSibling_AtObj=function(t,e){return h.getStartPosOfV_AtObj(t,e)+2*h.getIntOfL_AtObj(t,e)},h.getPosArrayOfChildren_AtObj=function(t,e){var n=new Array,r=h.getStartPosOfV_AtObj(t,e);"03"==t.substr(e,2)?n.push(r+2):n.push(r);for(var i=h.getIntOfL_AtObj(t,e),s=r,o=0;;){var a=h.getPosOfNextSibling_AtObj(t,s);if(null==a||a-r>=2*i)break;if(o>=200)break;n.push(a),s=a,o++}return n},h.getNthChildIndex_AtObj=function(t,e,n){return h.getPosArrayOfChildren_AtObj(t,e)[n]},h.getDecendantIndexByNthList=function(t,e,n){if(0==n.length)return e;var r=n.shift(),i=h.getPosArrayOfChildren_AtObj(t,e);return h.getDecendantIndexByNthList(t,i[r],n)},h.getDecendantHexTLVByNthList=function(t,e,n){var r=h.getDecendantIndexByNthList(t,e,n);return h.getHexOfTLV_AtObj(t,r)},h.getDecendantHexVByNthList=function(t,e,n){var r=h.getDecendantIndexByNthList(t,e,n);return h.getHexOfV_AtObj(t,r)},h.getVbyList=function(t,e,n,r){var i=h.getDecendantIndexByNthList(t,e,n);if(void 0===i)throw"can't find nthList object";if(void 0!==r&&t.substr(i,2)!=r)throw"checking tag doesn't match: "+t.substr(i,2)+"!="+r;return h.getHexOfV_AtObj(t,i)},h.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},n=[],r=t.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var s=t.substr(2),o=[],a=0;a<s.length/2;a++)o.push(parseInt(s.substr(2*a,2),16));var u=[],c="";for(a=0;a<o.length;a++)128&o[a]?c+=e((127&o[a]).toString(2),7):(c+=e((127&o[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var h=n.join(".");return u.length>0&&(h=h+"."+u.join(".")),h},h.dump=function(t,e,n,r){var i=t;t instanceof f.asn1.ASN1Object&&(i=t.getEncodedHex());var s=function(t,e){return t.length<=2*e?t:t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e)};void 0===e&&(e={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var o=e.ommit_long_octet;if("01"==i.substr(n,2))return"00"==(a=h.getHexOfV_AtObj(i,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==i.substr(n,2))return r+"INTEGER "+s(a=h.getHexOfV_AtObj(i,n),o)+"\n";if("03"==i.substr(n,2))return r+"BITSTRING "+s(a=h.getHexOfV_AtObj(i,n),o)+"\n";if("04"==i.substr(n,2)){var a=h.getHexOfV_AtObj(i,n);if(h.isASN1HEX(a)){var u=r+"OCTETSTRING, encapsulates\n";return u+=h.dump(a,e,0,r+"  ")}return r+"OCTETSTRING "+s(a,o)+"\n"}if("05"==i.substr(n,2))return r+"NULL\n";if("06"==i.substr(n,2)){var c=h.getHexOfV_AtObj(i,n),l=f.asn1.ASN1Util.oidHexToInt(c),d=f.asn1.x509.OID.oid2name(l),g=l.replace(/\./g," ");return""!=d?r+"ObjectIdentifier "+d+" ("+g+")\n":r+"ObjectIdentifier ("+g+")\n"}if("0c"==i.substr(n,2))return r+"UTF8String '"+P(h.getHexOfV_AtObj(i,n))+"'\n";if("13"==i.substr(n,2))return r+"PrintableString '"+P(h.getHexOfV_AtObj(i,n))+"'\n";if("14"==i.substr(n,2))return r+"TeletexString '"+P(h.getHexOfV_AtObj(i,n))+"'\n";if("16"==i.substr(n,2))return r+"IA5String '"+P(h.getHexOfV_AtObj(i,n))+"'\n";if("17"==i.substr(n,2))return r+"UTCTime "+P(h.getHexOfV_AtObj(i,n))+"\n";if("18"==i.substr(n,2))return r+"GeneralizedTime "+P(h.getHexOfV_AtObj(i,n))+"\n";if("30"==i.substr(n,2)){if("3000"==i.substr(n,4))return r+"SEQUENCE {}\n";u=r+"SEQUENCE\n";var p=e;if((2==(S=h.getPosArrayOfChildren_AtObj(i,n)).length||3==S.length)&&"06"==i.substr(S[0],2)&&"04"==i.substr(S[S.length-1],2)){var y=h.getHexOfV_AtObj(i,S[0]),v=(l=f.asn1.ASN1Util.oidHexToInt(y),d=f.asn1.x509.OID.oid2name(l),JSON.parse(JSON.stringify(e)));v.x509ExtName=d,p=v}for(var m=0;m<S.length;m++)u+=h.dump(i,p,S[m],r+"  ");return u}if("31"==i.substr(n,2)){u=r+"SET\n";var S=h.getPosArrayOfChildren_AtObj(i,n);for(m=0;m<S.length;m++)u+=h.dump(i,e,S[m],r+"  ");return u}var x=parseInt(i.substr(n,2),16);if(0!=(128&x)){var b=31&x;if(0!=(32&x)){var u=r+"["+b+"]\n";for(S=h.getPosArrayOfChildren_AtObj(i,n),m=0;m<S.length;m++)u+=h.dump(i,e,S[m],r+"  ");return u}return"68747470"==(a=h.getHexOfV_AtObj(i,n)).substr(0,8)&&(a=P(a)),"subjectAltName"===e.x509ExtName&&2==b&&(a=P(a)),u=r+"["+b+"] "+a+"\n"}return r+"UNKNOWN("+i.substr(n,2)+") "+h.getHexOfV_AtObj(i,n)+"\n"},h.isASN1HEX=function(t){if(t.length%2==1)return!1;var e=h.getIntOfL_AtObj(t,0),n=t.substr(0,2),r=h.getHexOfL_AtObj(t,0);return t.length-n.length-r.length==2*e},void 0!==f&&f||(f={}),void 0!==f.asn1&&f.asn1||(f.asn1={}),void 0!==f.asn1.ocsp&&f.asn1.ocsp||(f.asn1.ocsp={}),f.asn1.ocsp.DEFAULT_HASH="sha1",f.asn1.ocsp.CertID=function(t){f.asn1.ocsp.CertID.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.x509;if(this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(t,r,i,s){void 0===s&&(s=f.asn1.ocsp.DEFAULT_HASH),this.dHashAlg=new n.AlgorithmIdentifier({name:s}),this.dIssuerNameHash=new e.DEROctetString({hex:t}),this.dIssuerKeyHash=new e.DEROctetString({hex:r}),this.dSerialNumber=new e.DERInteger({hex:i})},this.setByCert=function(t,e,n){void 0===n&&(n=f.asn1.ocsp.DEFAULT_HASH);var r=new Xt;r.readCertPEM(e);var i=new Xt;i.readCertPEM(t);var s=Xt.getPublicKeyInfoPropOfCertPEM(t).keyhex,o=r.getSerialNumberHex(),a=f.crypto.Util.hashHex(i.getSubjectHex(),n),u=f.crypto.Util.hashHex(s,n);this.setByValue(a,u,o,n),this.hoge=r.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var t=[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber],n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t){var r=t;if(void 0!==r.issuerCert&&void 0!==r.subjectCert){var i=f.asn1.ocsp.DEFAULT_HASH;void 0===r.alg&&(i=void 0),this.setByCert(r.issuerCert,r.subjectCert,i)}else{if(void 0===r.namehash||void 0===r.keyhash||void 0===r.serial)throw"invalid constructor arguments";i=f.asn1.ocsp.DEFAULT_HASH;void 0===r.alg&&(i=void 0),this.setByValue(r.namehash,r.keyhash,r.serial,i)}}},c.lang.extend(f.asn1.ocsp.CertID,f.asn1.ASN1Object),f.asn1.ocsp.Request=function(t){if(f.asn1.ocsp.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new f.asn1.DERSequence({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var e=new f.asn1.ocsp.CertID(t);this.dReqCert=e}},c.lang.extend(f.asn1.ocsp.Request,f.asn1.ASN1Object),f.asn1.ocsp.TBSRequest=function(t){f.asn1.ocsp.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],n=0;n<t.length;n++){var r=new f.asn1.ocsp.Request(t[0]);e.push(r)}this.dRequestList=e},this.getEncodedHex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new f.asn1.DERSequence({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var n=new f.asn1.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},c.lang.extend(f.asn1.ocsp.TBSRequest,f.asn1.ASN1Object),f.asn1.ocsp.OCSPRequest=function(t){if(f.asn1.ocsp.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new f.asn1.DERSequence({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList){var e=new f.asn1.ocsp.TBSRequest(t);this.dTbsRequest=e}},c.lang.extend(f.asn1.ocsp.OCSPRequest,f.asn1.ASN1Object),f.asn1.ocsp.OCSPUtil={},f.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,n){void 0===n&&(n=f.asn1.ocsp.DEFAULT_HASH);var r={alg:n,issuerCert:t,subjectCert:e};return new f.asn1.ocsp.OCSPRequest({reqList:[r]}).getEncodedHex()},f.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e={};try{var n=h.getVbyList(t,0,[0],"0a");e.responseStatus=parseInt(n,16)}catch(t){}if(0!==e.responseStatus)return e;try{var r=h.getDecendantIndexByNthList(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(r,2)?e.certStatus="good":"a1"===t.substr(r,2)?(e.certStatus="revoked",e.revocationTime=P(h.getDecendantHexVByNthList(t,r,[0]))):"82"===t.substr(r,2)&&(e.certStatus="unknown")}catch(t){}try{var i=h.getDecendantIndexByNthList(t,0,[1,0,1,0,0,2,0,2]);e.thisUpdate=P(h.getHexOfV_AtObj(t,i))}catch(t){}try{var s=h.getDecendantIndexByNthList(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(s,2)&&(e.nextUpdate=P(h.getDecendantHexVByNthList(t,s,[0])))}catch(t){}return e},void 0!==f&&f||(f={}),void 0!==f.asn1&&f.asn1||(f.asn1={}),void 0!==f.asn1.tsp&&f.asn1.tsp||(f.asn1.tsp={}),f.asn1.tsp.Accuracy=function(t){f.asn1.tsp.Accuracy.superclass.constructor.call(this);var e=f.asn1;this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var t=null,n=null,r=null,i=[];if(null!=this.seconds&&(t=new e.DERInteger({int:this.seconds}),i.push(t)),null!=this.millis){var s=new e.DERInteger({int:this.millis});n=new e.DERTaggedObject({obj:s,tag:"80",explicit:!1}),i.push(n)}if(null!=this.micros){var o=new e.DERInteger({int:this.micros});r=new e.DERTaggedObject({obj:o,tag:"81",explicit:!1}),i.push(r)}var a=new e.DERSequence({array:i});return this.hTLV=a.getEncodedHex(),this.hTLV},void 0!==t&&("number"==typeof t.seconds&&(this.seconds=t.seconds),"number"==typeof t.millis&&(this.millis=t.millis),"number"==typeof t.micros&&(this.micros=t.micros))},c.lang.extend(f.asn1.tsp.Accuracy,f.asn1.ASN1Object),f.asn1.tsp.MessageImprint=function(t){f.asn1.tsp.MessageImprint.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.x509;this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new e.DERSequence({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==t&&("string"==typeof t.hashAlg&&(this.dHashAlg=new n.AlgorithmIdentifier({name:t.hashAlg})),"string"==typeof t.hashValue&&(this.dHashValue=new e.DEROctetString({hex:t.hashValue})))},c.lang.extend(f.asn1.tsp.MessageImprint,f.asn1.ASN1Object),f.asn1.tsp.TimeStampReq=function(t){f.asn1.tsp.TimeStampReq.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.tsp;this.dVersion=new e.DERInteger({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(t){t instanceof f.asn1.tsp.MessageImprint?this.dMessageImprint=t:"object"==typeof t&&(this.dMessageImprint=new n.MessageImprint(t))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var t=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&t.push(this.dPolicy),null!=this.dNonce&&t.push(this.dNonce),this.certReq&&t.push(new e.DERBoolean);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.mi&&this.setMessageImprint(t.mi),"object"==typeof t.policy&&(this.dPolicy=new e.DERObjectIdentifier(t.policy)),"object"==typeof t.nonce&&(this.dNonce=new e.DERInteger(t.nonce)),"boolean"==typeof t.certreq&&(this.certReq=t.certreq))},c.lang.extend(f.asn1.tsp.TimeStampReq,f.asn1.ASN1Object),f.asn1.tsp.TSTInfo=function(t){f.asn1.tsp.TSTInfo.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.x509,r=f.asn1.tsp;if(this.dVersion=new e.DERInteger({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(t.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(t.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(t.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new e.DERObjectIdentifier({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new r.MessageImprint(t.messageImprint)),void 0!==t.serialNumber&&(this.dSerialNumber=new e.DERInteger(t.serialNumber)),void 0!==t.genTime&&(this.dGenTime=new e.DERGeneralizedTime(t.genTime)),"undefind"!=typeof t.accuracy&&(this.dAccuracy=new r.Accuracy(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new e.DERBoolean),void 0!==t.nonce&&(this.dNonce=new e.DERInteger(t.nonce)),void 0!==t.tsa&&(this.dTsa=new n.X500Name(t.tsa))}},c.lang.extend(f.asn1.tsp.TSTInfo,f.asn1.ASN1Object),f.asn1.tsp.TimeStampResp=function(t){f.asn1.tsp.TimeStampResp.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.tsp;this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dTST&&t.push(this.dTST);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new n.PKIStatusInfo(t.status)),void 0!==t.tst&&t.tst instanceof f.asn1.ASN1Object&&(this.dTST=t.tst.getContentInfo()))},c.lang.extend(f.asn1.tsp.TimeStampResp,f.asn1.ASN1Object),f.asn1.tsp.PKIStatusInfo=function(t){f.asn1.tsp.PKIStatusInfo.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.tsp;this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dStatusString&&t.push(this.dStatusString),null!=this.dFailureInfo&&t.push(this.dFailureInfo);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new n.PKIStatus(t.status)),"object"==typeof t.statstr&&(this.dStatusString=new n.PKIFreeText({array:t.statstr})),"object"==typeof t.failinfo&&(this.dFailureInfo=new n.PKIFailureInfo(t.failinfo)))},c.lang.extend(f.asn1.tsp.PKIStatusInfo,f.asn1.ASN1Object),f.asn1.tsp.PKIStatus=function(t){f.asn1.tsp.PKIStatus.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.tsp;if(this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==t)if(void 0!==t.name){var r=n.PKIStatus.valueList;if(void 0===r[t.name])throw"name undefined: "+t.name;this.dStatus=new e.DERInteger({int:r[t.name]})}else this.dStatus=new e.DERInteger(t)},c.lang.extend(f.asn1.tsp.PKIStatus,f.asn1.ASN1Object),f.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},f.asn1.tsp.PKIFreeText=function(t){f.asn1.tsp.PKIFreeText.superclass.constructor.call(this);var e=f.asn1;this.textList=[],this.getEncodedHex=function(){for(var t=[],n=0;n<this.textList.length;n++)t.push(new e.DERUTF8String({str:this.textList[n]}));var r=new e.DERSequence({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==t&&"object"==typeof t.array&&(this.textList=t.array)},c.lang.extend(f.asn1.tsp.PKIFreeText,f.asn1.ASN1Object),f.asn1.tsp.PKIFailureInfo=function(t){f.asn1.tsp.PKIFailureInfo.superclass.constructor.call(this);var e=f.asn1,n=f.asn1.tsp;if(this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var t=new Number(this.value).toString(2),n=new e.DERBitString;return n.setByBinaryString(t),this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t)if("string"==typeof t.name){var r=n.PKIFailureInfo.valueList;if(void 0===r[t.name])throw"name undefined: "+t.name;this.value=r[t.name]}else"number"==typeof t.int&&(this.value=t.int)},c.lang.extend(f.asn1.tsp.PKIFailureInfo,f.asn1.ASN1Object),f.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},f.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(t,e){throw"not implemented yet"}},f.asn1.tsp.SimpleTSAAdapter=function(t){f.asn1.tsp.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,e){var n=f.crypto.Util.hashHex(t,e);this.params.tstInfo.messageImprint={hashAlg:e,hashValue:n},this.params.tstInfo.serialNumber={int:this.serial++};var r=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:r},f.asn1.tsp.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},c.lang.extend(f.asn1.tsp.SimpleTSAAdapter,f.asn1.tsp.AbstractTSAAdapter),f.asn1.tsp.FixedTSAAdapter=function(t){f.asn1.tsp.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,e){var n=f.crypto.Util.hashHex(t,e);return this.params.tstInfo.messageImprint={hashAlg:e,hashValue:n},f.asn1.tsp.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},c.lang.extend(f.asn1.tsp.FixedTSAAdapter,f.asn1.tsp.AbstractTSAAdapter),f.asn1.tsp.TSPUtil=new function(){},f.asn1.tsp.TSPUtil.newTimeStampToken=function(t){var e=f.asn1.cms,n=f.asn1.tsp,r=new e.SignedData,i=new n.TSTInfo(t.tstInfo).getEncodedHex();if(r.dEncapContentInfo.setContentValue({hex:i}),r.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof t.certs)for(var s=0;s<t.certs.length;s++)r.addCertificatesByPEM(t.certs[s]);var o=r.signerInfoList[0];o.setSignerIdentifier(t.signerCert),o.setForContentAndHash({sdObj:r,eciObj:r.dEncapContentInfo,hashAlg:t.hashAlg});var a=new e.SigningCertificate({array:[t.signerCert]});return o.dSignedAttrs.add(a),o.sign(t.signerPrvKey,t.sigAlg),r},f.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e={certreq:!1},n=h.getPosArrayOfChildren_AtObj(t,0);if(n.length<2)throw"TimeStampReq must have at least 2 items";var r=h.getHexOfTLV_AtObj(t,n[1]);e.mi=f.asn1.tsp.TSPUtil.parseMessageImprint(r);for(var i=2;i<n.length;i++){var s=n[i],o=t.substr(s,2);if("06"==o){var a=h.getHexOfV_AtObj(t,s);e.policy=h.hextooidstr(a)}"02"==o&&(e.nonce=h.getHexOfV_AtObj(t,s)),"01"==o&&(e.certreq=!0)}return e},f.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e={};if("30"!=t.substr(0,2))throw"head of messageImprint hex shall be '30'";h.getPosArrayOfChildren_AtObj(t,0);var n=h.getDecendantIndexByNthList(t,0,[0,0]),r=h.getHexOfV_AtObj(t,n),i=h.hextooidstr(r),s=f.asn1.x509.OID.oid2name(i);if(""==s)throw"hashAlg name undefined: "+i;var o=s,a=h.getDecendantIndexByNthList(t,0,[1]);return e.hashAlg=o,e.hashValue=h.getHexOfV_AtObj(t,a),e},void 0!==f&&f||(f={}),void 0!==f.asn1&&f.asn1||(f.asn1={}),void 0!==f.asn1.x509&&f.asn1.x509||(f.asn1.x509={}),f.asn1.x509.Certificate=function(t){f.asn1.x509.Certificate.superclass.constructor.call(this);this.setRsaPrvKeyByPEMandPass=function(t,e){var n=Bt.getDecryptedKeyHex(t,e),r=new Z;r.readPrivateKeyFromASN1HexString(n),this.prvKey=r},this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,sig=new f.crypto.Signature({alg:"SHA1withRSA"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new f.asn1.DERBitString({hex:"00"+this.hexSig});var t=new f.asn1.DERSequence({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(t){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=t,this.asn1Sig=new f.asn1.DERBitString({hex:"00"+this.hexSig});var e=new f.asn1.DERSequence({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){var t=this.getEncodedHex(),e=u.enc.Hex.parse(t);return"-----BEGIN CERTIFICATE-----\r\n"+u.enc.Base64.stringify(e).replace(/(.{64})/g,"$1\r\n")+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==t&&(void 0!==t.tbscertobj&&(this.asn1TBSCert=t.tbscertobj),void 0!==t.prvkeyobj?this.prvKey=t.prvkeyobj:void 0!==t.rsaprvkey?this.prvKey=t.rsaprvkey:void 0!==t.rsaprvpem&&void 0!==t.rsaprvpas&&this.setRsaPrvKeyByPEMandPass(t.rsaprvpem,t.rsaprvpas))},c.lang.extend(f.asn1.x509.Certificate,f.asn1.ASN1Object),f.asn1.x509.TBSCertificate=function(t){f.asn1.x509.TBSCertificate.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new f.asn1.DERTaggedObject({obj:new f.asn1.DERInteger({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(t){this.asn1SerialNumber=new f.asn1.DERInteger(t)},this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new f.asn1.x509.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new f.asn1.x509.X500Name(t)},this.setNotBeforeByParam=function(t){this.asn1NotBefore=new f.asn1.x509.Time(t)},this.setNotAfterByParam=function(t){this.asn1NotAfter=new f.asn1.x509.Time(t)},this.setSubjectByParam=function(t){this.asn1Subject=new f.asn1.x509.X500Name(t)},this.setSubjectPublicKeyByParam=function(t){this.asn1SubjPKey=new f.asn1.x509.SubjectPublicKeyInfo(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=Rt.getKey(t);this.asn1SubjPKey=new f.asn1.x509.SubjectPublicKeyInfo(e)},this.appendExtension=function(t){this.extensionsArray.push(t)},this.appendExtensionByName=function(t,e){f.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var t=new f.asn1.DERSequence({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(t),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new f.asn1.DERSequence({array:this.extensionsArray}),n=new f.asn1.DERTaggedObject({explicit:!0,tag:"a3",obj:e});this.asn1Array.push(n)}var r=new f.asn1.DERSequence({array:this.asn1Array});return this.hTLV=r.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},c.lang.extend(f.asn1.x509.TBSCertificate,f.asn1.ASN1Object),f.asn1.x509.Extension=function(t){f.asn1.x509.Extension.superclass.constructor.call(this);this.getEncodedHex=function(){var t=new f.asn1.DERObjectIdentifier({oid:this.oid}),e=new f.asn1.DEROctetString({hex:this.getExtnValueHex()}),n=new Array;return n.push(t),this.critical&&n.push(new f.asn1.DERBoolean),n.push(e),new f.asn1.DERSequence({array:n}).getEncodedHex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},c.lang.extend(f.asn1.x509.Extension,f.asn1.ASN1Object),f.asn1.x509.Extension.appendByNameToArray=function(t,e,n){if("basicconstraints"==t.toLowerCase()){var r=new f.asn1.x509.BasicConstraints(e);n.push(r)}else if("keyusage"==t.toLowerCase()){r=new f.asn1.x509.KeyUsage(e);n.push(r)}else if("crldistributionpoints"==t.toLowerCase()){r=new f.asn1.x509.CRLDistributionPoints(e);n.push(r)}else if("extkeyusage"==t.toLowerCase()){r=new f.asn1.x509.ExtKeyUsage(e);n.push(r)}else if("authoritykeyidentifier"==t.toLowerCase()){r=new f.asn1.x509.AuthorityKeyIdentifier(e);n.push(r)}else if("authorityinfoaccess"==t.toLowerCase()){r=new f.asn1.x509.AuthorityInfoAccess(e);n.push(r)}else if("subjectaltname"==t.toLowerCase()){r=new f.asn1.x509.SubjectAltName(e);n.push(r)}else{if("issueraltname"!=t.toLowerCase())throw"unsupported extension name: "+t;r=new f.asn1.x509.IssuerAltName(e);n.push(r)}},f.asn1.x509.KeyUsage=function(t){f.asn1.x509.KeyUsage.superclass.constructor.call(this,t),this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==t&&void 0!==t.bin&&(this.asn1ExtnValue=new f.asn1.DERBitString(t))},c.lang.extend(f.asn1.x509.KeyUsage,f.asn1.x509.Extension),f.asn1.x509.BasicConstraints=function(t){f.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new f.asn1.DERBoolean),this.pathLen>-1&&t.push(new f.asn1.DERInteger({int:this.pathLen}));var e=new f.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},c.lang.extend(f.asn1.x509.BasicConstraints,f.asn1.x509.Extension),f.asn1.x509.CRLDistributionPoints=function(t){f.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t),this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(t){this.asn1ExtnValue=new f.asn1.DERSequence({array:t})},this.setByOneURI=function(t){var e=new f.asn1.x509.GeneralNames([{uri:t}]),n=new f.asn1.x509.DistributionPointName(e),r=new f.asn1.x509.DistributionPoint({dpobj:n});this.setByDPArray([r])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},c.lang.extend(f.asn1.x509.CRLDistributionPoints,f.asn1.x509.Extension),f.asn1.x509.ExtKeyUsage=function(t){f.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t),this.setPurposeArray=function(t){this.asn1ExtnValue=new f.asn1.DERSequence;for(var e=0;e<t.length;e++){var n=new f.asn1.DERObjectIdentifier(t[e]);this.asn1ExtnValue.appendASN1Object(n)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},c.lang.extend(f.asn1.x509.ExtKeyUsage,f.asn1.x509.Extension),f.asn1.x509.AuthorityKeyIdentifier=function(t){f.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t),this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new f.asn1.DERTaggedObject({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new f.asn1.DERTaggedObject({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&t.push(new f.asn1.DERTaggedObject({explicit:!1,tag:"82",obj:this.asn1CertSN}));var e=new f.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(t){this.asn1KID=new f.asn1.DEROctetString(t)},this.setCertIssuerByParam=function(t){this.asn1CertIssuer=new f.asn1.x509.X500Name(t)},this.setCertSNByParam=function(t){this.asn1CertSN=new f.asn1.DERInteger(t)},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn))},c.lang.extend(f.asn1.x509.AuthorityKeyIdentifier,f.asn1.x509.Extension),f.asn1.x509.AuthorityInfoAccess=function(t){f.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,n=0;n<t.length;n++){var r=new f.asn1.DERObjectIdentifier(t[n].accessMethod),i=new f.asn1.x509.GeneralName(t[n].accessLocation),s=new f.asn1.DERSequence({array:[r,i]});e.push(s)}this.asn1ExtnValue=new f.asn1.DERSequence({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},c.lang.extend(f.asn1.x509.AuthorityInfoAccess,f.asn1.x509.Extension),f.asn1.x509.SubjectAltName=function(t){f.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new f.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},c.lang.extend(f.asn1.x509.SubjectAltName,f.asn1.x509.Extension),f.asn1.x509.IssuerAltName=function(t){f.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new f.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},c.lang.extend(f.asn1.x509.IssuerAltName,f.asn1.x509.Extension),f.asn1.x509.CRL=function(t){f.asn1.x509.CRL.superclass.constructor.call(this);this.setRsaPrvKeyByPEMandPass=function(t,e){var n=Bt.getDecryptedKeyHex(t,e),r=new Z;r.readPrivateKeyFromASN1HexString(n),this.rsaPrvKey=r},this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new f.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.initSign(this.rsaPrvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new f.asn1.DERBitString({hex:"00"+this.hexSig});var t=new f.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){var t=this.getEncodedHex(),e=u.enc.Hex.parse(t);return"-----BEGIN X509 CRL-----\r\n"+u.enc.Base64.stringify(e).replace(/(.{64})/g,"$1\r\n")+"\r\n-----END X509 CRL-----\r\n"},void 0!==t&&(void 0!==t.tbsobj&&(this.asn1TBSCertList=t.tbsobj),void 0!==t.rsaprvkey&&(this.rsaPrvKey=t.rsaprvkey),void 0!==t.rsaprvpem&&void 0!==t.rsaprvpas&&this.setRsaPrvKeyByPEMandPass(t.rsaprvpem,t.rsaprvpas))},c.lang.extend(f.asn1.x509.CRL,f.asn1.ASN1Object),f.asn1.x509.TBSCertList=function(t){f.asn1.x509.TBSCertList.superclass.constructor.call(this);this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new f.asn1.x509.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new f.asn1.x509.X500Name(t)},this.setThisUpdateByParam=function(t){this.asn1ThisUpdate=new f.asn1.x509.Time(t)},this.setNextUpdateByParam=function(t){this.asn1NextUpdate=new f.asn1.x509.Time(t)},this.addRevokedCert=function(t,e){var n={};null!=t&&null!=t&&(n.sn=t),null!=e&&null!=e&&(n.time=e);var r=new f.asn1.x509.CRLEntry(n);this.aRevokedCert.push(r)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var t=new f.asn1.DERSequence({array:this.aRevokedCert});this.asn1Array.push(t)}var e=new f.asn1.DERSequence({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},c.lang.extend(f.asn1.x509.TBSCertList,f.asn1.ASN1Object),f.asn1.x509.CRLEntry=function(t){f.asn1.x509.CRLEntry.superclass.constructor.call(this);this.setCertSerial=function(t){this.sn=new f.asn1.DERInteger(t)},this.setRevocationDate=function(t){this.time=new f.asn1.x509.Time(t)},this.getEncodedHex=function(){var t=new f.asn1.DERSequence({array:[this.sn,this.time]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},c.lang.extend(f.asn1.x509.CRLEntry,f.asn1.ASN1Object),f.asn1.x509.X500Name=function(t){if(f.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array,this.setByString=function(t){var e=t.split("/");e.shift();for(var n=0;n<e.length;n++)this.asn1Array.push(new f.asn1.x509.RDN({str:e[n]}))},this.setByLdapString=function(t){var e=f.asn1.x509.X500Name.ldapToOneline(t);this.setByString(e)},this.setByObject=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=new f.asn1.x509.RDN({str:e+"="+t[e]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new f.asn1.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t){var e;if(void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):"object"==typeof t&&this.setByObject(t),void 0!==t.certissuer)(e=new Xt).hex=Xt.pemToHex(t.certissuer),this.hTLV=e.getIssuerHex();if(void 0!==t.certsubject)(e=new Xt).hex=Xt.pemToHex(t.certsubject),this.hTLV=e.getSubjectHex()}},c.lang.extend(f.asn1.x509.X500Name,f.asn1.ASN1Object),f.asn1.x509.X500Name.onelineToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),(e=e.map((function(t){return t.replace(/,/,"\\,")}))).join(",")},f.asn1.x509.X500Name.ldapToOneline=function(t){for(var e=t.split(","),n=!1,r=[],i=0;e.length>0;i++){var s=e.shift();if(!0===n){var o=(r.pop()+","+s).replace(/\\,/g,",");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}return(r=r.map((function(t){return t.replace("/","\\/")}))).reverse(),"/"+r.join("/")},f.asn1.x509.RDN=function(t){f.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(t){this.asn1Array.push(new f.asn1.x509.AttributeTypeAndValue({str:t}))},this.addByMultiValuedString=function(t){for(var e=f.asn1.x509.RDN.parseString(t),n=0;n<e.length;n++)this.addByString(e[n])},this.getEncodedHex=function(){var t=new f.asn1.DERSet({array:this.asn1Array});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.addByMultiValuedString(t.str)},c.lang.extend(f.asn1.x509.RDN,f.asn1.ASN1Object),f.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),n=!1,r=[],i=0;e.length>0;i++){var s=e.shift();if(!0===n){var o=(r.pop()+"+"+s).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}var a=!1,u=[];for(i=0;r.length>0;i++){s=r.shift();if(!0===a){var c=u.pop();if(s.match(/"$/)){o=(c+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");u.push(o),a=!1}else u.push(c+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(a=!0)}return u},f.asn1.x509.AttributeTypeAndValue=function(t){f.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);this.setByString=function(t){var e=t.match(/^([^=]+)=(.+)$/);if(!e)throw"malformed attrTypeAndValueStr: "+t;this.setByAttrTypeAndValueStr(e[1],e[2])},this.setByAttrTypeAndValueStr=function(t,e){this.typeObj=f.asn1.x509.OID.atype2obj(t);var n="utf8";"C"==t&&(n="prn"),this.valueObj=this.getValueObj(n,e)},this.getValueObj=function(t,e){if("utf8"==t)return new f.asn1.DERUTF8String({str:e});if("prn"==t)return new f.asn1.DERPrintableString({str:e});if("tel"==t)return new f.asn1.DERTeletexString({str:e});if("ia5"==t)return new f.asn1.DERIA5String({str:e});throw"unsupported directory string type: type="+t+" value="+e},this.getEncodedHex=function(){var t=new f.asn1.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.setByString(t.str)},c.lang.extend(f.asn1.x509.AttributeTypeAndValue,f.asn1.ASN1Object),f.asn1.x509.SubjectPublicKeyInfo=function(t){f.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);this.setRSAKey=function(t){if(!Z.prototype.isPrototypeOf(t))throw"argument is not RSAKey instance";this.rsaKey=t;var e=new f.asn1.DERInteger({bigint:t.n}),n=new f.asn1.DERInteger({int:t.e}),r=new f.asn1.DERSequence({array:[e,n]}).getEncodedHex();this.asn1AlgId=new f.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"}),this.asn1SubjPKey=new f.asn1.DERBitString({hex:"00"+r})},this.setRSAPEM=function(t){if(!t.match(/-----BEGIN PUBLIC KEY-----/))throw"key not supported";var e=t,n=(e=(e=e.replace(/^-----[^-]+-----/,"")).replace(/-----[^-]+-----\s*$/,"")).replace(/\s+/g,""),r=u.enc.Base64.parse(n),i=Nt(u.enc.Hex.stringify(r)),s=Nt(i[1].substr(2)),o=new Z;o.setPublic(s[0],s[1]),this.setRSAKey(o)},this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new f.asn1.DERSequence({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var t=this.getASN1Object();return this.hTLV=t.getEncodedHex(),this.hTLV},this._setRSAKey=function(t){var e=f.asn1.ASN1Util.newObject({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).getEncodedHex();this.asn1AlgId=new f.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"}),this.asn1SubjPKey=new f.asn1.DERBitString({hex:"00"+e})},this._setEC=function(t){var e=new f.asn1.DERObjectIdentifier({name:t.curveName});this.asn1AlgId=new f.asn1.x509.AlgorithmIdentifier({name:"ecPublicKey",asn1params:e}),this.asn1SubjPKey=new f.asn1.DERBitString({hex:"00"+t.pubKeyHex})},this._setDSA=function(t){var e=new f.asn1.ASN1Util.newObject({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]});this.asn1AlgId=new f.asn1.x509.AlgorithmIdentifier({name:"dsa",asn1params:e});var n=new f.asn1.DERInteger({bigint:t.y});this.asn1SubjPKey=new f.asn1.DERBitString({hex:"00"+n.getEncodedHex()})},void 0!==t&&(t instanceof Z?this._setRSAKey(t):void 0!==f.crypto.ECDSA&&t instanceof f.crypto.ECDSA?this._setEC(t):void 0!==f.crypto.DSA&&t instanceof f.crypto.DSA?this._setDSA(t):void 0!==t.rsakey?this.setRSAKey(t.rsakey):void 0!==t.rsapem&&this.setRSAPEM(t.rsapem))},c.lang.extend(f.asn1.x509.SubjectPublicKeyInfo,f.asn1.ASN1Object),f.asn1.x509.Time=function(t){f.asn1.x509.Time.superclass.constructor.call(this);this.setTimeParams=function(t){this.timeParams=t},this.getEncodedHex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new f.asn1.DERUTCTime(this.timeParams):new f.asn1.DERGeneralizedTime(this.timeParams):"utc"==this.type?new f.asn1.DERUTCTime:new f.asn1.DERGeneralizedTime,this.TLV=t.getEncodedHex(),this.TLV},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},c.lang.extend(f.asn1.x509.Time,f.asn1.ASN1Object),f.asn1.x509.AlgorithmIdentifier=function(t){f.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this);this.getEncodedHex=function(){if(null==this.nameAlg&&null==this.asn1Alg)throw"algorithm not specified";null!=this.nameAlg&&null==this.asn1Alg&&(this.asn1Alg=f.asn1.x509.OID.name2obj(this.nameAlg));var t=[this.asn1Alg];this.paramEmpty||t.push(this.asn1Params);var e=new f.asn1.DERSequence({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null==this.asn1Params&&(this.asn1Params=new f.asn1.DERNull)},c.lang.extend(f.asn1.x509.AlgorithmIdentifier,f.asn1.ASN1Object),f.asn1.x509.GeneralName=function(t){f.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86"};this.explicit=!1,this.setByParam=function(t){var n=null;if(void 0!==t){if(void 0!==t.rfc822&&(this.type="rfc822",n=new f.asn1.DERIA5String({str:t[this.type]})),void 0!==t.dns&&(this.type="dns",n=new f.asn1.DERIA5String({str:t[this.type]})),void 0!==t.uri&&(this.type="uri",n=new f.asn1.DERIA5String({str:t[this.type]})),void 0!==t.dn&&(this.type="dn",n=new f.asn1.x509.X500Name({str:t.dn})),void 0!==t.ldapdn&&(this.type="dn",n=new f.asn1.x509.X500Name({ldapstr:t.ldapdn})),void 0!==t.certissuer){this.type="dn",this.explicit=!0;var r=null;if((s=t.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=s.indexOf("-----BEGIN ")&&(r=Xt.pemToHex(s)),null==r)throw"certissuer param not cert";(o=new Xt).hex=r;var i=o.getIssuerHex();(n=new f.asn1.ASN1Object).hTLV=i}if(void 0!==t.certsubj){this.type="dn",this.explicit=!0;var s,o;r=null;if((s=t.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=s.indexOf("-----BEGIN ")&&(r=Xt.pemToHex(s)),null==r)throw"certsubj param not cert";(o=new Xt).hex=r;i=o.getSubjectHex();(n=new f.asn1.ASN1Object).hTLV=i}if(null==this.type)throw"unsupported type in params="+t;this.asn1Obj=new f.asn1.DERTaggedObject({explicit:this.explicit,tag:e[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==t&&this.setByParam(t)},c.lang.extend(f.asn1.x509.GeneralName,f.asn1.ASN1Object),f.asn1.x509.GeneralNames=function(t){f.asn1.x509.GeneralNames.superclass.constructor.call(this);this.setByParamArray=function(t){for(var e=0;e<t.length;e++){var n=new f.asn1.x509.GeneralName(t[e]);this.asn1Array.push(n)}},this.getEncodedHex=function(){return new f.asn1.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},c.lang.extend(f.asn1.x509.GeneralNames,f.asn1.ASN1Object),f.asn1.x509.DistributionPointName=function(t){f.asn1.x509.DistributionPointName.superclass.constructor.call(this);if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new f.asn1.DERTaggedObject({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==t){if(!f.asn1.x509.GeneralNames.prototype.isPrototypeOf(t))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=t}},c.lang.extend(f.asn1.x509.DistributionPointName,f.asn1.ASN1Object),f.asn1.x509.DistributionPoint=function(t){f.asn1.x509.DistributionPoint.superclass.constructor.call(this);this.getEncodedHex=function(){var t=new f.asn1.DERSequence;if(null!=this.asn1DP){var e=new f.asn1.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(e)}return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.dpobj&&(this.asn1DP=t.dpobj)},c.lang.extend(f.asn1.x509.DistributionPoint,f.asn1.ASN1Object),f.asn1.x509.OID=new function(t){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",countryName:"2.5.4.6",streetAddress:"2.5.4.9",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var e=this.name2oidList[t],n=new f.asn1.DERObjectIdentifier({oid:e});return this.objCache[t]=n,n},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.atype2oidList[t])throw"AttributeType name undefined: "+t;var e=this.atype2oidList[t],n=new f.asn1.DERObjectIdentifier({oid:e});return this.objCache[t]=n,n}},f.asn1.x509.OID.oid2name=function(t){var e=f.asn1.x509.OID.name2oidList;for(var n in e)if(e[n]==t)return n;return""},f.asn1.x509.OID.oid2atype=function(t){var e=f.asn1.x509.OID.atype2oidList;for(var n in e)if(e[n]==t)return n;return t},f.asn1.x509.OID.name2oid=function(t){var e=f.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},f.asn1.x509.X509Util=new function(){this.getPKCS8PubKeyPEMfromRSAKey=function(t){var e=f.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t.n),n=f.asn1.ASN1Util.integerToByteHex(t.e),r=new f.asn1.DERInteger({hex:e}),i=new f.asn1.DERInteger({hex:n}),s=new f.asn1.DERSequence({array:[r,i]}).getEncodedHex(),o=new f.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"}),a=new f.asn1.DERBitString({hex:"00"+s}),u=new f.asn1.DERSequence({array:[o,a]}).getEncodedHex();return f.asn1.ASN1Util.getPEMStringFromHex(u,"PUBLIC KEY")}},f.asn1.x509.X509Util.newCertPEM=function(t){var e=f.asn1.x509,n=new e.TBSCertificate;if(void 0===t.serial)throw"serial number undefined.";if(n.setSerialNumberByParam(t.serial),"string"!=typeof t.sigalg.name)throw"unproper signature algorithm name";if(n.setSignatureAlgByParam(t.sigalg),void 0===t.issuer)throw"issuer name undefined.";if(n.setIssuerByParam(t.issuer),void 0===t.notbefore)throw"notbefore undefined.";if(n.setNotBeforeByParam(t.notbefore),void 0===t.notafter)throw"notafter undefined.";if(n.setNotAfterByParam(t.notafter),void 0===t.subject)throw"subject name undefined.";if(n.setSubjectByParam(t.subject),void 0===t.sbjpubkey)throw"subject public key undefined.";if(n.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var r=0;r<t.ext.length;r++)for(key in t.ext[r])n.appendExtensionByName(key,t.ext[r][key]);if(void 0===t.cakey&&void 0===t.sighex)throw"param cakey and sighex undefined.";var i=null,s=null;return t.cakey&&(i=Rt.getKey.apply(null,t.cakey),(s=new e.Certificate({tbscertobj:n,prvkeyobj:i})).sign()),t.sighex&&(s=new e.Certificate({tbscertobj:n})).setSignatureHex(t.sighex),s.getPEMString()};var f,l,d,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function p(t){var e,n,r="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),r+=g.charAt(n>>6)+g.charAt(63&n);for(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),r+=g.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),r+=g.charAt(n>>2)+g.charAt((3&n)<<4)),"=";(3&r.length)>0;)r+="=";return r}function y(t){var e,n,r,i="",s=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e)(r=g.indexOf(t.charAt(e)))<0||(0==s?(i+=ut(r>>2),n=3&r,s=1):1==s?(i+=ut(n<<2|r>>4),n=15&r,s=2):2==s?(i+=ut(n),i+=ut(r>>2),n=3&r,s=3):(i+=ut(n<<2|r>>4),i+=ut(15&r),s=0));return 1==s&&(i+=ut(n<<2)),i}function v(t){var e,n=y(t),r=new Array;for(e=0;2*e<n.length;++e)r[e]=parseInt(n.substring(2*e,2*e+2),16);return r}function m(t){for(var e=new Array,n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function S(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}function x(t){for(var e="",n=0;n<t.length;n++){var r=t[n].toString(16);1==r.length&&(r="0"+r),e+=r}return e}function b(t){return x(m(t))}function A(t){return t=(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function F(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),t=(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function E(t){return t.length%2==1&&(t="0"+t),A(p(t))}function w(t){return y(F(t))}function O(t){return I(T(t))}function P(t){return decodeURIComponent(j(t))}function C(t){for(var e="",n=0;n<t.length-1;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e}function H(t){for(var e="",n=0;n<t.length;n++)e+=("0"+t.charCodeAt(n).toString(16)).slice(-2);return e}function D(t){return p(t)}function I(t){return t.replace(/%/g,"")}function j(t){return t.replace(/(..)/g,"%$1")}function T(t){for(var e=encodeURIComponent(t),n="",r=0;r<e.length;r++)"%"==e[r]?(n+=e.substr(r,3),r+=2):n=n+"%"+b(e[r]);return n}void 0!==f&&f||(f={}),void 0!==f.lang&&f.lang||(f.lang={}),f.lang.String=function(){},"function"==typeof Buffer?(l=function(t){return A(new Buffer(t,"utf8").toString("base64"))},d=function(t){return new Buffer(F(t),"base64").toString("utf8")}):(l=function(t){return E(I(T(t)))},d=function(t){return decodeURIComponent(j(w(t)))}),f.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},f.lang.String.isHex=function(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))},f.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},f.lang.String.isBase64URL=function(t){return!t.match(/[+/=]/)&&(t=F(t),f.lang.String.isBase64(t))},f.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)};var R,B,N,V,_;function L(){this.i=0,this.j=0,this.S=new Array}B=(R=u).lib,N=B.Base,V=B.WordArray,(_=R.x64={}).Word=N.extend({init:function(t,e){this.high=t,this.low=e}}),_.WordArray=N.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var i=t[r];n.push(i.high),n.push(i.low)}return V.create(n,this.sigBytes)},clone:function(){for(var t=N.clone.call(this),e=t.words=this.words.slice(0),n=e.length,r=0;r<n;r++)e[r]=e[r].clone();return t}}),u.lib.Cipher||function(t){var e=u,n=e.lib,r=n.Base,i=n.WordArray,s=n.BufferedBlockAlgorithm,o=e.enc,a=(o.Utf8,o.Base64),c=e.algo.EvpKDF,h=n.Cipher=s.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?S:v}return function(e){return{encrypt:function(n,r,i){return t(r).encrypt(e,n,r,i)},decrypt:function(n,r,i){return t(r).decrypt(e,n,r,i)}}}}()}),f=(n.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),e.mode={}),l=n.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),d=f.CBC=function(){var t=l.extend();function e(t,e,n){var r=this._iv;if(r){var i=r;this._iv=undefined}else i=this._prevBlock;for(var s=0;s<n;s++)t[e+s]^=i[s]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,s=t.slice(n,n+i);r.decryptBlock(t,n),e.call(this,t,n,i),this._prevBlock=s}}),t}(),g=(e.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,s=r<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(s);var u=i.create(o,r);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},p=(n.BlockCipher=h.extend({cfg:h.cfg.extend({mode:d,padding:g}),reset:function(){h.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{r=n.createDecryptor;this._minBufferSize=1}this._mode=r.call(n,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{e=this._process(!0);t.unpad(e)}return e},blockSize:4}),n.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),y=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var r=i.create([1398893684,1701076831]).concat(n).concat(e);else r=e;return r.toString(a)},parse:function(t){var e=a.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var r=i.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:r})}},v=n.SerializableCipher=r.extend({cfg:r.extend({format:y}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r),s=i.finalize(e),o=i.cfg;return p.create({ciphertext:s,key:n,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),m=(e.kdf={}).OpenSSL={execute:function(t,e,n,r){r||(r=i.random(8));var s=c.create({keySize:e+n}).compute(t,r),o=i.create(s.words.slice(e),4*n);return s.sigBytes=4*e,p.create({key:s,iv:o,salt:r})}},S=n.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:m}),encrypt:function(t,e,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize);r.iv=i.iv;var s=v.encrypt.call(this,t,e,i.key,r);return s.mixIn(i),s},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var i=r.kdf.execute(n,t.keySize,t.ivSize,e.salt);return r.iv=i.iv,v.decrypt.call(this,t,e,i.key,r)}})}(),function(t){var e=u,n=e.lib,r=n.WordArray,i=n.Hasher,s=e.algo,o=[];!function(){for(var e=0;e<64;e++)o[e]=4294967296*t.abs(t.sin(e+1))|0}();var a=s.MD5=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s=this._hash.words,a=t[e+0],u=t[e+1],d=t[e+2],g=t[e+3],p=t[e+4],y=t[e+5],v=t[e+6],m=t[e+7],S=t[e+8],x=t[e+9],b=t[e+10],A=t[e+11],F=t[e+12],E=t[e+13],w=t[e+14],O=t[e+15],P=s[0],C=s[1],H=s[2],D=s[3];P=c(P,C,H,D,a,7,o[0]),D=c(D,P,C,H,u,12,o[1]),H=c(H,D,P,C,d,17,o[2]),C=c(C,H,D,P,g,22,o[3]),P=c(P,C,H,D,p,7,o[4]),D=c(D,P,C,H,y,12,o[5]),H=c(H,D,P,C,v,17,o[6]),C=c(C,H,D,P,m,22,o[7]),P=c(P,C,H,D,S,7,o[8]),D=c(D,P,C,H,x,12,o[9]),H=c(H,D,P,C,b,17,o[10]),C=c(C,H,D,P,A,22,o[11]),P=c(P,C,H,D,F,7,o[12]),D=c(D,P,C,H,E,12,o[13]),H=c(H,D,P,C,w,17,o[14]),P=h(P,C=c(C,H,D,P,O,22,o[15]),H,D,u,5,o[16]),D=h(D,P,C,H,v,9,o[17]),H=h(H,D,P,C,A,14,o[18]),C=h(C,H,D,P,a,20,o[19]),P=h(P,C,H,D,y,5,o[20]),D=h(D,P,C,H,b,9,o[21]),H=h(H,D,P,C,O,14,o[22]),C=h(C,H,D,P,p,20,o[23]),P=h(P,C,H,D,x,5,o[24]),D=h(D,P,C,H,w,9,o[25]),H=h(H,D,P,C,g,14,o[26]),C=h(C,H,D,P,S,20,o[27]),P=h(P,C,H,D,E,5,o[28]),D=h(D,P,C,H,d,9,o[29]),H=h(H,D,P,C,m,14,o[30]),P=f(P,C=h(C,H,D,P,F,20,o[31]),H,D,y,4,o[32]),D=f(D,P,C,H,S,11,o[33]),H=f(H,D,P,C,A,16,o[34]),C=f(C,H,D,P,w,23,o[35]),P=f(P,C,H,D,u,4,o[36]),D=f(D,P,C,H,p,11,o[37]),H=f(H,D,P,C,m,16,o[38]),C=f(C,H,D,P,b,23,o[39]),P=f(P,C,H,D,E,4,o[40]),D=f(D,P,C,H,a,11,o[41]),H=f(H,D,P,C,g,16,o[42]),C=f(C,H,D,P,v,23,o[43]),P=f(P,C,H,D,x,4,o[44]),D=f(D,P,C,H,F,11,o[45]),H=f(H,D,P,C,O,16,o[46]),P=l(P,C=f(C,H,D,P,d,23,o[47]),H,D,a,6,o[48]),D=l(D,P,C,H,m,10,o[49]),H=l(H,D,P,C,w,15,o[50]),C=l(C,H,D,P,y,21,o[51]),P=l(P,C,H,D,F,6,o[52]),D=l(D,P,C,H,g,10,o[53]),H=l(H,D,P,C,b,15,o[54]),C=l(C,H,D,P,u,21,o[55]),P=l(P,C,H,D,S,6,o[56]),D=l(D,P,C,H,O,10,o[57]),H=l(H,D,P,C,v,15,o[58]),C=l(C,H,D,P,E,21,o[59]),P=l(P,C,H,D,p,6,o[60]),D=l(D,P,C,H,A,10,o[61]),H=l(H,D,P,C,d,15,o[62]),C=l(C,H,D,P,x,21,o[63]),s[0]=s[0]+P|0,s[1]=s[1]+C|0,s[2]=s[2]+H|0,s[3]=s[3]+D|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var s=t.floor(r/4294967296),o=r;n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var h=u[c];u[c]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return a},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,i,s,o){var a=t+(e&n|~e&r)+i+o;return(a<<s|a>>>32-s)+e}function h(t,e,n,r,i,s,o){var a=t+(e&r|n&~r)+i+o;return(a<<s|a>>>32-s)+e}function f(t,e,n,r,i,s,o){var a=t+(e^n^r)+i+o;return(a<<s|a>>>32-s)+e}function l(t,e,n,r,i,s,o){var a=t+(n^(e|~r))+i+o;return(a<<s|a>>>32-s)+e}e.MD5=i._createHelper(a),e.HmacMD5=i._createHmacHelper(a)}(Math),function(){var t=u,e=t.lib,n=e.Base,r=e.WordArray,i=t.algo,s=i.SHA1,o=i.HMAC,a=i.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=o.create(n.hasher,t),s=r.create(),a=r.create([1]),u=s.words,c=a.words,h=n.keySize,f=n.iterations;u.length<h;){var l=i.update(e).finalize(a);i.reset();for(var d=l.words,g=d.length,p=l,y=1;y<f;y++){p=i.finalize(p),i.reset();for(var v=p.words,m=0;m<g;m++)d[m]^=v[m]}s.concat(l),c[0]++}return s.sigBytes=4*h,s}});t.PBKDF2=function(t,e,n){return a.create(n).compute(t,e)}}(),L.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0},L.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var K,k,M,U;function q(){!function(t){k[M++]^=255&t,k[M++]^=t>>8&255,k[M++]^=t>>16&255,k[M++]^=t>>24&255,M>=256&&(M-=256)}((new Date).getTime())}if(function(t){var e=u,n=e.lib,r=n.WordArray,i=n.Hasher,s=e.algo,o=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=r.create([0,1518500249,1859775393,2400959708,2840853838]),l=r.create([1352829926,1548603684,1836072691,2053994217,0]),d=s.RIPEMD160=i.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s,u,d,x,b,A,F,E,w,O,P,C=this._hash.words,H=f.words,D=l.words,I=o.words,j=a.words,T=c.words,R=h.words;A=s=C[0],F=u=C[1],E=d=C[2],w=x=C[3],O=b=C[4];for(n=0;n<80;n+=1)P=s+t[e+I[n]]|0,P+=n<16?g(u,d,x)+H[0]:n<32?p(u,d,x)+H[1]:n<48?y(u,d,x)+H[2]:n<64?v(u,d,x)+H[3]:m(u,d,x)+H[4],P=(P=S(P|=0,T[n]))+b|0,s=b,b=x,x=S(d,10),d=u,u=P,P=A+t[e+j[n]]|0,P+=n<16?m(F,E,w)+D[0]:n<32?v(F,E,w)+D[1]:n<48?y(F,E,w)+D[2]:n<64?p(F,E,w)+D[3]:g(F,E,w)+D[4],P=(P=S(P|=0,R[n]))+O|0,A=O,O=w,w=S(E,10),E=F,F=P;P=C[1]+d+w|0,C[1]=C[2]+x+O|0,C[2]=C[3]+b+A|0,C[3]=C[4]+s+F|0,C[4]=C[0]+u+E|0,C[0]=P},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,s=i.words,o=0;o<5;o++){var a=s[o];s[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function g(t,e,n){return t^e^n}function p(t,e,n){return t&e|~t&n}function y(t,e,n){return(t|~e)^n}function v(t,e,n){return t&n|e&~n}function m(t,e,n){return t^(e|~n)}function S(t,e){return t<<e|t>>>32-e}e.RIPEMD160=i._createHelper(d),e.HmacRIPEMD160=i._createHmacHelper(d)}(Math),function(){var t=u,e=t.lib.BlockCipher,n=t.algo,r=[],i=[],s=[],o=[],a=[],c=[],h=[],f=[],l=[],d=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,u=0;for(e=0;e<256;e++){var g=u^u<<1^u<<2^u<<3^u<<4;g=g>>>8^255&g^99,r[n]=g,i[g]=n;var p=t[n],y=t[p],v=t[y],m=257*t[g]^16843008*g;s[n]=m<<24|m>>>8,o[n]=m<<16|m>>>16,a[n]=m<<8|m>>>24,c[n]=m;m=16843009*v^65537*y^257*p^16843008*n;h[g]=m<<24|m>>>8,f[g]=m<<16|m>>>16,l[g]=m<<8|m>>>24,d[g]=m,n?(n=p^t[t[t[v^p]]],u^=t[t[u]]):n=u=1}}();var g=[0,1,2,4,8,16,32,64,128,27,54],p=n.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes/4,i=4*((this._nRounds=n+6)+1),s=this._keySchedule=[],o=0;o<i;o++)if(o<n)s[o]=e[o];else{var a=s[o-1];o%n?n>6&&o%n==4&&(a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a]):(a=r[(a=a<<8|a>>>24)>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a],a^=g[o/n|0]<<24),s[o]=s[o-n]^a}for(var u=this._invKeySchedule=[],c=0;c<i;c++){o=i-c;if(c%4)a=s[o];else a=s[o-4];u[c]=c<4||o<=4?a:h[r[a>>>24]]^f[r[a>>>16&255]]^l[r[a>>>8&255]]^d[r[255&a]]}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,o,a,c,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,h,f,l,d,i);n=t[e+1];t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,s,o,a){for(var u=this._nRounds,c=t[e]^n[0],h=t[e+1]^n[1],f=t[e+2]^n[2],l=t[e+3]^n[3],d=4,g=1;g<u;g++){var p=r[c>>>24]^i[h>>>16&255]^s[f>>>8&255]^o[255&l]^n[d++],y=r[h>>>24]^i[f>>>16&255]^s[l>>>8&255]^o[255&c]^n[d++],v=r[f>>>24]^i[l>>>16&255]^s[c>>>8&255]^o[255&h]^n[d++],m=r[l>>>24]^i[c>>>16&255]^s[h>>>8&255]^o[255&f]^n[d++];c=p,h=y,f=v,l=m}p=(a[c>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^n[d++],y=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&c])^n[d++],v=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[c>>>8&255]<<8|a[255&h])^n[d++],m=(a[l>>>24]<<24|a[c>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d++];t[e]=p,t[e+1]=y,t[e+2]=v,t[e+3]=m},keySize:8});t.AES=e._createHelper(p)}(),null==k){var G;if(k=new Array,M=0,window.crypto&&window.crypto.getRandomValues){var W=new Uint8Array(32);for(window.crypto.getRandomValues(W),G=0;G<32;++G)k[M++]=W[G]}if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(G=0;G<z.length;++G)k[M++]=255&z.charCodeAt(G)}for(;M<256;)G=Math.floor(65536*Math.random()),k[M++]=G>>>8,k[M++]=255&G;M=0,q()}function J(){if(null==K){for(q(),(K=new L).init(k),M=0;M<k.length;++M)k[M]=0;M=0}return K.next()}function X(){}function Y(t,e){return new rt(t,e)}function $(t,e,n){for(var r="",i=0;r.length<e;)r+=n(String.fromCharCode.apply(String,t.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function Z(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Q(t,e,n){for(var r="",i=0;r.length<e;)r+=n(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return r}function tt(t,e){this.x=e,this.q=t}function et(t,e,n,r){this.curve=t,this.x=e,this.y=n,this.z=null==r?rt.ONE:r,this.zinv=null}function nt(t,e,n){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new et(this,null,null)}X.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=J()},Z.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},Z.prototype.setPublic=function(t,e){this.isPublic=!0,"string"!=typeof t?(this.n=t,this.e=e):null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=Y(t,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")},Z.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var n=new Array,r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=63&i|128,n[--e]=i>>6|192):(n[--e]=63&i|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var s=new X,o=new Array;e>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);n[--e]=o[0]}return n[--e]=2,n[--e]=0,new rt(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},Z.prototype.encryptOAEP=function(t,e,n){var r=function(t,e,n,r){var i=f.crypto.MessageDigest,s=f.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(t){return C(s.hashString(t,o))}),t.length+2*r+2>e)throw"Message too long for RSA";var a,u="";for(a=0;a<e-t.length-2*r-2;a+=1)u+="\0";var c=n("")+u+""+t,h=new Array(r);(new X).nextBytes(h);var l=$(h,c.length,n),d=[];for(a=0;a<c.length;a+=1)d[a]=c.charCodeAt(a)^l.charCodeAt(a);var g=$(d,h.length,n),p=[0];for(a=0;a<h.length;a+=1)p[a+1]=h[a]^g.charCodeAt(a);return new rt(p.concat(d))}(t,this.n.bitLength()+7>>3,e,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var s=i.toString(16);return 0==(1&s.length)?s:"0"+s},Z.prototype.type="RSA",Z.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},Z.prototype.setPrivate=function(t,e,n){this.isPrivate=!0,"string"!=typeof t?(this.n=t,this.e=e,this.d=n):null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=Y(t,16),this.e=parseInt(e,16),this.d=Y(n,16)):alert("Invalid RSA private key")},Z.prototype.setPrivateEx=function(t,e,n,r,i,s,o,a){if(this.isPrivate=!0,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=Y(t,16),this.e=parseInt(e,16),this.d=Y(n,16),this.p=Y(r,16),this.q=Y(i,16),this.dmp1=Y(s,16),this.dmq1=Y(o,16),this.coeff=Y(a,16)):alert("Invalid RSA private key in RSASetPrivateEx")},Z.prototype.generate=function(t,e){var n=new X,r=t>>1;this.e=parseInt(e,16);for(var i=new rt(e,16);;){for(;this.p=new rt(t-r,1,n),0!=this.p.subtract(rt.ONE).gcd(i).compareTo(rt.ONE)||!this.p.isProbablePrime(10););for(;this.q=new rt(r,1,n),0!=this.q.subtract(rt.ONE).gcd(i).compareTo(rt.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(rt.ONE),a=this.q.subtract(rt.ONE),u=o.multiply(a);if(0==u.gcd(i).compareTo(rt.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(u),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},Z.prototype.decrypt=function(t){var e=Y(t,16),n=this.doPrivate(e);return null==n?null:function(t,e){for(var n=t.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=e-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var s=255&n[r];s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((31&s)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&s)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}(n,this.n.bitLength()+7>>3)},Z.prototype.decryptOAEP=function(t,e,n){var r=Y(t,16),i=this.doPrivate(r);return null==i?null:function(t,e,n,r){var i=f.crypto.MessageDigest,s=f.crypto.Util,o=null;for(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(t){return C(s.hashString(t,o))}),t=t.toByteArray(),a=0;a<t.length;a+=1)t[a]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*r+2)throw"Cipher too short";var a,u=t.substr(1,r),c=t.substr(r+1),h=Q(c,r,n),l=[];for(a=0;a<u.length;a+=1)l[a]=u.charCodeAt(a)^h.charCodeAt(a);var d=Q(String.fromCharCode.apply(String,l),t.length-r,n),g=[];for(a=0;a<c.length;a+=1)g[a]=c.charCodeAt(a)^d.charCodeAt(a);if((g=String.fromCharCode.apply(String,g)).substr(0,r)!==n(""))throw"Hash mismatch";var p=(g=g.substr(r)).indexOf("");if((-1!=p?g.substr(0,p).lastIndexOf("\0"):-1)+1!=p)throw"Malformed data";return g.substr(p+1)}(i,this.n.bitLength()+7>>3,e,n)},function(){var t=u,e=t.lib,n=e.WordArray,r=e.Hasher,i=t.algo,s=[],o=i.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],c=0;c<80;c++){if(c<16)s[c]=0|t[e+c];else{var h=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=h<<1|h>>>31}var f=(r<<5|r>>>27)+u+s[c];f+=c<20?1518500249+(i&o|~i&a):c<40?1859775393+(i^o^a):c<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,u=a,a=o,o=i<<30|i>>>2,i=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=r._createHelper(o),t.HmacSHA1=r._createHmacHelper(o)}(),function(t){var e=u,n=e.lib,r=n.WordArray,i=n.Hasher,s=e.algo,o=[],a=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(o[i]=n(t.pow(r,.5))),a[i]=n(t.pow(r,1/3)),i++),r++}();var c=[],h=s.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],u=n[4],h=n[5],f=n[6],l=n[7],d=0;d<64;d++){if(d<16)c[d]=0|t[e+d];else{var g=c[d-15],p=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,y=c[d-2],v=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;c[d]=p+c[d-7]+v+c[d-16]}var m=r&i^r&s^i&s,S=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),x=l+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&h^~u&f)+a[d]+c[d];l=f,f=h,h=u,u=o+x|0,o=s,s=i,i=r,r=x+(S+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+u|0,n[5]=n[5]+h|0,n[6]=n[6]+f|0,n[7]=n[7]+l|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(h),e.HmacSHA256=i._createHmacHelper(h)}(Math),function(){var t=u,e=t.lib.WordArray,n=t.algo,r=n.SHA256,i=n.SHA224=r.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=r._createHelper(i),t.HmacSHA224=r._createHmacHelper(i)}(),function(){var t=u,e=t.lib.Hasher,n=t.x64,r=n.Word,i=n.WordArray,s=t.algo;function o(){return r.create.apply(r,arguments)}var a=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],c=[];!function(){for(var t=0;t<80;t++)c[t]=o()}();var h=s.SHA512=e.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],u=n[4],h=n[5],f=n[6],l=n[7],d=r.high,g=r.low,p=i.high,y=i.low,v=s.high,m=s.low,S=o.high,x=o.low,b=u.high,A=u.low,F=h.high,E=h.low,w=f.high,O=f.low,P=l.high,C=l.low,H=d,D=g,I=p,j=y,T=v,R=m,B=S,N=x,V=b,_=A,L=F,K=E,k=w,M=O,U=P,q=C,G=0;G<80;G++){var W=c[G];if(G<16)var z=W.high=0|t[e+2*G],J=W.low=0|t[e+2*G+1];else{var X=c[G-15],Y=X.high,$=X.low,Z=(Y>>>1|$<<31)^(Y>>>8|$<<24)^Y>>>7,Q=($>>>1|Y<<31)^($>>>8|Y<<24)^($>>>7|Y<<25),tt=c[G-2],et=tt.high,nt=tt.low,rt=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,it=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),st=c[G-7],ot=st.high,at=st.low,ut=c[G-16],ct=ut.high,ht=ut.low;z=(z=(z=Z+ot+((J=Q+at)>>>0<Q>>>0?1:0))+rt+((J=J+it)>>>0<it>>>0?1:0))+ct+((J=J+ht)>>>0<ht>>>0?1:0);W.high=z,W.low=J}var ft,lt=V&L^~V&k,dt=_&K^~_&M,gt=H&I^H&T^I&T,pt=D&j^D&R^j&R,yt=(H>>>28|D<<4)^(H<<30|D>>>2)^(H<<25|D>>>7),vt=(D>>>28|H<<4)^(D<<30|H>>>2)^(D<<25|H>>>7),mt=(V>>>14|_<<18)^(V>>>18|_<<14)^(V<<23|_>>>9),St=(_>>>14|V<<18)^(_>>>18|V<<14)^(_<<23|V>>>9),xt=a[G],bt=xt.high,At=xt.low,Ft=U+mt+((ft=q+St)>>>0<q>>>0?1:0),Et=vt+pt;U=k,q=M,k=L,M=K,L=V,K=_,V=B+(Ft=(Ft=(Ft=Ft+lt+((ft=ft+dt)>>>0<dt>>>0?1:0))+bt+((ft=ft+At)>>>0<At>>>0?1:0))+z+((ft=ft+J)>>>0<J>>>0?1:0))+((_=N+ft|0)>>>0<N>>>0?1:0)|0,B=T,N=R,T=I,R=j,I=H,j=D,H=Ft+(yt+gt+(Et>>>0<vt>>>0?1:0))+((D=ft+Et|0)>>>0<ft>>>0?1:0)|0}g=r.low=g+D,r.high=d+H+(g>>>0<D>>>0?1:0),y=i.low=y+j,i.high=p+I+(y>>>0<j>>>0?1:0),m=s.low=m+R,s.high=v+T+(m>>>0<R>>>0?1:0),x=o.low=x+N,o.high=S+B+(x>>>0<N>>>0?1:0),A=u.low=A+_,u.high=b+V+(A>>>0<_>>>0?1:0),E=h.low=E+K,h.high=F+L+(E>>>0<K>>>0?1:0),O=f.low=O+M,f.high=w+k+(O>>>0<M>>>0?1:0),C=l.low=C+q,l.high=P+U+(C>>>0<q>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(h),t.HmacSHA512=e._createHmacHelper(h)}(),function(){var t=u,e=t.x64,n=e.Word,r=e.WordArray,i=t.algo,s=i.SHA512,o=i.SHA384=s.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=s._createHelper(o),t.HmacSHA384=s._createHmacHelper(o)}(),void 0!==f&&f||(f={}),void 0!==f.crypto&&f.crypto||(f.crypto={}),f.crypto.DSA=function(){function t(t,n){if(!(n.compareTo(t)<=0)){for(var r=n.subtract(t),i=e(r.bitLength());i>r;)i=e(r.bitLength());return t.add(i)}}function e(t){if(t<0)return null;var e=n(Math.floor((t+7)/8));return t%8>0&&(e=String.fromCharCode(Math.pow(2,t%8)-1&e.charCodeAt(0))+e.substring(1)),new rt(function(t){if(null==t)return"";var e,n=[],r=t.length,i=0;for(;i<r;){for(e=t[i++].charCodeAt().toString(16);e.length<2;)e="0"+e;n.push(""+e)}return n.join("")}(e),16)}function n(t){for(var e="",n=0;n<t;n++)e+=String.fromCharCode(r());return e}function r(){var t=new Uint32Array(1);return window.crypto.getRandomValues(t),255&t[0]}this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.setPrivate=function(t,e,n,r,i){this.isPrivate=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=i},this.setPublic=function(t,e,n,r){this.isPublic=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=null},this.signWithMessageHash=function(e){var n=this.p,r=this.q,i=this.g,s=(this.y,this.x),o=(e.substr(0,r.bitLength()/4),new rt(e,16)),a=t(rt.ONE.add(rt.ONE),r.subtract(rt.ONE)),u=i.modPow(a,n).mod(r),c=a.modInverse(r).multiply(o.add(s.multiply(u))).mod(r);return f.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:u}},{int:{bigint:c}}]})},this.verifyWithMessageHash=function(t,e){var n=this.p,r=this.q,i=this.g,s=this.y,o=this.parseASN1Signature(e),a=o[0],u=o[1],c=new rt(t=t.substr(0,r.bitLength()/4),16);if(rt.ZERO.compareTo(a)>0||a.compareTo(r)>0||rt.ZERO.compareTo(u)>0||u.compareTo(r)>0)throw"invalid DSA signature";var h=u.modInverse(r),f=c.multiply(h).mod(r),l=a.multiply(h).mod(r);return 0==i.modPow(f,n).multiply(s.modPow(l,n)).mod(n).mod(r).compareTo(a)},this.parseASN1Signature=function(t){try{return[new rt(h.getVbyList(t,0,[0],"02"),16),new rt(h.getVbyList(t,0,[1],"02"),16)]}catch(t){throw"malformed DSA signature"}},this.select_hash_algorithm=function(t){var e=openpgp.config.config.prefer_hash_algorithm;switch(Math.round(t.bitLength()/8)){case 20:return 2!=e&&e>11&&10!=e&&e<8?2:e;case 28:return e>11&&e<8?11:e;case 32:return e>10&&e<8?8:e;default:return util.print_debug("DSA select hash algorithm: returning null for an unknown length of q"),null}},this.sign=function(e,n,r,i,s,o){var a=new rt(f.crypto.Util.hashString(n,e.toLowerCase()).substr(0,s.bitLength()/4),16),u=t(rt.ONE.add(rt.ONE),s.subtract(rt.ONE)),c=r.modPow(u,i).mod(s),h=u.modInverse(s).multiply(a.add(o.multiply(c))).mod(s),l=new Array;return l[0]=c,l[1]=h,l},this.verify=function(t,e,n,r,i,s,o,a){var u=new rt(f.crypto.Util.hashString(r,t.toLowerCase()).substr(0,s.bitLength()/4),16);if(rt.ZERO.compareTo(e)>0||e.compareTo(s)>0||rt.ZERO.compareTo(n)>0||n.compareTo(s)>0)return util.print_error("invalid DSA Signature"),null;var c=n.modInverse(s),h=u.multiply(c).mod(s),l=e.multiply(c).mod(s);return 0==o.modPow(h,i).multiply(a.modPow(l,i)).mod(i).mod(s).compareTo(e)},this.getRandomBigIntegerInRange=t,this.getRandomBigInteger=e,this.getRandomBytes=n},tt.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},tt.prototype.toBigInteger=function(){return this.x},tt.prototype.negate=function(){return new tt(this.q,this.x.negate().mod(this.q))},tt.prototype.add=function(t){return new tt(this.q,this.x.add(t.toBigInteger()).mod(this.q))},tt.prototype.subtract=function(t){return new tt(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},tt.prototype.multiply=function(t){return new tt(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},tt.prototype.square=function(){return new tt(this.q,this.x.square().mod(this.q))},tt.prototype.divide=function(t){return new tt(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},et.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},et.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},et.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(rt.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(rt.ZERO))},et.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(rt.ZERO)&&!this.y.toBigInteger().equals(rt.ZERO)},et.prototype.negate=function(){return new et(this.curve,this.x,this.y.negate(),this.z)},et.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(rt.ZERO.equals(n))return rt.ZERO.equals(e)?this.twice():this.curve.getInfinity();var r=new rt("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger(),o=(t.x.toBigInteger(),t.y.toBigInteger(),n.square()),a=o.multiply(n),u=i.multiply(o),c=e.square().multiply(this.z),h=c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(a).multiply(n).mod(this.curve.q),f=u.multiply(r).multiply(e).subtract(s.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),l=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new et(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(f),l)},et.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new rt("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),s=this.curve.a.toBigInteger(),o=e.square().multiply(t);rt.ZERO.equals(s)||(o=o.add(this.z.square().multiply(s)));var a=(o=o.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),u=o.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new et(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},et.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new rt("3")),i=this.negate(),s=this;for(e=r.bitLength()-2;e>0;--e){s=s.twice();var o=r.testBit(e);o!=n.testBit(e)&&(s=s.add(o?this:i))}return s},et.prototype.multiplyTwo=function(t,e,n){var r;r=t.bitLength()>n.bitLength()?t.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(e);r>=0;)i=i.twice(),t.testBit(r)?i=n.testBit(r)?i.add(s):i.add(this):n.testBit(r)&&(i=i.add(e)),--r;return i},nt.prototype.getQ=function(){return this.q},nt.prototype.getA=function(){return this.a},nt.prototype.getB=function(){return this.b},nt.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},nt.prototype.getInfinity=function(){return this.infinity},nt.prototype.fromBigInteger=function(t){return new tt(this.q,t)},nt.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,n=t.substr(2,e),r=t.substr(e+2,e);return new et(this,this.fromBigInteger(new rt(n,16)),this.fromBigInteger(new rt(r,16)));default:return null}},void 0!==f&&f||(f={}),void 0!==f.crypto&&f.crypto||(f.crypto={}),f.crypto.ECDSA=function(t){var e=new X;this.type="EC",this.getBigRandom=function(t){return new rt(t.bitLength(),e).mod(t.subtract(rt.ONE)).add(rt.ONE)},this.setNamedCurve=function(t){this.ecparams=f.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var n={};return n.x=t.substr(2,e),n.y=t.substr(2+e),n},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.ecparams.n,e=this.getBigRandom(t),n=this.ecparams.G.multiply(e),r=n.getX().toBigInteger(),i=n.getY().toBigInteger(),s=this.ecparams.keylen/4,o=("0000000000"+e.toString(16)).slice(-s),a="04"+("0000000000"+r.toString(16)).slice(-s)+("0000000000"+i.toString(16)).slice(-s);return this.setPrivateKeyHex(o),this.setPublicKeyHex(a),{ecprvhex:o,ecpubhex:a}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new rt(e,16),r=this.ecparams.n,i=new rt(t,16);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(rt.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return f.crypto.ECDSA.biRSSigToASN1Sig(o,a)},this.sign=function(t,e){var n=e,r=this.ecparams.n,i=rt.fromByteArrayUnsigned(t);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(rt.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return this.serializeSig(o,a)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,n){var r,i,s,o=f.crypto.ECDSA.parseSigHex(e);r=o.r,i=o.s,s=et.decodeFromHex(this.ecparams.curve,n);var a=new rt(t,16);return this.verifyRaw(a,r,i,s)},this.verify=function(t,e,n){var r,i,s;if(Bitcoin.Util.isArray(e)){var o=this.parseSig(e);r=o.r,i=o.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";r=e.r,i=e.s}if(n instanceof et)s=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=et.decodeFrom(this.ecparams.curve,n)}var a=rt.fromByteArrayUnsigned(t);return this.verifyRaw(a,r,i,s)},this.verifyRaw=function(t,e,n,r){var i=this.ecparams.n,s=this.ecparams.G;if(e.compareTo(rt.ONE)<0||e.compareTo(i)>=0)return!1;if(n.compareTo(rt.ONE)<0||n.compareTo(i)>=0)return!1;var o=n.modInverse(i),a=t.multiply(o).mod(i),u=e.multiply(o).mod(i);return s.multiply(a).add(r.multiply(u)).getX().toBigInteger().mod(i).equals(e)},this.serializeSig=function(t,e){var n=t.toByteArraySigned(),r=e.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:rt.fromByteArrayUnsigned(n),s:rt.fromByteArrayUnsigned(r)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:rt.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:rt.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},f.crypto.ECDSA.parseSigHex=function(t){var e=f.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new rt(e.r,16),s:new rt(e.s,16)}},f.crypto.ECDSA.parseSigHexInHexRS=function(t){if("30"!=t.substr(0,2))throw"signature is not a ASN.1 sequence";var e=h.getPosArrayOfChildren_AtObj(t,0);if(2!=e.length)throw"number of signature ASN.1 sequence elements seem wrong";var n=e[0],r=e[1];if("02"!=t.substr(n,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=t.substr(r,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:h.getHexOfV_AtObj(t,n),s:h.getHexOfV_AtObj(t,r)}},f.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=f.crypto.ECDSA.parseSigHexInHexRS(t),n=e.r,r=e.s;if("00"==n.substr(0,2)&&n.length/2*8%128==8&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length/2*8%128==8&&(r=r.substr(2)),n.length/2*8%128!=0)throw"unknown ECDSA sig r length error";if(r.length/2*8%128!=0)throw"unknown ECDSA sig s length error";return n+r},f.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),n=t.substr(t.length/2);return f.crypto.ECDSA.hexRSSigToASN1Sig(e,n)},f.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var n=new rt(t,16),r=new rt(e,16);return f.crypto.ECDSA.biRSSigToASN1Sig(n,r)},f.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var n=new f.asn1.DERInteger({bigint:t}),r=new f.asn1.DERInteger({bigint:e});return new f.asn1.DERSequence({array:[n,r]}).getEncodedHex()},tt.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},et.prototype.getEncoded=function(t){var e=function(t,e){var n=t.toByteArrayUnsigned();if(e<n.length)n=n.slice(n.length-e);else for(;e>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=e(n,32);return t?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(e(r,32))),i},et.decodeFrom=function(t,e){e[0];var n=e.length-1,r=e.slice(1,1+n/2),i=e.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var s=new rt(r),o=new rt(i);return new et(t,t.fromBigInteger(s),t.fromBigInteger(o))},et.decodeFromHex=function(t,e){e.substr(0,2);var n=e.length-2,r=e.substr(2,n/2),i=e.substr(2+n/2,n/2),s=new rt(r,16),o=new rt(i,16);return new et(t,t.fromBigInteger(s),t.fromBigInteger(o))},et.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),n=t.y.subtract(this.y).divide(e),r=n.square().subtract(this.x).subtract(t.x),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new et(this.curve,r,i)},et.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(rt.valueOf(2)),e=this.curve.fromBigInteger(rt.valueOf(3)),n=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),r=n.square().subtract(this.x.multiply(t)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new et(this.curve,r,i)},et.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new rt("3")),i=this.negate(),s=this;for(e=r.bitLength()-2;e>0;--e){s=s.twice();var o=r.testBit(e);o!=n.testBit(e)&&(s=s.add2D(o?this:i))}return s},et.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=e.multiply(e).mod(i),o=t.multiply(t).multiply(t).add(n.multiply(t)).add(r).mod(i);return s.equals(o)},et.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},et.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(e.compareTo(rt.ONE)<0||e.compareTo(t.subtract(rt.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(rt.ONE)<0||n.compareTo(t.subtract(rt.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0},function(){var t=u,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],s=0;s<n;s+=3)for(var o=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<n;a++)i.push(r.charAt(o>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var n=t.length,r=this._map,i=r.charAt(64);if(i){var s=t.indexOf(i);-1!=s&&(n=s)}for(var o=[],a=0,u=0;u<n;u++)if(u%4){var c=r.indexOf(t.charAt(u-1))<<u%4*2,h=r.indexOf(t.charAt(u))>>>6-u%4*2;o[a>>>2]|=(c|h)<<24-a%4*8,a++}return e.create(o,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(){var t=u,e=t.lib.Base,n=t.enc.Utf8;t.algo.HMAC=e.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=n.parse(e));var r=t.blockSize,i=4*r;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var s=this._oKey=e.clone(),o=this._iKey=e.clone(),a=s.words,u=o.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})}();function rt(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function it(){return new rt(null)}"Microsoft Internet Explorer"==navigator.appName?(rt.prototype.am=function(t,e,n,r,i,s){for(var o=32767&e,a=e>>15;--s>=0;){var u=32767&this[t],c=this[t++]>>15,h=a*u+c*o;i=((u=o*u+((32767&h)<<15)+n[r]+(1073741823&i))>>>30)+(h>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},U=30):"Netscape"!=navigator.appName?(rt.prototype.am=function(t,e,n,r,i,s){for(;--s>=0;){var o=e*this[t++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},U=26):(rt.prototype.am=function(t,e,n,r,i,s){for(var o=16383&e,a=e>>14;--s>=0;){var u=16383&this[t],c=this[t++]>>14,h=a*u+c*o;i=((u=o*u+((16383&h)<<14)+n[r]+i)>>28)+(h>>14)+a*c,n[r++]=268435455&u}return i},U=28),rt.prototype.DB=U,rt.prototype.DM=(1<<U)-1,rt.prototype.DV=1<<U;rt.prototype.FV=Math.pow(2,52),rt.prototype.F1=52-U,rt.prototype.F2=2*U-52;var st,ot,at=new Array;for(st="0".charCodeAt(0),ot=0;ot<=9;++ot)at[st++]=ot;for(st="a".charCodeAt(0),ot=10;ot<36;++ot)at[st++]=ot;for(st="A".charCodeAt(0),ot=10;ot<36;++ot)at[st++]=ot;function ut(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function ct(t,e){var n=at[t.charCodeAt(e)];return null==n?-1:n}function ht(t){var e=it();return e.fromInt(t),e}function ft(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function lt(t){this.m=t}function dt(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function gt(t,e){return t&e}function pt(t,e){return t|e}function yt(t,e){return t^e}function vt(t,e){return t&~e}function mt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function St(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function xt(){}function bt(t){return t}function At(t){this.r2=it(),this.q3=it(),rt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}lt.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},lt.prototype.revert=function(t){return t},lt.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},lt.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},lt.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},dt.prototype.convert=function(t){var e=it();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(rt.ZERO)>0&&this.m.subTo(e,e),e},dt.prototype.revert=function(t){var e=it();return t.copyTo(e),this.reduce(e),e},dt.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},dt.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},dt.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},rt.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},rt.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},rt.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,s=0;--r>=0;){var o=8==n?255&t[r]:ct(t,r);o<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==s?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&rt.ZERO.subTo(this,this)},rt.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},rt.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},rt.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},rt.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+o+1]=this[n]>>i|a,a=(this[n]&s)<<r;for(n=o-1;n>=0;--n)e[n]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},rt.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,s=(1<<r)-1;e[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&s)<<i,e[o-n]=this[o]>>r;r>0&&(e[this.t-n-1]|=(this.s&s)<<i),e.t=this.t-n,e.clamp()}},rt.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},rt.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&rt.ZERO.subTo(e,e)},rt.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},rt.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=it());var s=it(),o=this.s,a=t.s,u=this.DB-ft(r[r.t-1]);u>0?(r.lShiftTo(u,s),i.lShiftTo(u,n)):(r.copyTo(s),i.copyTo(n));var c=s.t,h=s[c-1];if(0!=h){var f=h*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),l=this.FV/f,d=(1<<this.F1)/f,g=1<<this.F2,p=n.t,y=p-c,v=null==e?it():e;for(s.dlShiftTo(y,v),n.compareTo(v)>=0&&(n[n.t++]=1,n.subTo(v,n)),rt.ONE.dlShiftTo(c,v),v.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--y>=0;){var m=n[--p]==h?this.DM:Math.floor(n[p]*l+(n[p-1]+g)*d);if((n[p]+=s.am(0,m,n,y,0,c))<m)for(s.dlShiftTo(y,v),n.subTo(v,n);n[p]<--m;)n.subTo(v,n)}null!=e&&(n.drShiftTo(c,e),o!=a&&rt.ZERO.subTo(e,e)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&rt.ZERO.subTo(n,n)}}},rt.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},rt.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},rt.prototype.exp=function(t,e){if(t>4294967295||t<1)return rt.ONE;var n=it(),r=it(),i=e.convert(this),s=ft(t)-1;for(i.copyTo(n);--s>=0;)if(e.sqrTo(n,r),(t&1<<s)>0)e.mulTo(r,i,n);else{var o=n;n=r,r=o}return e.revert(n)},rt.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,s=ut(n));o>=0;)a<e?(n=(this[o]&(1<<a)-1)<<e-a,n|=this[--o]>>(a+=this.DB-e)):(n=this[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=ut(n));return i?s:"0"},rt.prototype.negate=function(){var t=it();return rt.ZERO.subTo(this,t),t},rt.prototype.abs=function(){return this.s<0?this.negate():this},rt.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},rt.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+ft(this[this.t-1]^this.s&this.DM)},rt.prototype.mod=function(t){var e=it();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(rt.ZERO)>0&&t.subTo(e,e),e},rt.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new lt(e):new dt(e),this.exp(t,n)},rt.ZERO=ht(0),rt.ONE=ht(1),xt.prototype.convert=bt,xt.prototype.revert=bt,xt.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},xt.prototype.sqrTo=function(t,e){t.squareTo(e)},At.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=it();return t.copyTo(e),this.reduce(e),e},At.prototype.revert=function(t){return t},At.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},At.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},At.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var Ft=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Et=(1<<26)/Ft[Ft.length-1];rt.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},rt.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=ht(n),i=it(),s=it(),o="";for(this.divRemTo(r,i,s);i.signum()>0;)o=(n+s.intValue()).toString(t).substr(1)+o,i.divRemTo(r,i,s);return s.intValue().toString(t)+o},rt.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,s=0,o=0,a=0;a<t.length;++a){var u=ct(t,a);u<0?"-"==t.charAt(a)&&0==this.signum()&&(i=!0):(o=e*o+u,++s>=n&&(this.dMultiply(r),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&rt.ZERO.subTo(this,this)},rt.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(rt.ONE.shiftLeft(t-1),pt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(rt.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=1+(t>>3),e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},rt.prototype.bitwiseTo=function(t,e,n){var r,i,s=Math.min(t.t,this.t);for(r=0;r<s;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=s;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},rt.prototype.changeBit=function(t,e){var n=rt.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},rt.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},rt.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},rt.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},rt.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},rt.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},rt.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},rt.prototype.millerRabin=function(t){var e=this.subtract(rt.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>Ft.length&&(t=Ft.length);for(var i=it(),s=0;s<t;++s){i.fromInt(Ft[Math.floor(Math.random()*Ft.length)]);var o=i.modPow(r,this);if(0!=o.compareTo(rt.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<n&&0!=o.compareTo(e);)if(0==(o=o.modPowInt(2,this)).compareTo(rt.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0},rt.prototype.clone=function(){var t=it();return this.copyTo(t),t},rt.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},rt.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},rt.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},rt.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},rt.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},rt.prototype.equals=function(t){return 0==this.compareTo(t)},rt.prototype.min=function(t){return this.compareTo(t)<0?this:t},rt.prototype.max=function(t){return this.compareTo(t)>0?this:t},rt.prototype.and=function(t){var e=it();return this.bitwiseTo(t,gt,e),e},rt.prototype.or=function(t){var e=it();return this.bitwiseTo(t,pt,e),e},rt.prototype.xor=function(t){var e=it();return this.bitwiseTo(t,yt,e),e},rt.prototype.andNot=function(t){var e=it();return this.bitwiseTo(t,vt,e),e},rt.prototype.not=function(){for(var t=it(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},rt.prototype.shiftLeft=function(t){var e=it();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},rt.prototype.shiftRight=function(t){var e=it();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},rt.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+mt(this[t]);return this.s<0?this.t*this.DB:-1},rt.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=St(this[n]^e);return t},rt.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},rt.prototype.setBit=function(t){return this.changeBit(t,pt)},rt.prototype.clearBit=function(t){return this.changeBit(t,vt)},rt.prototype.flipBit=function(t){return this.changeBit(t,yt)},rt.prototype.add=function(t){var e=it();return this.addTo(t,e),e},rt.prototype.subtract=function(t){var e=it();return this.subTo(t,e),e},rt.prototype.multiply=function(t){var e=it();return this.multiplyTo(t,e),e},rt.prototype.divide=function(t){var e=it();return this.divRemTo(t,e,null),e},rt.prototype.remainder=function(t){var e=it();return this.divRemTo(t,null,e),e},rt.prototype.divideAndRemainder=function(t){var e=it(),n=it();return this.divRemTo(t,e,n),new Array(e,n)},rt.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),s=ht(1);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new lt(e):e.isEven()?new At(e):new dt(e);var o=new Array,a=3,u=n-1,c=(1<<n)-1;if(o[1]=r.convert(this),n>1){var h=it();for(r.sqrTo(o[1],h);a<=c;)o[a]=it(),r.mulTo(h,o[a-2],o[a]),a+=2}var f,l,d=t.t-1,g=!0,p=it();for(i=ft(t[d])-1;d>=0;){for(i>=u?f=t[d]>>i-u&c:(f=(t[d]&(1<<i+1)-1)<<u-i,d>0&&(f|=t[d-1]>>this.DB+i-u)),a=n;0==(1&f);)f>>=1,--a;if((i-=a)<0&&(i+=this.DB,--d),g)o[f].copyTo(s),g=!1;else{for(;a>1;)r.sqrTo(s,p),r.sqrTo(p,s),a-=2;a>0?r.sqrTo(s,p):(l=s,s=p,p=l),r.mulTo(p,o[f],s)}for(;d>=0&&0==(t[d]&1<<i);)r.sqrTo(s,p),l=s,s=p,p=l,--i<0&&(i=this.DB-1,--d)}return r.revert(s)},rt.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return rt.ZERO;for(var n=t.clone(),r=this.clone(),i=ht(1),s=ht(0),o=ht(0),a=ht(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(o,i),s.subTo(a,s)):(r.subTo(n,r),e&&o.subTo(i,o),a.subTo(s,a))}return 0!=r.compareTo(rt.ONE)?rt.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},rt.prototype.pow=function(t){return this.exp(t,new xt)},rt.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),n.rShiftTo(s,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n},rt.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=Ft[Ft.length-1]){for(e=0;e<Ft.length;++e)if(n[0]==Ft[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<Ft.length;){for(var r=Ft[e],i=e+1;i<Ft.length&&r<Et;)r*=Ft[i++];for(r=n.modInt(r);e<i;)if(r%Ft[e++]==0)return!1}return n.millerRabin(t)},rt.prototype.square=function(){var t=it();return this.squareTo(t),t};var wt=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(t,e,r){return e?n[e]:String.fromCharCode(parseInt(r,16))}var i=new String(""),s=Object.hasOwnProperty;return function(n,o){var a,u,c=n.match(t),h=c[0],f=!1;"{"===h?a={}:"["===h?a=[]:(a=[],f=!0);for(var l=[a],d=1-f,g=c.length;d<g;++d){var p;switch((h=c[d]).charCodeAt(0)){default:(p=l[0])[u||p.length]=+h,u=void 0;break;case 34:if(-1!==(h=h.substring(1,h.length-1)).indexOf("\\")&&(h=h.replace(e,r)),p=l[0],!u){if(!(p instanceof Array)){u=h||i;break}u=p.length}p[u]=h,u=void 0;break;case 91:p=l[0],l.unshift(p[u||p.length]=[]),u=void 0;break;case 93:l.shift();break;case 102:(p=l[0])[u||p.length]=!1,u=void 0;break;case 110:(p=l[0])[u||p.length]=null,u=void 0;break;case 116:(p=l[0])[u||p.length]=!0,u=void 0;break;case 123:p=l[0],l.unshift(p[u||p.length]={}),u=void 0;break;case 125:l.shift()}}if(f){if(1!==l.length)throw new Error;a=a[0]}else if(l.length)throw new Error;if(o){var y=function(t,e){var n=t[e];if(n&&"object"==typeof n){var r=null;for(var i in n)if(s.call(n,i)&&n!==t){var a=y(n,i);void 0!==a?n[i]=a:(r||(r=[]),r.push(i))}if(r)for(var u=r.length;--u>=0;)delete n[r[u]]}return o.call(t,e,n)};a=y({"":a},"")}return a}}();void 0!==f&&f||(f={}),void 0!==f.jws&&f.jws||(f.jws={}),f.jws.JWS=function(){var t=f.jws.JWS;this.parseJWS=function(e,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],s=r[2],o=r[3],a=i+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=a,!n){var u=w(o),c=Y(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var h=d(i),f=d(s);if(this.parsedJWS.headS=h,this.parsedJWS.payloadS=f,!t.isSafeJSONString(h,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+h}}},f.jws.JWS.sign=function(t,e,n,r,i){var s,o,a,u=f.jws.JWS;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(o=e,s=JSON.stringify(o)),"string"==typeof e){if(s=e,!u.isSafeJSONString(s))throw"JWS Head is not safe JSON string: "+s;o=u.readSafeJSONString(s)}if(a=n,"object"==typeof n&&(a=JSON.stringify(n)),""!=t&&null!=t||void 0===o.alg||(t=o.alg),""!=t&&null!=t&&void 0===o.alg&&(o.alg=t,s=JSON.stringify(o)),t!==o.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+o.alg;var c=null;if(void 0===u.jwsalg2sigalg[t])throw"unsupported alg name: "+t;c=u.jwsalg2sigalg[t];var h=l(s)+"."+l(a),d="";if("Hmac"==c.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var g=new f.crypto.Mac({alg:c,prov:"cryptojs",pass:r});g.updateString(h),d=g.doFinal()}else if(-1!=c.indexOf("withECDSA")){(p=new f.crypto.Signature({alg:c})).init(r,i),p.updateString(h),hASN1Sig=p.sign(),d=f.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)}else if("none"!=c){var p;(p=new f.crypto.Signature({alg:c})).init(r,i),p.updateString(h),d=p.sign()}return h+"."+E(d)},f.jws.JWS.verify=function(t,e,n){var r=f.jws.JWS,i=t.split("."),s=i[0]+"."+i[1],o=w(i[2]),a=r.readSafeJSONString(d(i[0])),u=null,c=null;if(void 0===a.alg)throw"algorithm not specified in header";if((c=(u=a.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0)&&-1==(":"+n.join(":")+":").indexOf(":"+u+":"))throw"algorithm '"+u+"' not accepted in the list";if("none"!=u&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=Rt.getKey(e)),!("RS"!=c&&"PS"!=c||e instanceof Z))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==c&&!(e instanceof f.crypto.ECDSA))throw"key shall be a ECDSA obj for ES* algs";var h=null;if(void 0===r.jwsalg2sigalg[a.alg])throw"unsupported alg name: "+u;if("none"==(h=r.jwsalg2sigalg[u]))throw"not supported";if("Hmac"==h.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var l=new f.crypto.Mac({alg:h,pass:e});return l.updateString(s),o==l.doFinal()}if(-1!=h.indexOf("withECDSA")){var g,p=null;try{p=f.crypto.ECDSA.concatSigToASN1Sig(o)}catch(t){return!1}return(g=new f.crypto.Signature({alg:h})).init(e),g.updateString(s),g.verify(p)}return(g=new f.crypto.Signature({alg:h})).init(e),g.updateString(s),g.verify(o)},f.jws.JWS.parse=function(t){var e,n,r,i=t.split("."),s={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=i[0],n=i[1],3==i.length&&(r=i[2]),s.headerObj=f.jws.JWS.readSafeJSONString(d(e)),s.payloadObj=f.jws.JWS.readSafeJSONString(d(n)),s.headerPP=JSON.stringify(s.headerObj,null,"  "),null==s.payloadObj?s.payloadPP=d(n):s.payloadPP=JSON.stringify(s.payloadObj,null,"  "),void 0!==r&&(s.sigHex=w(r)),s},f.jws.JWS.verifyJWT=function(t,e,n){var r=f.jws.JWS,i=t.split("."),s=i[0],o=i[1],a=(w(i[2]),r.readSafeJSONString(d(s))),u=r.readSafeJSONString(d(o));if(void 0===a.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!r.inArray(a.alg,n.alg))return!1;if(void 0!==u.iss&&"object"==typeof n.iss&&!r.inArray(u.iss,n.iss))return!1;if(void 0!==u.sub&&"object"==typeof n.sub&&!r.inArray(u.sub,n.sub))return!1;if(void 0!==u.aud&&"object"==typeof n.aud)if("string"==typeof u.aud){if(!r.inArray(u.aud,n.aud))return!1}else if("object"==typeof u.aud&&!r.includedArray(u.aud,n.aud))return!1;var c=f.jws.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(c=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==u.exp&&"number"==typeof u.exp&&u.exp+n.gracePeriod<c)&&(!(void 0!==u.nbf&&"number"==typeof u.nbf&&c<u.nbf-n.gracePeriod)&&(!(void 0!==u.iat&&"number"==typeof u.iat&&c<u.iat-n.gracePeriod)&&((void 0===u.jti||void 0===n.jti||u.jti===n.jti)&&!!f.jws.JWS.verify(t,e,n.alg))))},f.jws.JWS.includedArray=function(t,e){var n=f.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e))return!1;return!0},f.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},f.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},f.jws.JWS.isSafeJSONString=function(t,e,n){var r=null;try{return"object"!=typeof(r=wt(t))||r.constructor===Array?0:(e&&(e[n]=r),1)}catch(t){return 0}},f.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=wt(t))||e.constructor===Array?null:e}catch(t){return null}},f.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},f.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var n=H(e);return E(f.crypto.Util.hashHex(n,"sha256"))},f.jws.IntDate={},f.jws.IntDate.get=function(t){if("now"==t)return f.jws.IntDate.getNow();if("now + 1hour"==t)return f.jws.IntDate.getNow()+3600;if("now + 1day"==t)return f.jws.IntDate.getNow()+86400;if("now + 1month"==t)return f.jws.IntDate.getNow()+2592e3;if("now + 1year"==t)return f.jws.IntDate.getNow()+31536e3;if(t.match(/Z$/))return f.jws.IntDate.getZulu(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},f.jws.IntDate.getZulu=function(t){var e=t.match(/(\d+)(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)Z/);if(e){var n=e[1],r=parseInt(n);if(4==n.length);else{if(2!=n.length)throw"malformed year string";if(50<=r&&r<100)r=1900+r;else{if(!(0<=r&&r<50))throw"malformed year string for UTCTime";r=2e3+r}}var i=parseInt(e[2])-1,s=parseInt(e[3]),o=parseInt(e[4]),a=parseInt(e[5]),u=parseInt(e[6]);return~~(new Date(Date.UTC(r,i,s,o,a,u))/1e3)}throw"unsupported format: "+t},f.jws.IntDate.getNow=function(){return~~(new Date/1e3)},f.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},f.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},void 0!==f&&f||(f={}),void 0!==f.jws&&f.jws||(f.jws={}),f.jws.JWSJS=function(){var t=f.jws.JWS,e=f.jws.JWS;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,n,r){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=f.jws.JWS.sign(t,e,this.sPayload,n,r).split(".");s[0],s[2];this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(t){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+t}},this.addSignatureByHeaderKey=function(t,e){var n=d(this.sPayload),r=new f.jws.JWS;r.generateJWSByP1PrvKey(t,n,e);this.aHeader.push(r.parsedJWS.headB64U),this.aSignature.push(r.parsedJWS.sigvalB64U)},this.addSignatureByHeaderPayloadKey=function(t,e,n){var r=new f.jws.JWS;r.generateJWSByP1PrvKey(t,e,n);this.aHeader.push(r.parsedJWS.headB64U),this.sPayload=r.parsedJWS.payloadB64U,this.aSignature.push(r.parsedJWS.sigvalB64U)},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(2!==n.length)return!1;if(!1===this.verifyNth(e,n[0],n[1]))return!1}return!0},this.verifyNth=function(t,n,r){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var i=this.aHeader[t],s=this.aSignature[t],o=i+"."+this.sPayload+"."+s,a=!1;try{a=e.verify(o,n,r)}catch(t){return!1}return a},this.verifyWithCerts=function(t){if(this.aHeader.length!=t.length)throw"num headers does not match with num certs";if(this.aSignature.length!=t.length)throw"num signatures does not match with num certs";for(var e=this.sPayload,n="",r=0;r<t.length;r++){var i=t[r],s=this.aHeader[r]+"."+e+"."+this.aSignature[r],o=new f.jws.JWS;try{1!=o.verifyJWSByPemX509Cert(s,i)&&(n+=r+1+"th signature unmatch. ")}catch(t){n+=r+1+"th signature fail("+t+"). "}}if(""==n)return 1;throw n},this.readJWSJS=function(e){if("string"==typeof e){var n=t.readSafeJSONString(e);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(e.headers.length>0))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(e.signatures.length>0))throw"malformed signatures";this.signatures=e.signatures}catch(t){throw"malformed JWS-JS JSON object: "+t}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}};var Ot,Pt,Ct,Ht,Dt,It,jt,Tt,Rt=(Ot=function(t,e,n){return Pt(u.AES,t,e,n)},Pt=function(t,e,n,r){var i=u.enc.Hex.parse(e),s=u.enc.Hex.parse(n),o=u.enc.Hex.parse(r),a={};a.key=s,a.iv=o,a.ciphertext=i;var c=t.decrypt(a,s,{iv:o});return u.enc.Hex.stringify(c)},Ct=function(t,e,n){return Ht(u.AES,t,e,n)},Ht=function(t,e,n,r){var i=u.enc.Hex.parse(e),s=u.enc.Hex.parse(n),o=u.enc.Hex.parse(r),a=t.encrypt(i,s,{iv:o}),c=u.enc.Hex.parse(a.toString());return u.enc.Base64.stringify(c)},Dt={"AES-256-CBC":{proc:Ot,eproc:Ct,keylen:32,ivlen:16},"AES-192-CBC":{proc:Ot,eproc:Ct,keylen:24,ivlen:16},"AES-128-CBC":{proc:Ot,eproc:Ct,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,e,n){return Pt(u.TripleDES,t,e,n)},eproc:function(t,e,n){return Ht(u.TripleDES,t,e,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,e,n){return Pt(u.DES,t,e,n)},eproc:function(t,e,n){return Ht(u.DES,t,e,n)},keylen:8,ivlen:8}},It=function(t){var e={},n=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(e.cipher=n[1],e.ivsalt=n[2]);var r=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(e.type=r[1]);var i=-1,s=0;-1!=t.indexOf("\r\n\r\n")&&(i=t.indexOf("\r\n\r\n"),s=2),-1!=t.indexOf("\n\n")&&(i=t.indexOf("\n\n"),s=1);var o=t.indexOf("-----END");if(-1!=i&&-1!=o){var a=t.substring(i+2*s,o-s);a=a.replace(/\s+/g,""),e.data=a}return e},jt=function(t,e,n){for(var r=n.substring(0,16),i=u.enc.Hex.parse(r),s=u.enc.Utf8.parse(e),o=Dt[t].keylen+Dt[t].ivlen,a="",c=null;;){var h=u.algo.MD5.create();if(null!=c&&h.update(c),h.update(s),h.update(i),c=h.finalize(),(a+=u.enc.Hex.stringify(c)).length>=2*o)break}var f={};return f.keyhex=a.substr(0,2*Dt[t].keylen),f.ivhex=a.substr(2*Dt[t].keylen,2*Dt[t].ivlen),f},Tt=function(t,e,n,r){var i=u.enc.Base64.parse(t),s=u.enc.Hex.stringify(i);return(0,Dt[e].proc)(s,n,r)},{version:"1.0.0",getHexFromPEM:function(t,e){var n=t;if(-1==n.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return y((n="string"==typeof e&&""!=e?(n=n.replace("-----BEGIN "+e+"-----","")).replace("-----END "+e+"-----",""):(n=n.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,"")).replace(/\s+/g,""))},getDecryptedKeyHexByKeyIV:function(t,e,n,r){return function(t){return Dt[t].proc}(e)(t,n,r)},parsePKCS5PEM:function(t){return It(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,n){return jt(t,e,n)},decryptKeyB64:function(t,e,n,r){return Tt(t,e,n,r)},getDecryptedKeyHex:function(t,e){var n=It(t),r=(n.type,n.cipher),i=n.ivsalt,s=n.data,o=jt(r,e,i).keyhex;return Tt(s,r,o,i)},getRSAKeyFromEncryptedPKCS5PEM:function(t,e){var n=this.getDecryptedKeyHex(t,e),r=new Z;return r.readPrivateKeyFromASN1HexString(n),r},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,n,r,i){var s,o,a="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===Dt[r])throw"KEYUTIL unsupported algorithm: "+r;if(void 0===i||null==i){var c=Dt[r].ivlen;i=(s=c,o=u.lib.WordArray.random(s),u.enc.Hex.stringify(o)).toUpperCase()}return a="-----BEGIN "+t+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+i+"\r\n",a+="\r\n",a+=function(t,e,n,r){return(0,Dt[e].eproc)(t,n,r)}(e,r,jt(r,n,i).keyhex,i).replace(/(.{64})/g,"$1\r\n"),a+="\r\n-----END "+t+" PRIVATE KEY-----\r\n"},getEncryptedPKCS5PEMFromRSAKey:function(t,e,n,r){var i=new f.asn1.DERInteger({int:0}),s=new f.asn1.DERInteger({bigint:t.n}),o=new f.asn1.DERInteger({int:t.e}),a=new f.asn1.DERInteger({bigint:t.d}),u=new f.asn1.DERInteger({bigint:t.p}),c=new f.asn1.DERInteger({bigint:t.q}),h=new f.asn1.DERInteger({bigint:t.dmp1}),l=new f.asn1.DERInteger({bigint:t.dmq1}),d=new f.asn1.DERInteger({bigint:t.coeff}),g=new f.asn1.DERSequence({array:[i,s,o,a,u,c,h,l,d]}).getEncodedHex();return this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",g,e,n,r)},newEncryptedPKCS5PEM:function(t,e,n,r){void 0!==e&&null!=e||(e=1024),void 0!==n&&null!=n||(n="10001");var i=new Z;return i.generate(e,n),void 0===r||null==r?this.getEncryptedPKCS5PEMFromRSAKey(i,t):this.getEncryptedPKCS5PEMFromRSAKey(i,t,r)},getRSAKeyFromPlainPKCS8PEM:function(t){if(t.match(/ENCRYPTED/))throw"pem shall be not ENCRYPTED";var e=this.getHexFromPEM(t,"PRIVATE KEY");return this.getRSAKeyFromPlainPKCS8Hex(e)},getRSAKeyFromPlainPKCS8Hex:function(t){var e=h.getPosArrayOfChildren_AtObj(t,0);if(3!=e.length)throw"outer DERSequence shall have 3 elements: "+e.length;if("300d06092a864886f70d0101010500"!=(n=h.getHexOfTLV_AtObj(t,e[1])))throw"PKCS8 AlgorithmIdentifier is not rsaEnc: "+n;var n=h.getHexOfTLV_AtObj(t,e[1]),r=h.getHexOfTLV_AtObj(t,e[2]),i=h.getHexOfV_AtObj(r,0),s=new Z;return s.readPrivateKeyFromASN1HexString(i),s},parseHexOfEncryptedPKCS8:function(t){var e={},n=h.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"malformed format: SEQUENCE(0).items != 2: "+n.length;e.ciphertext=h.getHexOfV_AtObj(t,n[1]);var r=h.getPosArrayOfChildren_AtObj(t,n[0]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+r.length;if("2a864886f70d01050d"!=h.getHexOfV_AtObj(t,r[0]))throw"this only supports pkcs5PBES2";var i=h.getPosArrayOfChildren_AtObj(t,r[1]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+i.length;var s=h.getPosArrayOfChildren_AtObj(t,i[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+s.length;if("2a864886f70d0307"!=h.getHexOfV_AtObj(t,s[0]))throw"this only supports TripleDES";e.encryptionSchemeAlg="TripleDES",e.encryptionSchemeIV=h.getHexOfV_AtObj(t,s[1]);var o=h.getPosArrayOfChildren_AtObj(t,i[0]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+o.length;if("2a864886f70d01050c"!=h.getHexOfV_AtObj(t,o[0]))throw"this only supports pkcs5PBKDF2";var a=h.getPosArrayOfChildren_AtObj(t,o[1]);if(a.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+a.length;e.pbkdf2Salt=h.getHexOfV_AtObj(t,a[0]);var u=h.getHexOfV_AtObj(t,a[1]);try{e.pbkdf2Iter=parseInt(u,16)}catch(t){throw"malformed format pbkdf2Iter: "+u}return e},getPBKDF2KeyHexFromParam:function(t,e){var n=u.enc.Hex.parse(t.pbkdf2Salt),r=t.pbkdf2Iter,i=u.PBKDF2(e,n,{keySize:6,iterations:r});return u.enc.Hex.stringify(i)},getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var n=this.getHexFromPEM(t,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=Rt.getPBKDF2KeyHexFromParam(r,e),s={};s.ciphertext=u.enc.Hex.parse(r.ciphertext);var o=u.enc.Hex.parse(i),a=u.enc.Hex.parse(r.encryptionSchemeIV),c=u.TripleDES.decrypt(s,o,{iv:a});return u.enc.Hex.stringify(c)},getRSAKeyFromEncryptedPKCS8PEM:function(t,e){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getRSAKeyFromPlainPKCS8Hex(n)},getKeyFromEncryptedPKCS8PEM:function(t,e){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(t){var e={algparam:null};if("30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var n=h.getPosArrayOfChildren_AtObj(t,0);if(3!=n.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(n[1],2))throw"malformed PKCS8 private key(code:003)";var r=h.getPosArrayOfChildren_AtObj(t,n[1]);if(2!=r.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(r[0],2))throw"malformed PKCS8 private key(code:005)";if(e.algoid=h.getHexOfV_AtObj(t,r[0]),"06"==t.substr(r[1],2)&&(e.algparam=h.getHexOfV_AtObj(t,r[1])),"04"!=t.substr(n[2],2))throw"malformed PKCS8 private key(code:006)";return e.keyidx=h.getStartPosOfV_AtObj(t,n[2]),e},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==e.algoid){this.parsePrivateRawRSAKeyHexAtObj(t,e);var n=e.key;return(i=new Z).setPrivateEx(n.n,n.e,n.d,n.p,n.q,n.dp,n.dq,n.co),i}if("2a8648ce3d0201"==e.algoid){if(this.parsePrivateRawECKeyHexAtObj(t,e),void 0===f.crypto.OID.oidhex2name[e.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+e.algparam;var r=f.crypto.OID.oidhex2name[e.algparam];return(i=new f.crypto.ECDSA({curve:r})).setPublicKeyHex(e.pubkey),i.setPrivateKeyHex(e.key),i.isPublic=!1,i}if("2a8648ce380401"==e.algoid){var i,s=h.getVbyList(t,0,[1,1,0],"02"),o=h.getVbyList(t,0,[1,1,1],"02"),a=h.getVbyList(t,0,[1,1,2],"02"),u=h.getVbyList(t,0,[2,0],"02"),c=new rt(s,16),l=new rt(o,16),d=new rt(a,16),g=new rt(u,16);return(i=new f.crypto.DSA).setPrivate(c,l,d,null,g),i}throw"unsupported private key algorithm"},getRSAKeyFromPublicPKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PUBLIC KEY");return this.getRSAKeyFromPublicPKCS8Hex(e)},getKeyFromPublicPKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PUBLIC KEY");return this.getKeyFromPublicPKCS8Hex(e)},getKeyFromPublicPKCS8Hex:function(t){var e=this.parsePublicPKCS8Hex(t);if("2a864886f70d010101"==e.algoid){var n=this.parsePublicRawRSAKeyHex(e.key);return(i=new Z).setPublic(n.n,n.e),i}if("2a8648ce3d0201"==e.algoid){if(void 0===f.crypto.OID.oidhex2name[e.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+e.algparam;var r=f.crypto.OID.oidhex2name[e.algparam];return i=new f.crypto.ECDSA({curve:r,pub:e.key})}if("2a8648ce380401"==e.algoid){var i,s=e.algparam,o=h.getHexOfV_AtObj(e.key,0);return(i=new f.crypto.DSA).setPublic(new rt(s.p,16),new rt(s.q,16),new rt(s.g,16),new rt(o,16)),i}throw"unsupported public key algorithm"},parsePublicRawRSAKeyHex:function(t){var e={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var n=h.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(n[0],2))throw"malformed RSA key(code:003)";if(e.n=h.getHexOfV_AtObj(t,n[0]),"02"!=t.substr(n[1],2))throw"malformed RSA key(code:004)";return e.e=h.getHexOfV_AtObj(t,n[1]),e},parsePrivateRawRSAKeyHexAtObj:function(t,e){var n=e.keyidx;if("30"!=t.substr(n,2))throw"malformed RSA private key(code:001)";var r=h.getPosArrayOfChildren_AtObj(t,n);if(9!=r.length)throw"malformed RSA private key(code:002)";e.key={},e.key.n=h.getHexOfV_AtObj(t,r[1]),e.key.e=h.getHexOfV_AtObj(t,r[2]),e.key.d=h.getHexOfV_AtObj(t,r[3]),e.key.p=h.getHexOfV_AtObj(t,r[4]),e.key.q=h.getHexOfV_AtObj(t,r[5]),e.key.dp=h.getHexOfV_AtObj(t,r[6]),e.key.dq=h.getHexOfV_AtObj(t,r[7]),e.key.co=h.getHexOfV_AtObj(t,r[8])},parsePrivateRawECKeyHexAtObj:function(t,e){var n=e.keyidx,r=h.getVbyList(t,n,[1],"04"),i=h.getVbyList(t,n,[2,0],"03").substr(2);e.key=r,e.pubkey=i},parsePublicPKCS8Hex:function(t){var e={algparam:null},n=h.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"outer DERSequence shall have 2 elements: "+n.length;var r=n[0];if("30"!=t.substr(r,2))throw"malformed PKCS8 public key(code:001)";var i=h.getPosArrayOfChildren_AtObj(t,r);if(2!=i.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(i[0],2))throw"malformed PKCS8 public key(code:003)";if(e.algoid=h.getHexOfV_AtObj(t,i[0]),"06"==t.substr(i[1],2)?e.algparam=h.getHexOfV_AtObj(t,i[1]):"30"==t.substr(i[1],2)&&(e.algparam={},e.algparam.p=h.getVbyList(t,i[1],[0],"02"),e.algparam.q=h.getVbyList(t,i[1],[1],"02"),e.algparam.g=h.getVbyList(t,i[1],[2],"02")),"03"!=t.substr(n[1],2))throw"malformed PKCS8 public key(code:004)";return e.key=h.getHexOfV_AtObj(t,n[1]).substr(2),e},getRSAKeyFromPublicPKCS8Hex:function(t){var e=h.getPosArrayOfChildren_AtObj(t,0);if(2!=e.length)throw"outer DERSequence shall have 2 elements: "+e.length;if("300d06092a864886f70d0101010500"!=h.getHexOfTLV_AtObj(t,e[0]))throw"PKCS8 AlgorithmId is not rsaEncryption";if("03"!=t.substr(e[1],2))throw"PKCS8 Public Key is not BITSTRING encapslated.";var n=h.getStartPosOfV_AtObj(t,e[1])+2;if("30"!=t.substr(n,2))throw"PKCS8 Public Key is not SEQUENCE.";var r=h.getPosArrayOfChildren_AtObj(t,n);if(2!=r.length)throw"inner DERSequence shall have 2 elements: "+r.length;if("02"!=t.substr(r[0],2))throw"N is not ASN.1 INTEGER";if("02"!=t.substr(r[1],2))throw"E is not ASN.1 INTEGER";var i=h.getHexOfV_AtObj(t,r[0]),s=h.getHexOfV_AtObj(t,r[1]),o=new Z;return o.setPublic(i,s),o}});Rt.getKey=function(t,e,n){if(t instanceof Z)return t;if(void 0!==f.crypto.ECDSA&&t instanceof f.crypto.ECDSA)return t;if(void 0!==f.crypto.DSA&&t instanceof f.crypto.DSA)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new f.crypto.ECDSA({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new f.crypto.ECDSA({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(y=new Z).setPublic(t.n,t.e),y;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(y=new Z).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),y;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(y=new Z).setPrivate(t.n,t.e,t.d),y;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(y=new f.crypto.DSA).setPublic(t.p,t.q,t.g,t.y),y;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(y=new f.crypto.DSA).setPrivate(t.p,t.q,t.g,t.y,t.x),y;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(y=new Z).setPublic(w(t.n),w(t.e)),y;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(y=new Z).setPrivateEx(w(t.n),w(t.e),w(t.d),w(t.p),w(t.q),w(t.dp),w(t.dq),w(t.qi)),y;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(y=new Z).setPrivate(w(t.n),w(t.e),w(t.d)),y;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var r=(p=new f.crypto.ECDSA({curve:t.crv})).ecparams.keylen/4,i="04"+("0000000000"+w(t.x)).slice(-r)+("0000000000"+w(t.y)).slice(-r);return p.setPublicKeyHex(i),p}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){r=(p=new f.crypto.ECDSA({curve:t.crv})).ecparams.keylen/4,i="04"+("0000000000"+w(t.x)).slice(-r)+("0000000000"+w(t.y)).slice(-r);var s=("0000000000"+w(t.d)).slice(-r);return p.setPublicKeyHex(i),p.setPrivateKeyHex(s),p}if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return Xt.getPublicKeyFromCertPEM(t);if("pkcs8pub"===n)return Rt.getKeyFromPublicPKCS8Hex(t);if(-1!=t.indexOf("-END PUBLIC KEY-"))return Rt.getKeyFromPublicPKCS8PEM(t);if("pkcs5prv"===n)return(y=new Z).readPrivateKeyFromASN1HexString(t),y;if("pkcs5prv"===n)return(y=new Z).readPrivateKeyFromASN1HexString(t),y;if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var o=Rt.getHexFromPEM(t,"RSA PRIVATE KEY");return Rt.getKey(o,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var a=this.getHexFromPEM(t,"DSA PRIVATE KEY"),u=h.getVbyList(a,0,[1],"02"),c=h.getVbyList(a,0,[2],"02"),l=h.getVbyList(a,0,[3],"02"),d=h.getVbyList(a,0,[4],"02"),g=h.getVbyList(a,0,[5],"02");return(y=new f.crypto.DSA).setPrivate(new rt(u,16),new rt(c,16),new rt(l,16),new rt(d,16),new rt(g,16)),y}if(-1!=t.indexOf("-END PRIVATE KEY-"))return Rt.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED"))return Rt.getRSAKeyFromEncryptedPKCS5PEM(t,e);if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){a=Rt.getDecryptedKeyHex(t,e);var p,y=h.getVbyList(a,0,[1],"04"),v=h.getVbyList(a,0,[2,0],"06"),m=h.getVbyList(a,0,[3,0],"03").substr(2),S="";if(void 0===f.crypto.OID.oidhex2name[v])throw"undefined OID(hex) in KJUR.crypto.OID: "+v;return S=f.crypto.OID.oidhex2name[v],(p=new f.crypto.ECDSA({name:S})).setPublicKeyHex(m),p.setPrivateKeyHex(y),p.isPublic=!1,p}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){a=Rt.getDecryptedKeyHex(t,e),u=h.getVbyList(a,0,[1],"02"),c=h.getVbyList(a,0,[2],"02"),l=h.getVbyList(a,0,[3],"02"),d=h.getVbyList(a,0,[4],"02"),g=h.getVbyList(a,0,[5],"02");return(y=new f.crypto.DSA).setPrivate(new rt(u,16),new rt(c,16),new rt(l,16),new rt(d,16),new rt(g,16)),y}if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return Rt.getKeyFromEncryptedPKCS8PEM(t,e);throw"not supported argument"},Rt.generateKeypair=function(t,e){if("RSA"==t){var n=e;(o=new Z).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new Z,i=o.n.toString(16),s=o.e.toString(16);return r.setPublic(i,s),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}if("EC"==t){var o,a,u=e,c=new f.crypto.ECDSA({curve:u}).generateKeyPairHex();return(o=new f.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),o.setPrivateKeyHex(c.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new f.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}throw"unknown algorithm: "+t},Rt.getPEM=function(t,e,n,r,i){var s=f.asn1,o=f.crypto;function a(t){return f.asn1.ASN1Util.newObject({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function c(t){return f.asn1.ASN1Util.newObject({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function h(t){return f.asn1.ASN1Util.newObject({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((t instanceof Z||void 0!==o.DSA&&t instanceof o.DSA||void 0!==o.ECDSA&&t instanceof o.ECDSA)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e)){var l=new f.asn1.x509.SubjectPublicKeyInfo(t).getEncodedHex();return s.ASN1Util.getPEMStringFromHex(l,"PUBLIC KEY")}if("PKCS1PRV"==e&&t instanceof Z&&(void 0===n||null==n)&&1==t.isPrivate){l=a(t).getEncodedHex();return s.ASN1Util.getPEMStringFromHex(l,"RSA PRIVATE KEY")}if("PKCS1PRV"==e&&t instanceof f.crypto.ECDSA&&(void 0===n||null==n)&&1==t.isPrivate){var d=new f.asn1.DERObjectIdentifier({name:t.curveName}).getEncodedHex(),g=c(t).getEncodedHex(),p="";return p+=s.ASN1Util.getPEMStringFromHex(d,"EC PARAMETERS"),p+=s.ASN1Util.getPEMStringFromHex(g,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==f.crypto.DSA&&t instanceof f.crypto.DSA&&(void 0===n||null==n)&&1==t.isPrivate){l=h(t).getEncodedHex();return s.ASN1Util.getPEMStringFromHex(l,"DSA PRIVATE KEY")}if("PKCS5PRV"==e&&t instanceof Z&&void 0!==n&&null!=n&&1==t.isPrivate){l=a(t).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",l,n,r)}if("PKCS5PRV"==e&&void 0!==f.crypto.ECDSA&&t instanceof f.crypto.ECDSA&&void 0!==n&&null!=n&&1==t.isPrivate){l=c(t).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",l,n,r)}if("PKCS5PRV"==e&&void 0!==f.crypto.DSA&&t instanceof f.crypto.DSA&&void 0!==n&&null!=n&&1==t.isPrivate){l=h(t).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",l,n,r)}var y=function(t,e){var n=v(t,e);return new f.asn1.ASN1Util.newObject({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},v=function(t,e){var n=u.lib.WordArray.random(8),r=u.lib.WordArray.random(8),i=u.PBKDF2(e,n,{keySize:6,iterations:100}),s=u.enc.Hex.parse(t),o=u.TripleDES.encrypt(s,i,{iv:r})+"",a={};return a.ciphertext=o,a.pbkdf2Salt=u.enc.Hex.stringify(n),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=u.enc.Hex.stringify(r),a};if("PKCS8PRV"==e&&t instanceof Z&&1==t.isPrivate){var m=a(t).getEncodedHex();l=f.asn1.ASN1Util.newObject({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:m}}]}).getEncodedHex();if(void 0===n||null==n)return s.ASN1Util.getPEMStringFromHex(l,"PRIVATE KEY");g=y(l,n);return s.ASN1Util.getPEMStringFromHex(g,"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==f.crypto.ECDSA&&t instanceof f.crypto.ECDSA&&1==t.isPrivate){m=new f.asn1.ASN1Util.newObject({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),l=f.asn1.ASN1Util.newObject({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:m}}]}).getEncodedHex();if(void 0===n||null==n)return s.ASN1Util.getPEMStringFromHex(l,"PRIVATE KEY");g=y(l,n);return s.ASN1Util.getPEMStringFromHex(g,"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==f.crypto.DSA&&t instanceof f.crypto.DSA&&1==t.isPrivate){m=new f.asn1.DERInteger({bigint:t.x}).getEncodedHex(),l=f.asn1.ASN1Util.newObject({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:m}}]}).getEncodedHex();if(void 0===n||null==n)return s.ASN1Util.getPEMStringFromHex(l,"PRIVATE KEY");g=y(l,n);return s.ASN1Util.getPEMStringFromHex(g,"ENCRYPTED PRIVATE KEY")}throw"unsupported object nor format"},Rt.getKeyFromCSRPEM=function(t){var e=Rt.getHexFromPEM(t,"CERTIFICATE REQUEST");return Rt.getKeyFromCSRHex(e)},Rt.getKeyFromCSRHex=function(t){var e=Rt.parseCSRHex(t);return Rt.getKey(e.p8pubkeyhex,null,"pkcs8pub")},Rt.parseCSRHex=function(t){var e={},n=t;if("30"!=n.substr(0,2))throw"malformed CSR(code:001)";var r=h.getPosArrayOfChildren_AtObj(n,0);if(r.length<1)throw"malformed CSR(code:002)";if("30"!=n.substr(r[0],2))throw"malformed CSR(code:003)";var i=h.getPosArrayOfChildren_AtObj(n,r[0]);if(i.length<3)throw"malformed CSR(code:004)";return e.p8pubkeyhex=h.getHexOfTLV_AtObj(n,i[2]),e},Rt.getJWKFromKey=function(t){var e={};if(t instanceof Z&&t.isPrivate)return e.kty="RSA",e.n=E(t.n.toString(16)),e.e=E(t.e.toString(16)),e.d=E(t.d.toString(16)),e.p=E(t.p.toString(16)),e.q=E(t.q.toString(16)),e.dp=E(t.dmp1.toString(16)),e.dq=E(t.dmq1.toString(16)),e.qi=E(t.coeff.toString(16)),e;if(t instanceof Z&&t.isPublic)return e.kty="RSA",e.n=E(t.n.toString(16)),e.e=E(t.e.toString(16)),e;if(t instanceof f.crypto.ECDSA&&t.isPrivate){if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var n=t.getPublicKeyXYHex();return e.kty="EC",e.crv=r,e.x=E(n.x),e.y=E(n.y),e.d=E(t.prvKeyHex),e}if(t instanceof f.crypto.ECDSA&&t.isPublic){var r;if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;n=t.getPublicKeyXYHex();return e.kty="EC",e.crv=r,e.x=E(n.x),e.y=E(n.y),e}throw"not supported key object"};var Bt=function(){var t=function(t,n,r){return e(u.AES,t,n,r)},e=function(t,e,n,r){var i=u.enc.Hex.parse(e),s=u.enc.Hex.parse(n),o=u.enc.Hex.parse(r),a={};a.key=s,a.iv=o,a.ciphertext=i;var c=t.decrypt(a,s,{iv:o});return u.enc.Hex.stringify(c)},n=function(t,e,n){return r(u.AES,t,e,n)},r=function(t,e,n,r){var i=u.enc.Hex.parse(e),s=u.enc.Hex.parse(n),o=u.enc.Hex.parse(r),a=t.encrypt(i,s,{iv:o}),c=u.enc.Hex.parse(a.toString());return u.enc.Base64.stringify(c)},i={"AES-256-CBC":{proc:t,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,n,r){return e(u.TripleDES,t,n,r)},eproc:function(t,e,n){return r(u.TripleDES,t,e,n)},keylen:24,ivlen:8}},s=function(t){var e={},n=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(e.cipher=n[1],e.ivsalt=n[2]);var r=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(e.type=r[1]);var i=-1,s=0;-1!=t.indexOf("\r\n\r\n")&&(i=t.indexOf("\r\n\r\n"),s=2),-1!=t.indexOf("\n\n")&&(i=t.indexOf("\n\n"),s=1);var o=t.indexOf("-----END");if(-1!=i&&-1!=o){var a=t.substring(i+2*s,o-s);a=a.replace(/\s+/g,""),e.data=a}return e},o=function(t,e,n){for(var r=n.substring(0,16),s=u.enc.Hex.parse(r),o=u.enc.Utf8.parse(e),a=i[t].keylen+i[t].ivlen,c="",h=null;;){var f=u.algo.MD5.create();if(null!=h&&f.update(h),f.update(o),f.update(s),h=f.finalize(),(c+=u.enc.Hex.stringify(h)).length>=2*a)break}var l={};return l.keyhex=c.substr(0,2*i[t].keylen),l.ivhex=c.substr(2*i[t].keylen,2*i[t].ivlen),l},a=function(t,e,n,r){var s=u.enc.Base64.parse(t),o=u.enc.Hex.stringify(s);return(0,i[e].proc)(o,n,r)};return{version:"1.0.5",getHexFromPEM:function(t,e){var n=t;if(-1==n.indexOf("BEGIN "+e))throw"can't find PEM header: "+e;return y((n=(n=n.replace("-----BEGIN "+e+"-----","")).replace("-----END "+e+"-----","")).replace(/\s+/g,""))},getDecryptedKeyHexByKeyIV:function(t,e,n,r){return function(t){return i[t].proc}(e)(t,n,r)},parsePKCS5PEM:function(t){return s(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,n){return o(t,e,n)},decryptKeyB64:function(t,e,n,r){return a(t,e,n,r)},getDecryptedKeyHex:function(t,e){var n=s(t),r=(n.type,n.cipher),i=n.ivsalt,u=n.data,c=o(r,e,i).keyhex;return a(u,r,c,i)},getRSAKeyFromEncryptedPKCS5PEM:function(t,e){var n=this.getDecryptedKeyHex(t,e),r=new Z;return r.readPrivateKeyFromASN1HexString(n),r},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,n,r){if(void 0!==n&&null!=n||(n="AES-256-CBC"),void 0===i[n])throw"PKCS5PKEY unsupported algorithm: "+n;if(void 0===r||null==r){var s=i[n].ivlen;r=(a=s,c=u.lib.WordArray.random(a),u.enc.Hex.stringify(c)).toUpperCase()}var a,c,h="-----BEGIN RSA PRIVATE KEY-----\r\n";return h+="Proc-Type: 4,ENCRYPTED\r\n",h+="DEK-Info: "+n+","+r+"\r\n",h+="\r\n",h+=function(t,e,n,r){return(0,i[e].eproc)(t,n,r)}(t,n,o(n,e,r).keyhex,r).replace(/(.{64})/g,"$1\r\n"),h+="\r\n-----END RSA PRIVATE KEY-----\r\n"},getEncryptedPKCS5PEMFromRSAKey:function(t,e,n,r){var i=new f.asn1.DERInteger({int:0}),s=new f.asn1.DERInteger({bigint:t.n}),o=new f.asn1.DERInteger({int:t.e}),a=new f.asn1.DERInteger({bigint:t.d}),u=new f.asn1.DERInteger({bigint:t.p}),c=new f.asn1.DERInteger({bigint:t.q}),h=new f.asn1.DERInteger({bigint:t.dmp1}),l=new f.asn1.DERInteger({bigint:t.dmq1}),d=new f.asn1.DERInteger({bigint:t.coeff}),g=new f.asn1.DERSequence({array:[i,s,o,a,u,c,h,l,d]}).getEncodedHex();return this.getEncryptedPKCS5PEMFromPrvKeyHex(g,e,n,r)},newEncryptedPKCS5PEM:function(t,e,n,r){void 0!==e&&null!=e||(e=1024),void 0!==n&&null!=n||(n="10001"),(new Z).generate(e,n);return void 0===r||null==r?this.getEncryptedPKCS5PEMFromRSAKey(pkey,t):this.getEncryptedPKCS5PEMFromRSAKey(pkey,t,r)},getRSAKeyFromPlainPKCS8PEM:function(t){if(t.match(/ENCRYPTED/))throw"pem shall be not ENCRYPTED";var e=this.getHexFromPEM(t,"PRIVATE KEY");return this.getRSAKeyFromPlainPKCS8Hex(e)},getRSAKeyFromPlainPKCS8Hex:function(t){var e=h.getPosArrayOfChildren_AtObj(t,0);if(3!=e.length)throw"outer DERSequence shall have 3 elements: "+e.length;var n=h.getHexOfTLV_AtObj(t,e[1]);if("300d06092a864886f70d0101010500"!=n)throw"PKCS8 AlgorithmIdentifier is not rsaEnc: "+n;var r=h.getHexOfTLV_AtObj(t,e[2]),i=h.getHexOfV_AtObj(r,0),s=new Z;return s.readPrivateKeyFromASN1HexString(i),s},parseHexOfEncryptedPKCS8:function(t){var e={},n=h.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"malformed format: SEQUENCE(0).items != 2: "+n.length;e.ciphertext=h.getHexOfV_AtObj(t,n[1]);var r=h.getPosArrayOfChildren_AtObj(t,n[0]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+r.length;if("2a864886f70d01050d"!=h.getHexOfV_AtObj(t,r[0]))throw"this only supports pkcs5PBES2";var i=h.getPosArrayOfChildren_AtObj(t,r[1]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+i.length;var s=h.getPosArrayOfChildren_AtObj(t,i[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+s.length;if("2a864886f70d0307"!=h.getHexOfV_AtObj(t,s[0]))throw"this only supports TripleDES";e.encryptionSchemeAlg="TripleDES",e.encryptionSchemeIV=h.getHexOfV_AtObj(t,s[1]);var o=h.getPosArrayOfChildren_AtObj(t,i[0]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+o.length;if("2a864886f70d01050c"!=h.getHexOfV_AtObj(t,o[0]))throw"this only supports pkcs5PBKDF2";var a=h.getPosArrayOfChildren_AtObj(t,o[1]);if(a.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+a.length;e.pbkdf2Salt=h.getHexOfV_AtObj(t,a[0]);var u=h.getHexOfV_AtObj(t,a[1]);try{e.pbkdf2Iter=parseInt(u,16)}catch(t){throw"malformed format pbkdf2Iter: "+u}return e},getPBKDF2KeyHexFromParam:function(t,e){var n=u.enc.Hex.parse(t.pbkdf2Salt),r=t.pbkdf2Iter,i=u.PBKDF2(e,n,{keySize:6,iterations:r});return u.enc.Hex.stringify(i)},getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var n=this.getHexFromPEM(t,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=Bt.getPBKDF2KeyHexFromParam(r,e),s={};s.ciphertext=u.enc.Hex.parse(r.ciphertext);var o=u.enc.Hex.parse(i),a=u.enc.Hex.parse(r.encryptionSchemeIV),c=u.TripleDES.decrypt(s,o,{iv:a});return u.enc.Hex.stringify(c)},getRSAKeyFromEncryptedPKCS8PEM:function(t,e){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getRSAKeyFromPlainPKCS8Hex(n)},getKeyFromEncryptedPKCS8PEM:function(t,e){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(t){var e={algparam:null};if("30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var n=h.getPosArrayOfChildren_AtObj(t,0);if(3!=n.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(n[1],2))throw"malformed PKCS8 private key(code:003)";var r=h.getPosArrayOfChildren_AtObj(t,n[1]);if(2!=r.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(r[0],2))throw"malformed PKCS8 private key(code:005)";if(e.algoid=h.getHexOfV_AtObj(t,r[0]),"06"==t.substr(r[1],2)&&(e.algparam=h.getHexOfV_AtObj(t,r[1])),"04"!=t.substr(n[2],2))throw"malformed PKCS8 private key(code:006)";return e.keyidx=h.getStartPosOfV_AtObj(t,n[2]),e},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==e.algoid){this.parsePrivateRawRSAKeyHexAtObj(t,e);var n=e.key;return(r=new Z).setPrivateEx(n.n,n.e,n.d,n.p,n.q,n.dp,n.dq,n.co),r}if("2a8648ce3d0201"==e.algoid){if(this.parsePrivateRawECKeyHexAtObj(t,e),void 0===f.crypto.OID.oidhex2name[e.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+e.algparam;var r,i=f.crypto.OID.oidhex2name[e.algparam];return r=new f.crypto.ECDSA({curve:i,prv:e.key})}throw"unsupported private key algorithm"},getRSAKeyFromPublicPKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PUBLIC KEY");return this.getRSAKeyFromPublicPKCS8Hex(e)},getKeyFromPublicPKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PUBLIC KEY");return this.getKeyFromPublicPKCS8Hex(e)},getKeyFromPublicPKCS8Hex:function(t){var e=this.parsePublicPKCS8Hex(t);if("2a864886f70d010101"==e.algoid){var n=this.parsePublicRawRSAKeyHex(e.key);return(r=new Z).setPublic(n.n,n.e),r}if("2a8648ce3d0201"==e.algoid){if(void 0===f.crypto.OID.oidhex2name[e.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+e.algparam;var r,i=f.crypto.OID.oidhex2name[e.algparam];return r=new f.crypto.ECDSA({curve:i,pub:e.key})}throw"unsupported public key algorithm"},parsePublicRawRSAKeyHex:function(t){var e={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var n=h.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(n[0],2))throw"malformed RSA key(code:003)";if(e.n=h.getHexOfV_AtObj(t,n[0]),"02"!=t.substr(n[1],2))throw"malformed RSA key(code:004)";return e.e=h.getHexOfV_AtObj(t,n[1]),e},parsePrivateRawRSAKeyHexAtObj:function(t,e){var n=e.keyidx;if("30"!=t.substr(n,2))throw"malformed RSA private key(code:001)";var r=h.getPosArrayOfChildren_AtObj(t,n);if(9!=r.length)throw"malformed RSA private key(code:002)";e.key={},e.key.n=h.getHexOfV_AtObj(t,r[1]),e.key.e=h.getHexOfV_AtObj(t,r[2]),e.key.d=h.getHexOfV_AtObj(t,r[3]),e.key.p=h.getHexOfV_AtObj(t,r[4]),e.key.q=h.getHexOfV_AtObj(t,r[5]),e.key.dp=h.getHexOfV_AtObj(t,r[6]),e.key.dq=h.getHexOfV_AtObj(t,r[7]),e.key.co=h.getHexOfV_AtObj(t,r[8])},parsePrivateRawECKeyHexAtObj:function(t,e){var n=e.keyidx;if("30"!=t.substr(n,2))throw"malformed ECC private key(code:001)";var r=h.getPosArrayOfChildren_AtObj(t,n);if(3!=r.length)throw"malformed ECC private key(code:002)";if("04"!=t.substr(r[1],2))throw"malformed ECC private key(code:003)";e.key=h.getHexOfV_AtObj(t,r[1])},parsePublicPKCS8Hex:function(t){var e={algparam:null},n=h.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"outer DERSequence shall have 2 elements: "+n.length;var r=n[0];if("30"!=t.substr(r,2))throw"malformed PKCS8 public key(code:001)";var i=h.getPosArrayOfChildren_AtObj(t,r);if(2!=i.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(i[0],2))throw"malformed PKCS8 public key(code:003)";if(e.algoid=h.getHexOfV_AtObj(t,i[0]),"06"==t.substr(i[1],2)&&(e.algparam=h.getHexOfV_AtObj(t,i[1])),"03"!=t.substr(n[1],2))throw"malformed PKCS8 public key(code:004)";return e.key=h.getHexOfV_AtObj(t,n[1]).substr(2),e},getRSAKeyFromPublicPKCS8Hex:function(t){var e=h.getPosArrayOfChildren_AtObj(t,0);if(2!=e.length)throw"outer DERSequence shall have 2 elements: "+e.length;if("300d06092a864886f70d0101010500"!=h.getHexOfTLV_AtObj(t,e[0]))throw"PKCS8 AlgorithmId is not rsaEncryption";if("03"!=t.substr(e[1],2))throw"PKCS8 Public Key is not BITSTRING encapslated.";var n=h.getStartPosOfV_AtObj(t,e[1])+2;if("30"!=t.substr(n,2))throw"PKCS8 Public Key is not SEQUENCE.";var r=h.getPosArrayOfChildren_AtObj(t,n);if(2!=r.length)throw"inner DERSequence shall have 2 elements: "+r.length;if("02"!=t.substr(r[0],2))throw"N is not ASN.1 INTEGER";if("02"!=t.substr(r[1],2))throw"E is not ASN.1 INTEGER";var i=h.getHexOfV_AtObj(t,r[0]),s=h.getHexOfV_AtObj(t,r[1]),o=new Z;return o.setPublic(i,s),o}}}();function Nt(t){var e=function(t){var e=new Array,n=h.getStartPosOfV_AtObj(t,0),r=h.getPosOfNextSibling_AtObj(t,n),i=h.getPosOfNextSibling_AtObj(t,r),s=h.getPosOfNextSibling_AtObj(t,i),o=h.getPosOfNextSibling_AtObj(t,s),a=h.getPosOfNextSibling_AtObj(t,o),u=h.getPosOfNextSibling_AtObj(t,a),c=h.getPosOfNextSibling_AtObj(t,u),f=h.getPosOfNextSibling_AtObj(t,c);return e.push(n,r,i,s,o,a,u,c,f),e}(t),n=h.getHexOfV_AtObj(t,e[0]),r=h.getHexOfV_AtObj(t,e[1]),i=h.getHexOfV_AtObj(t,e[2]),s=h.getHexOfV_AtObj(t,e[3]),o=h.getHexOfV_AtObj(t,e[4]),a=h.getHexOfV_AtObj(t,e[5]),u=h.getHexOfV_AtObj(t,e[6]),c=h.getHexOfV_AtObj(t,e[7]),f=h.getHexOfV_AtObj(t,e[8]),l=new Array;return l.push(n,r,i,s,o,a,u,c,f),l}Z.prototype.readPrivateKeyFromPEMString=function(t){var e=Nt(y(t.replace("-----BEGIN RSA PRIVATE KEY-----","").replace("-----END RSA PRIVATE KEY-----","").replace(/[ \n]+/g,"")));this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Z.prototype.readPrivateKeyFromASN1HexString=function(t){var e=Nt(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])};var Vt=new RegExp("");function _t(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n+="0";return n+t}function Lt(t,e){var n=function(t){return f.crypto.Util.hashString(t,e)}(t);return this.signWithMessageHash(n,e)}function Kt(t){return Lt.call(this,t,"sha1")}function kt(t){return Lt.call(this,t,"sha256")}function Mt(t,e,n){for(var r="",i=0;r.length<e;)r+=C(n(H(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function Ut(t,e,n){var r,i=(r=H(t),f.crypto.Util.hashHex(r,e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(i,e,n)}function qt(t,e,n){return function(t,e,n){var r=new Z;return r.setPublic(e,n),r.doPublic(t)}(t,e,n).toString(16).replace(/^1f+00/,"")}function Gt(t){for(var e in f.crypto.Util.DIGESTINFOHEAD){var n=f.crypto.Util.DIGESTINFOHEAD[e],r=n.length;if(t.substring(0,r)==n)return[e,t.substring(r)]}return[]}function Wt(t,e){return function(t,e,n,r){var i=Gt(qt(e,n,r));if(0==i.length)return!1;var s=i[0];return i[1]==function(t){return f.crypto.Util.hashString(t,s)}(t)}(e,Y(t,16),this.n.toString(16),this.e.toString(16))}function zt(t,e){var n=Y(e=(e=e.replace(Vt,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=Gt(this.doPublic(n).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;var i=r[0];return r[1]==function(t){return f.crypto.Util.hashString(t,i)}(t)}function Jt(t,e,n,r){var i,s=(i=H(t),f.crypto.Util.hashHex(i,n));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(s,e,n,r)}function Xt(){this.subjectPublicKeyRSA=null,this.subjectPublicKeyRSA_hN=null,this.subjectPublicKeyRSA_hE=null,this.hex=null,this.getSerialNumberHex=function(){return h.getDecendantHexVByNthList(this.hex,0,[0,1])},this.getSignatureAlgorithmField=function(){var t=h.getDecendantHexVByNthList(this.hex,0,[0,2,0]),e=f.asn1.ASN1Util.oidHexToInt(t);return f.asn1.x509.OID.oid2name(e)},this.getIssuerHex=function(){return h.getDecendantHexTLVByNthList(this.hex,0,[0,3])},this.getIssuerString=function(){return Xt.hex2dn(h.getDecendantHexTLVByNthList(this.hex,0,[0,3]))},this.getSubjectHex=function(){return h.getDecendantHexTLVByNthList(this.hex,0,[0,5])},this.getSubjectString=function(){return Xt.hex2dn(h.getDecendantHexTLVByNthList(this.hex,0,[0,5]))},this.getNotBefore=function(){var t=h.getDecendantHexVByNthList(this.hex,0,[0,4,0]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getNotAfter=function(){var t=h.getDecendantHexVByNthList(this.hex,0,[0,4,1]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.readCertPEM=function(t){var e=Xt.pemToHex(t),n=Xt.getPublicKeyHexArrayFromCertHex(e),r=new Z;r.setPublic(n[0],n[1]),this.subjectPublicKeyRSA=r,this.subjectPublicKeyRSA_hN=n[0],this.subjectPublicKeyRSA_hE=n[1],this.hex=e},this.readCertPEMWithoutRSAInit=function(t){var e=Xt.pemToHex(t),n=Xt.getPublicKeyHexArrayFromCertHex(e);"function"==typeof this.subjectPublicKeyRSA.setPublic&&this.subjectPublicKeyRSA.setPublic(n[0],n[1]),this.subjectPublicKeyRSA_hN=n[0],this.subjectPublicKeyRSA_hE=n[1],this.hex=e},this.getInfo=function(){var t="Basic Fields\n";t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n";var e=Xt.getSubjectPublicKeyInfoPosFromCertHex(this.hex),n=h.getHexOfTLV_AtObj(this.hex,e),r=Rt.getKey(n,null,"pkcs8pub");r instanceof Z&&(t+="    key algorithm: RSA\n",t+="    n="+r.n.toString(16).substr(0,16)+"...\n",t+="    e="+r.e.toString(16)+"\n"),t+="X509v3 Extensions:\n";for(var i=Xt.getV3ExtInfoListOfCertHex(this.hex),s=0;s<i.length;s++){var o=i[s],a=f.asn1.x509.OID.oid2name(o.oid);""===a&&(a=o.oid);var u="";if(!0===o.critical&&(u="CRITICAL"),t+="  "+a+" "+u+":\n","basicConstraints"===a){var c=Xt.getExtBasicConstraints(this.hex);void 0===c.cA?t+="    {}\n":(t+="    cA=true",void 0!==c.pathLen&&(t+=", pathLen="+c.pathLen),t+="\n")}else if("keyUsage"===a)t+="    "+Xt.getExtKeyUsageString(this.hex)+"\n";else if("subjectKeyIdentifier"===a)t+="    "+Xt.getExtSubjectKeyIdentifier(this.hex)+"\n";else if("authorityKeyIdentifier"===a){var l=Xt.getExtAuthorityKeyIdentifier(this.hex);void 0!==l.kid&&(t+="    kid="+l.kid+"\n")}else if("extKeyUsage"===a){t+="    "+Xt.getExtExtKeyUsageName(this.hex).join(", ")+"\n"}else if("subjectAltName"===a){t+="    "+Xt.getExtSubjectAltName(this.hex).join(", ")+"\n"}else if("cRLDistributionPoints"===a){t+="    "+Xt.getExtCRLDistributionPointsURI(this.hex)+"\n"}else if("authorityInfoAccess"===a){var d=Xt.getExtAIAInfo(this.hex);void 0!==d.ocsp&&(t+="    ocsp: "+d.ocsp.join(",")+"\n"),void 0!==d.caissuer&&(t+="    caissuer: "+d.caissuer.join(",")+"\n")}}return t+="signature algorithm: "+Xt.getSignatureAlgorithmName(this.hex)+"\n",t+="signature: "+Xt.getSignatureValueHex(this.hex).substr(0,16)+"...\n"}}function Yt(t){this.ct=1,this.p2=null,this.sm3keybase=null,this.sm3c3=null,this.key=new Array(32),this.keyOff=0,this.cipherMode=void 0!==t?t:SM2CipherMode.C1C3C2}function $t(){this.BYTE_LENGTH=64,this.xBuf=new Array,this.xBufOff=0,this.byteCount=0,this.DIGEST_LENGTH=32,this.v0=[1937774191,1226093241,388252375,-628488704,-1452330820,372324522,-477237683,-1325724082],this.v=new Array(8),this.v_=new Array(8),this.X0=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.X=new Array(68),this.xOff=0,this.T_00_15=2043430169,this.T_16_63=2055708042,arguments.length>0?this.InitDigest(arguments[0]):this.Init()}function Zt(t,e){return t<<e|t>>>-e}Vt.compile("[^0-9a-f]","gi"),Z.prototype.signWithMessageHash=function(t,e){var n=Y(f.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return _t(this.doPrivate(n).toString(16),this.n.bitLength())},Z.prototype.signString=Lt,Z.prototype.signStringWithSHA1=Kt,Z.prototype.signStringWithSHA256=kt,Z.prototype.sign=Lt,Z.prototype.signWithSHA1=Kt,Z.prototype.signWithSHA256=kt,Z.prototype.signWithMessageHashPSS=function(t,e,n){var r,i=C(t),s=i.length,o=this.n.bitLength()-1,a=Math.ceil(o/8),u=function(t){return f.crypto.Util.hashHex(t,e)};if(-1===n||void 0===n)n=s;else if(-2===n)n=a-s-2;else if(n<-2)throw"invalid salt length";if(a<s+n+2)throw"data too long";var c="";n>0&&(c=new Array(n),(new X).nextBytes(c),c=String.fromCharCode.apply(String,c));var h=C(u(H("\0\0\0\0\0\0\0\0"+i+c))),l=[];for(r=0;r<a-n-s-2;r+=1)l[r]=0;var d=String.fromCharCode.apply(String,l)+""+c,g=Mt(h,d.length,u),p=[];for(r=0;r<d.length;r+=1)p[r]=d.charCodeAt(r)^g.charCodeAt(r);var y=65280>>8*a-o&255;for(p[0]&=~y,r=0;r<s;r++)p.push(h.charCodeAt(r));return p.push(188),_t(this.doPrivate(new rt(p)).toString(16),this.n.bitLength())},Z.prototype.signStringPSS=Ut,Z.prototype.signPSS=Ut,Z.SALT_LEN_HLEN=-1,Z.SALT_LEN_MAX=-2,Z.prototype.verifyWithMessageHash=function(t,e){var n=Y(e=(e=e.replace(Vt,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=Gt(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&(r[0],r[1]==t)},Z.prototype.verifyString=zt,Z.prototype.verifyHexSignatureForMessage=Wt,Z.prototype.verify=zt,Z.prototype.verifyHexSignatureForByteArrayMessage=Wt,Z.prototype.verifyWithMessageHashPSS=function(t,e,n,r){var i=new rt(e,16);if(i.bitLength()>this.n.bitLength())return!1;var s,o=function(t){return f.crypto.Util.hashHex(t,n)},a=C(t),u=a.length,c=this.n.bitLength()-1,h=Math.ceil(c/8);if(-1===r||void 0===r)r=u;else if(-2===r)r=h-u-2;else if(r<-2)throw"invalid salt length";if(h<u+r+2)throw"data too long";var l=this.doPublic(i).toByteArray();for(s=0;s<l.length;s+=1)l[s]&=255;for(;l.length<h;)l.unshift(0);if(188!==l[h-1])throw"encoded message does not end in 0xbc";var d=(l=String.fromCharCode.apply(String,l)).substr(0,h-u-1),g=l.substr(d.length,u),p=65280>>8*h-c&255;if(0!=(d.charCodeAt(0)&p))throw"bits beyond keysize not zero";var y=Mt(g,d.length,o),v=[];for(s=0;s<d.length;s+=1)v[s]=d.charCodeAt(s)^y.charCodeAt(s);v[0]&=~p;var m=h-u-r-2;for(s=0;s<m;s+=1)if(0!==v[s])throw"leftmost octets not zero";if(1!==v[m])throw"0x01 marker not found";return g===C(o(H("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,v.slice(-r)))))},Z.prototype.verifyStringPSS=Jt,Z.prototype.verifyPSS=Jt,Z.SALT_LEN_RECOVER=-2,Xt.pemToBase64=function(t){var e=t;return e=(e=(e=e.replace("-----BEGIN CERTIFICATE-----","")).replace("-----END CERTIFICATE-----","")).replace(/[ \n]+/g,"")},Xt.pemToHex=function(t){return y(Xt.pemToBase64(t))},Xt.getSubjectPublicKeyPosFromCertHex=function(t){var e=Xt.getSubjectPublicKeyInfoPosFromCertHex(t);if(-1==e)return-1;var n=h.getPosArrayOfChildren_AtObj(t,e);if(2!=n.length)return-1;var r=n[1];if("03"!=t.substring(r,r+2))return-1;var i=h.getStartPosOfV_AtObj(t,r);return"00"!=t.substring(i,i+2)?-1:i+2},Xt.getSubjectPublicKeyInfoPosFromCertHex=function(t){var e=h.getStartPosOfV_AtObj(t,0),n=h.getPosArrayOfChildren_AtObj(t,e);return n.length<1?-1:"a003020102"==t.substring(n[0],n[0]+10)?n.length<6?-1:n[6]:n.length<5?-1:n[5]},Xt.getPublicKeyHexArrayFromCertHex=function(t){var e=Xt.getSubjectPublicKeyPosFromCertHex(t),n=h.getPosArrayOfChildren_AtObj(t,e);if(2!=n.length)return[];var r=h.getHexOfV_AtObj(t,n[0]),i=h.getHexOfV_AtObj(t,n[1]);return null!=r&&null!=i?[r,i]:[]},Xt.getHexTbsCertificateFromCert=function(t){return h.getStartPosOfV_AtObj(t,0)},Xt.getPublicKeyHexArrayFromCertPEM=function(t){var e=Xt.pemToHex(t);return Xt.getPublicKeyHexArrayFromCertHex(e)},Xt.hex2dn=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed DN";for(var n=new Array,r=h.getPosArrayOfChildren_AtObj(t,e),i=0;i<r.length;i++)n.push(Xt.hex2rdn(t,r[i]));return"/"+(n=n.map((function(t){return t.replace("/","\\/")}))).join("/")},Xt.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw"malformed RDN";for(var n=new Array,r=h.getPosArrayOfChildren_AtObj(t,e),i=0;i<r.length;i++)n.push(Xt.hex2attrTypeValue(t,r[i]));return(n=n.map((function(t){return t.replace("+","\\+")}))).join("+")},Xt.hex2attrTypeValue=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed attribute type and value";var n=h.getPosArrayOfChildren_AtObj(t,e);2!==n.length||t.substr(n[0],2);var r=h.getHexOfV_AtObj(t,n[0]),i=f.asn1.ASN1Util.oidHexToInt(r);return f.asn1.x509.OID.oid2atype(i)+"="+C(h.getHexOfV_AtObj(t,n[1]))},Xt.getPublicKeyFromCertPEM=function(t){var e=Xt.getPublicKeyInfoPropOfCertPEM(t);if("2a864886f70d010101"==e.algoid){var n=Rt.parsePublicRawRSAKeyHex(e.keyhex);return(i=new Z).setPublic(n.n,n.e),i}if("2a8648ce3d0201"==e.algoid){var r=f.crypto.OID.oidhex2name[e.algparam];return(i=new f.crypto.ECDSA({curve:r,info:e.keyhex})).setPublicKeyHex(e.keyhex),i}if("2a8648ce380401"==e.algoid){var i,s=h.getVbyList(e.algparam,0,[0],"02"),o=h.getVbyList(e.algparam,0,[1],"02"),a=h.getVbyList(e.algparam,0,[2],"02"),u=h.getHexOfV_AtObj(e.keyhex,0);return u=u.substr(2),(i=new f.crypto.DSA).setPublic(new rt(s,16),new rt(o,16),new rt(a,16),new rt(u,16)),i}throw"unsupported key"},Xt.getPublicKeyInfoPropOfCertPEM=function(t){var e={algparam:null},n=Xt.pemToHex(t),r=h.getPosArrayOfChildren_AtObj(n,0);if(3!=r.length)throw"malformed X.509 certificate PEM (code:001)";if("30"!=n.substr(r[0],2))throw"malformed X.509 certificate PEM (code:002)";var i=h.getPosArrayOfChildren_AtObj(n,r[0]),s=6;if("a0"!==n.substr(i[0],2)&&(s=5),i.length<s+1)throw"malformed X.509 certificate PEM (code:003)";var o=h.getPosArrayOfChildren_AtObj(n,i[s]);if(2!=o.length)throw"malformed X.509 certificate PEM (code:004)";var a=h.getPosArrayOfChildren_AtObj(n,o[0]);if(2!=a.length)throw"malformed X.509 certificate PEM (code:005)";if(e.algoid=h.getHexOfV_AtObj(n,a[0]),"06"==n.substr(a[1],2)?e.algparam=h.getHexOfV_AtObj(n,a[1]):"30"==n.substr(a[1],2)&&(e.algparam=h.getHexOfTLV_AtObj(n,a[1])),"03"!=n.substr(o[1],2))throw"malformed X.509 certificate PEM (code:006)";var u=h.getHexOfV_AtObj(n,o[1]);return e.keyhex=u.substr(2),e},Xt.getPublicKeyInfoPosOfCertHEX=function(t){var e=h.getPosArrayOfChildren_AtObj(t,0);if(3!=e.length)throw"malformed X.509 certificate PEM (code:001)";if("30"!=t.substr(e[0],2))throw"malformed X.509 certificate PEM (code:002)";var n=h.getPosArrayOfChildren_AtObj(t,e[0]);if(n.length<7)throw"malformed X.509 certificate PEM (code:003)";return n[6]},Xt.getV3ExtInfoListOfCertHex=function(t){var e=h.getPosArrayOfChildren_AtObj(t,0);if(3!=e.length)throw"malformed X.509 certificate PEM (code:001)";if("30"!=t.substr(e[0],2))throw"malformed X.509 certificate PEM (code:002)";var n=h.getPosArrayOfChildren_AtObj(t,e[0]);if(n.length<8)throw"malformed X.509 certificate PEM (code:003)";if("a3"!=t.substr(n[7],2))throw"malformed X.509 certificate PEM (code:004)";var r=h.getPosArrayOfChildren_AtObj(t,n[7]);if(1!=r.length)throw"malformed X.509 certificate PEM (code:005)";if("30"!=t.substr(r[0],2))throw"malformed X.509 certificate PEM (code:006)";for(var i=h.getPosArrayOfChildren_AtObj(t,r[0]),s=i.length,o=new Array(s),a=0;a<s;a++)o[a]=Xt.getV3ExtItemInfo_AtObj(t,i[a]);return o},Xt.getV3ExtItemInfo_AtObj=function(t,e){var n={};n.posTLV=e;var r=h.getPosArrayOfChildren_AtObj(t,e);if(2!=r.length&&3!=r.length)throw"malformed X.509v3 Ext (code:001)";if("06"!=t.substr(r[0],2))throw"malformed X.509v3 Ext (code:002)";var i=h.getHexOfV_AtObj(t,r[0]);n.oid=h.hextooidstr(i),n.critical=!1,3==r.length&&(n.critical=!0);var s=r[r.length-1];if("04"!=t.substr(s,2))throw"malformed X.509v3 Ext (code:003)";return n.posV=h.getStartPosOfV_AtObj(t,s),n},Xt.getHexOfTLV_V3ExtValue=function(t,e){var n=Xt.getPosOfTLV_V3ExtValue(t,e);return-1==n?null:h.getHexOfTLV_AtObj(t,n)},Xt.getHexOfV_V3ExtValue=function(t,e){var n=Xt.getPosOfTLV_V3ExtValue(t,e);return-1==n?null:h.getHexOfV_AtObj(t,n)},Xt.getPosOfTLV_V3ExtValue=function(t,e){var n=e;if(e.match(/^[0-9.]+$/)||(n=f.asn1.x509.OID.name2oid(e)),""==n)return-1;for(var r=Xt.getV3ExtInfoListOfCertHex(t),i=0;i<r.length;i++){var s=r[i];if(s.oid==n)return s.posV}return-1},Xt.getExtBasicConstraints=function(t){var e=Xt.getHexOfV_V3ExtValue(t,"basicConstraints");if(null===e)return null;if(""===e)return{};if("0101ff"===e)return{cA:!0};if("0101ff02"===e.substr(0,8)){var n=h.getHexOfV_AtObj(e,6);return{cA:!0,pathLen:parseInt(n,16)}}throw"unknown error"},Xt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],Xt.getExtKeyUsageBin=function(t){var e=Xt.getHexOfV_V3ExtValue(t,"keyUsage");if(""==e)return"";if(e.length%2!=0||e.length<=2)throw"malformed key usage value";var n=parseInt(e.substr(0,2)),r=parseInt(e.substr(2),16).toString(2);return r.substr(0,r.length-n)},Xt.getExtKeyUsageString=function(t){for(var e=Xt.getExtKeyUsageBin(t),n=new Array,r=0;r<e.length;r++)"1"==e.substr(r,1)&&n.push(Xt.KEYUSAGE_NAME[r]);return n.join(",")},Xt.getExtSubjectKeyIdentifier=function(t){return Xt.getHexOfV_V3ExtValue(t,"subjectKeyIdentifier")},Xt.getExtAuthorityKeyIdentifier=function(t){var e={},n=Xt.getHexOfTLV_V3ExtValue(t,"authorityKeyIdentifier");if(null===n)return null;for(var r=h.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++)"80"===n.substr(r[i],2)&&(e.kid=h.getHexOfV_AtObj(n,r[i]));return e},Xt.getExtExtKeyUsageName=function(t){var e=new Array,n=Xt.getHexOfTLV_V3ExtValue(t,"extKeyUsage");if(null===n)return null;for(var r=h.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++){var s=h.getHexOfV_AtObj(n,r[i]),o=f.asn1.ASN1Util.oidHexToInt(s),a=f.asn1.x509.OID.oid2name(o);e.push(a)}return e},Xt.getExtSubjectAltName=function(t){for(var e=new Array,n=Xt.getHexOfTLV_V3ExtValue(t,"subjectAltName"),r=h.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++)if("82"===n.substr(r[i],2)){var s=P(h.getHexOfV_AtObj(n,r[i]));e.push(s)}return e},Xt.getExtCRLDistributionPointsURI=function(t){for(var e=new Array,n=Xt.getHexOfTLV_V3ExtValue(t,"cRLDistributionPoints"),r=h.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++)for(var s=h.getHexOfTLV_AtObj(n,r[i]),o=h.getPosArrayOfChildren_AtObj(s,0),a=0;a<o.length;a++)if("a0"===s.substr(o[a],2)){var u=h.getHexOfV_AtObj(s,o[a]);if("a0"===u.substr(0,2)){var c=h.getHexOfV_AtObj(u,0);if("86"===c.substr(0,2)){var f=P(h.getHexOfV_AtObj(c,0));e.push(f)}}}return e},Xt.getExtAIAInfo=function(t){var e={ocsp:[],caissuer:[]},n=Xt.getPosOfTLV_V3ExtValue(t,"authorityInfoAccess");if(-1==n)return null;if("30"!=t.substr(n,2))throw"malformed AIA Extn Value";for(var r=h.getPosArrayOfChildren_AtObj(t,n),i=0;i<r.length;i++){var s=r[i],o=h.getPosArrayOfChildren_AtObj(t,s);if(2!=o.length)throw"malformed AccessDescription of AIA Extn";var a=o[0],u=o[1];"2b06010505073001"==h.getHexOfV_AtObj(t,a)&&"86"==t.substr(u,2)&&e.ocsp.push(P(h.getHexOfV_AtObj(t,u))),"2b06010505073002"==h.getHexOfV_AtObj(t,a)&&"86"==t.substr(u,2)&&e.caissuer.push(P(h.getHexOfV_AtObj(t,u)))}return e},Xt.getSignatureAlgorithmName=function(t){var e=h.getDecendantHexVByNthList(t,0,[1,0]),n=f.asn1.ASN1Util.oidHexToInt(e);return f.asn1.x509.OID.oid2name(n)},Xt.getSignatureValueHex=function(t){var e=h.getDecendantHexVByNthList(t,0,[2]);if("00"!==e.substr(0,2))throw"can't get signature value";return e.substr(2)},Xt.getSerialNumberHex=function(t){return h.getDecendantHexVByNthList(t,0,[0,1])},void 0!==f&&f||(f={}),void 0!==f.crypto&&f.crypto||(f.crypto={}),f.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",sm3:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:u.algo.MD5,sha1:u.algo.SHA1,sha224:u.algo.SHA224,sha256:u.algo.SHA256,sha384:u.algo.SHA384,sha512:u.algo.SHA512,ripemd160:u.algo.RIPEMD160,sm3:u.algo.SM3},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,n){var r=this.getDigestInfoHex(t,e),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+e;for(var s="0001",o="00"+r,a="",u=i-s.length-o.length,c=0;c<u;c+=2)a+="ff";return s+a+o},this.hashString=function(t,e){return new f.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new f.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return new f.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(t)},this.sha256=function(t){return new f.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(t)},this.sha256Hex=function(t){return new f.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(t)},this.sha512=function(t){return new f.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(t)},this.sha512Hex=function(t){return new f.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(t)},this.md5=function(t){return new f.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},this.ripemd160=function(t){return new f.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},this.getCryptoJSMDByName=function(t){}},f.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=f.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=f.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:sm3:".indexOf(t)&&"cryptojs"==e){try{this.md=f.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=u.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(u.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=f.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},f.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},f.crypto.MessageDigest.getHashLength=function(t){var e=f.crypto.MessageDigest,n=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[n])throw"not supported algorithm: "+t;return e.HASHLENGTH[n]},f.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},f.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=f.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var n=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==e){try{var r=f.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n];this.mac=u.algo.HMAC.create(r,this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=u.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(u.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=H(t)),void(this.pass=u.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;e=null;if(void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=O(t.utf8)),void 0!==t.rstr&&(e=H(t.rstr)),void 0!==t.b64&&(e=y(t.b64)),void 0!==t.b64u&&(e=w(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=u.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=f.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},f.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase())},this._zeroPaddingOfSignature=function(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n+="0";return n+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:sm3:".indexOf(this.mdAlgName)){try{this.md=new f.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t}this.init=function(t,e){var n=null;try{n=void 0===e?Rt.getKey(t):Rt.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.initSign=function(t){"string"==typeof t.ecprvhex&&"string"==typeof t.eccurvename?(this.ecprvhex=t.ecprvhex,this.eccurvename=t.eccurvename):this.prvKey=t,this.state="SIGN"},this.initVerifyByPublicKey=function(t){"string"==typeof t.ecpubhex&&"string"==typeof t.eccurvename?(this.ecpubhex=t.ecpubhex,this.eccurvename=t.eccurvename):(t instanceof f.crypto.ECDSA||t instanceof Z)&&(this.pubKey=t),this.state="VERIFY"},this.initVerifyByCertificatePEM=function(t){var e=new Xt;e.readCertPEM(t),this.pubKey=e.subjectPublicKeyRSA,this.state="VERIFY"},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if("sm2"!=this.eccurvename&&(this.sHashHex=this.md.digest()),void 0!==this.ecprvhex&&void 0!==this.eccurvename)if("sm2"==this.eccurvename){var t=(h=new f.crypto.SM3withSM2({curve:this.eccurvename})).ecparams.G,e=t.multiply(new rt(this.ecprvhex,16)),n=e.getX().toBigInteger().toRadix(16)+e.getY().toBigInteger().toRadix(16),r=new $t,i=(new $t).GetZ(t,n),s=r.GetWords(r.GetHex(i).toString()),o=u.enc.Utf8.stringify(this.md.md._data);o=u.enc.Utf8.parse(o).toString(),o=r.GetWords(o);var a=new Array(r.GetDigestSize());r.BlockUpdate(s,0,s.length),r.BlockUpdate(o,0,o.length),r.DoFinal(a,0);var c=r.GetHex(a).toString();this.sHashHex=c,this.hSign=h.signHex(this.sHashHex,this.ecprvhex)}else{var h=new f.crypto.ECDSA({curve:this.eccurvename});this.hSign=h.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof Z&&"rsaandmgf1"==this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Z&&"rsa"==this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof f.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof f.crypto.DSA))throw"Signature: unsupported public key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if("sm2"!=this.eccurvename&&(this.sHashHex=this.md.digest()),void 0!==this.ecpubhex&&void 0!==this.eccurvename){if("sm2"==this.eccurvename){var e=(h=new f.crypto.SM3withSM2({curve:this.eccurvename})).ecparams.G,n=this.ecpubhex.substr(2,128),r=new $t,i=(new $t).GetZ(e,n),s=r.GetWords(r.GetHex(i).toString()),o=u.enc.Utf8.stringify(this.md.md._data);o=u.enc.Utf8.parse(o).toString(),o=r.GetWords(o);var a=new Array(r.GetDigestSize());r.BlockUpdate(s,0,s.length),r.BlockUpdate(o,0,o.length),r.DoFinal(a,0);var c=r.GetHex(a).toString();return this.sHashHex=c,h.verifyHex(this.sHashHex,t,this.ecpubhex)}var h;return(h=new f.crypto.ECDSA({curve:this.eccurvename})).verifyHex(this.sHashHex,t,this.ecpubhex)}if(this.pubKey instanceof Z&&"rsaandmgf1"==this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Z&&"rsa"==this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(this.pubKey instanceof f.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(this.pubKey instanceof f.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.initVerifyByPublicKey=function(t){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.algProvName},this.initVerifyByCertificatePEM=function(t){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.algProvName},this.initSign=function(t){throw"initSign(prvKey) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov?this.provName=f.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{(e=new Z).readPrivateKeyFromPEMString(t.prvkeypem),this.initSign(e)}catch(t){throw"fatal error to load pem private key: "+t}}},f.crypto.Cipher=function(t){},f.crypto.Cipher.encrypt=function(t,e,n){if(e instanceof Z&&e.isPublic){var r=f.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.encrypt(t);if("RSAOAEP"===r)return e.encryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.encryptOAEP(t,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},f.crypto.Cipher.decrypt=function(t,e,n){if(e instanceof Z&&e.isPrivate){var r=f.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.decrypt(t);if("RSAOAEP"===r)return e.decryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.decryptOAEP(t,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},f.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof Z){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},f.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==f&&f||(f={}),void 0!==f.crypto&&f.crypto||(f.crypto={}),f.crypto.ECParameterDB=new function(){var t={},e={};function n(t){return new rt(t,16)}this.getByName=function(n){var r=n;if(void 0!==e[r]&&(r=e[n]),void 0!==t[r])return t[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,s,o,a,u,c,h,f,l,d,g){t[r]={};var p=n(s),y=n(o),v=n(a),m=n(u),S=n(c),x=new nt(p,y,v),b=x.decodePointHex("04"+h+f);t[r].name=r,t[r].keylen=i,t[r].curve=x,t[r].G=b,t[r].n=m,t[r].h=S,t[r].oid=d,t[r].info=g;for(var A=0;A<l.length;A++)e[l[A]]=r}},f.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),f.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),f.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),f.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),f.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),f.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),f.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),f.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),f.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),f.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),f.crypto.ECParameterDB.regist("sm2",256,"FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF","FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC","28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93","FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFF7203DF6B21C6052B53BBF40939D54123","1","32C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7","BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0",["sm2","SM2"]),Yt.prototype={getHexString:t=>0==(1&t.length)?t:"0"+t,hex2Byte:function(t){if(t>127||t<-128){var e=255&t;return e>127?(e=127&t,-((e^=127)+1)):e}return t},Reset:function(){this.sm3keybase=new $t,this.sm3c3=new $t;var t=this.GetWords(this.p2.getX().toBigInteger().toRadix(16)),e=this.GetWords(this.p2.getY().toBigInteger().toRadix(16));this.sm3c3.BlockUpdate(t,0,t.length),this.sm3keybase.BlockUpdate(t,0,t.length),this.sm3keybase.BlockUpdate(e,0,e.length),this.ct=1,this.NextKey()},NextKey:function(){var t=new $t(this.sm3keybase);t.Update(this.ct>>24&255),t.Update(this.ct>>16&255),t.Update(this.ct>>8&255),t.Update(255&this.ct),t.DoFinal(this.key,0),this.keyOff=0,this.ct++},InitEncipher:function(t){var e,n,r=new f.crypto.ECDSA({curve:"sm2"}),i=r.generateKeyPairHex();e=new rt(i.ecprvhex,16);var s=i.ecpubhex;return n=et.decodeFromHex(r.ecparams.curve,s),this.p2=t.multiply(e),this.Reset(),n},EncryptBlock:function(t){this.sm3c3.BlockUpdate(t,0,t.length);for(var e=0;e<t.length;e++)this.keyOff==this.key.length&&this.NextKey(),t[e]^=this.key[this.keyOff++]},InitDecipher:function(t,e){this.p2=e.multiply(t),this.Reset()},DecryptBlock:function(t){for(var e=0;e<t.length;e++)this.keyOff==this.key.length&&this.NextKey(),t[e]^=this.key[this.keyOff++];this.sm3c3.BlockUpdate(t,0,t.length)},Dofinal:function(t){var e=this.GetWords(this.p2.getY().toBigInteger().toRadix(16));this.sm3c3.BlockUpdate(e,0,e.length),this.sm3c3.DoFinal(t,0),this.Reset()},Encrypt:function(t,e){var n=new Array(e.length);Array.Copy(e,0,n,0,e.length);var r=this.InitEncipher(t);this.EncryptBlock(n);var i,s=new Array(32);switch(this.Dofinal(s),this.cipherMode){case SM2CipherMode.C1C3C2:i=this.getHexString(r.getX().toBigInteger().toRadix(16))+this.getHexString(r.getY().toBigInteger().toRadix(16))+this.GetHex(s).toString()+this.GetHex(n).toString();break;case SM2CipherMode.C1C2C3:i=r.getX().toBigInteger().toRadix(16)+r.getY().toBigInteger().toRadix(16)+this.GetHex(n).toString()+this.GetHex(s).toString();break;default:throw new Error("[SM2:Decrypt]invalid type cipherMode("+this.cipherMode+")")}return i},GetWords:function(t){for(var e=[],n=t.length,r=0;r<n;r+=2)e[e.length]=parseInt(t.substr(r,2),16);return e},GetHex:function(t){for(var e=new Array(32),n=0,r=0;r<2*t.length;r+=2)e[r>>>3]|=parseInt(t[n])<<24-r%8*4,n++;return new u.lib.WordArray.init(e,t.length)},Decrypt:function(t,e){var n,r=e,i=r.substr(0,64),s=r.substr(0+i.length,64);switch(this.cipherMode){case SM2CipherMode.C1C3C2:n=r.substr(i.length+s.length,64),encrypData=r.substr(i.length+s.length+64);break;case SM2CipherMode.C1C2C3:encrypData=r.substr(i.length+s.length,r.length-i.length-s.length-64),n=r.substr(r.length-64);break;default:throw new Error("[SM2:Decrypt]invalid type cipherMode("+this.cipherMode+")")}var o=this.GetWords(encrypData),a=this.CreatePoint(i,s);this.InitDecipher(t,a),this.DecryptBlock(o);var c=new Array(32);if(this.Dofinal(c),this.GetHex(c).toString()==n){var h=this.GetHex(o);return u.enc.Utf8.stringify(h)}throw new Error("[SM2:Decrypt] C3 is not match!")},CreatePoint:function(t,e){var n=new f.crypto.ECDSA({curve:"sm2"}),r=(n.ecparams.curve,"04"+t+e);return et.decodeFromHex(n.ecparams.curve,r)}},window.SM2CipherMode={C1C2C3:0,C1C3C2:1},void 0!==f&&f||(f={}),void 0!==f.crypto&&f.crypto||(f.crypto={}),f.crypto.SM3withSM2=function(t){var e=new X;this.type="SM2",this.getBigRandom=function(t){return new rt(t.bitLength(),e).mod(t.subtract(rt.ONE)).add(rt.ONE)},this.setNamedCurve=function(t){this.ecparams=f.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.generateKeyPairHex=function(){var t=this.ecparams.n,e=this.getBigRandom(t),n=this.ecparams.G.multiply(e),r=n.getX().toBigInteger(),i=n.getY().toBigInteger(),s=this.ecparams.keylen/4,o=("0000000000"+e.toString(16)).slice(-s),a="04"+("0000000000"+r.toString(16)).slice(-s)+("0000000000"+i.toString(16)).slice(-s);return this.setPrivateKeyHex(o),this.setPublicKeyHex(a),{ecprvhex:o,ecpubhex:a}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new rt(e,16),r=this.ecparams.n,i=new rt(t,16),s=null,o=null,a=null,u=null,c=n;do{do{var h=this.generateKeyPairHex();s=new rt(h.ecprvhex,16);var l=h.ecpubhex;o=et.decodeFromHex(this.ecparams.curve,l),a=(a=i.add(o.getX().toBigInteger())).mod(r)}while(a.equals(rt.ZERO)||a.add(s).equals(r));var d=c.add(rt.ONE);d=d.modInverse(r),u=a.multiply(c),u=s.subtract(u).mod(r),u=d.multiply(u).mod(r)}while(u.equals(rt.ZERO));return f.crypto.ECDSA.biRSSigToASN1Sig(a,u)},this.sign=function(t,e){var n=e,r=this.ecparams.n,i=rt.fromByteArrayUnsigned(t);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(rt.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return this.serializeSig(o,a)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,n){var r,i,s,o=f.crypto.ECDSA.parseSigHex(e);r=o.r,i=o.s,s=et.decodeFromHex(this.ecparams.curve,n);var a=new rt(t,16);return this.verifyRaw(a,r,i,s)},this.verify=function(t,e,n){var r,i,s;if(Bitcoin.Util.isArray(e)){var o=this.parseSig(e);r=o.r,i=o.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";r=e.r,i=e.s}if(n instanceof et)s=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=et.decodeFrom(this.ecparams.curve,n)}var a=rt.fromByteArrayUnsigned(t);return this.verifyRaw(a,r,i,s)},this.verifyRaw=function(t,e,n,r){var i=this.ecparams.n,s=this.ecparams.G,o=e.add(n).mod(i);if(o.equals(rt.ZERO))return!1;var a=s.multiply(n);a=a.add(r.multiply(o));var u=t.add(a.getX().toBigInteger()).mod(i);return e.equals(u)},this.serializeSig=function(t,e){var n=t.toByteArraySigned(),r=e.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:rt.fromByteArrayUnsigned(n),s:rt.fromByteArrayUnsigned(r)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:rt.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:rt.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="sm2"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},function(){var t=u,e=t.lib,n=e.WordArray,r=e.Hasher,i=t.algo,s=[],o=i.SM3=r.extend({_doReset:function(){this._hash=new n.init([1937774191,1226093241,388252375,3666478592,2842636476,372324522,3817729613,2969243214])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],c=0;c<80;c++){if(c<16)s[c]=0|t[e+c];else{var h=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=h<<1|h>>>31}var f=(r<<5|r>>>27)+u+s[c];f+=c<20?1518500249+(i&o|~i&a):c<40?1859775393+(i^o^a):c<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,u=a,a=o,o=i<<30|i>>>2,i=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.SM3=r._createHelper(o),t.HmacSM3=r._createHmacHelper(o)}(),$t.prototype={Init:function(){this.xBuf=new Array(4),this.Reset()},InitDigest:function(t){this.xBuf=new Array(t.xBuf.length),Array.Copy(t.xBuf,0,this.xBuf,0,t.xBuf.length),this.xBufOff=t.xBufOff,this.byteCount=t.byteCount,Array.Copy(t.X,0,this.X,0,t.X.length),this.xOff=t.xOff,Array.Copy(t.v,0,this.v,0,t.v.length)},GetDigestSize:function(){return this.DIGEST_LENGTH},Reset:function(){this.byteCount=0,this.xBufOff=0,Array.Clear(this.xBuf,0,this.xBuf.length),Array.Copy(this.v0,0,this.v,0,this.v0.length),this.xOff=0,Array.Copy(this.X0,0,this.X,0,this.X0.length)},GetByteLength:function(){return this.BYTE_LENGTH},ProcessBlock:function(){var t,e=this.X,n=new Array(64);for(t=16;t<68;t++)e[t]=this.P1(e[t-16]^e[t-9]^Zt(e[t-3],15))^Zt(e[t-13],7)^e[t-6];for(t=0;t<64;t++)n[t]=e[t]^e[t+4];var r,i,s,o,a,u=this.v,c=this.v_;for(Array.Copy(u,0,c,0,this.v0.length),t=0;t<16;t++)r=(a=Zt(c[0],12))+c[4]+Zt(this.T_00_15,t),i=(r=Zt(r,7))^a,s=this.FF_00_15(c[0],c[1],c[2])+c[3]+i+n[t],o=this.GG_00_15(c[4],c[5],c[6])+c[7]+r+e[t],c[3]=c[2],c[2]=Zt(c[1],9),c[1]=c[0],c[0]=s,c[7]=c[6],c[6]=Zt(c[5],19),c[5]=c[4],c[4]=this.P0(o);for(t=16;t<64;t++)r=(a=Zt(c[0],12))+c[4]+Zt(this.T_16_63,t),i=(r=Zt(r,7))^a,s=this.FF_16_63(c[0],c[1],c[2])+c[3]+i+n[t],o=this.GG_16_63(c[4],c[5],c[6])+c[7]+r+e[t],c[3]=c[2],c[2]=Zt(c[1],9),c[1]=c[0],c[0]=s,c[7]=c[6],c[6]=Zt(c[5],19),c[5]=c[4],c[4]=this.P0(o);for(t=0;t<8;t++)u[t]^=c[t];this.xOff=0,Array.Copy(this.X0,0,this.X,0,this.X0.length)},ProcessWord:function(t,e){var n=t[e]<<24;n|=(255&t[++e])<<16,n|=(255&t[++e])<<8,n|=255&t[++e],this.X[this.xOff]=n,16==++this.xOff&&this.ProcessBlock()},ProcessLength:function(t){this.xOff>14&&this.ProcessBlock(),this.X[14]=this.URShiftLong(t,32),this.X[15]=4294967295&t},IntToBigEndian:function(t,e,n){e[n]=t>>>24&255,e[++n]=t>>>16&255,e[++n]=t>>>8&255,e[++n]=255&t},DoFinal:function(t,e){this.Finish();for(var n=0;n<8;n++)this.IntToBigEndian(this.v[n],t,e+4*n);return this.Reset(),this.DIGEST_LENGTH},Update:function(t){this.xBuf[this.xBufOff++]=t,this.xBufOff==this.xBuf.length&&(this.ProcessWord(this.xBuf,0),this.xBufOff=0),this.byteCount++},BlockUpdate:function(t,e,n){for(;0!=this.xBufOff&&n>0;)this.Update(t[e]),e++,n--;for(;n>this.xBuf.length;)this.ProcessWord(t,e),e+=this.xBuf.length,n-=this.xBuf.length,this.byteCount+=this.xBuf.length;for(;n>0;)this.Update(t[e]),e++,n--},Finish:function(){var t=this.byteCount<<3;for(this.Update(128);0!=this.xBufOff;)this.Update(0);this.ProcessLength(t),this.ProcessBlock()},ROTATE:function(t,e){return t<<e|this.URShift(t,32-e)},P0:function(t){return t^Zt(t,9)^Zt(t,17)},P1:function(t){return t^Zt(t,15)^Zt(t,23)},FF_00_15:function(t,e,n){return t^e^n},FF_16_63:function(t,e,n){return t&e|t&n|e&n},GG_00_15:function(t,e,n){return t^e^n},GG_16_63:function(t,e,n){return t&e|~t&n},URShift:function(t,e){return console.error(t),(t>Int32.maxValue||t<Int32.minValue)&&(console.error(t),t=function(t){if(t>2147483647||t<-2147483648){var e=4294967295&t;return e>2147483647?(e=2147483647&t,-((e^=2147483647)+1)):e}return t}(t)),t>=0?t>>e:(t>>e)+(2<<~e)},URShiftLong:function(t,e){var n,r=new rt;if(r.fromInt(t),r.signum()>=0)n=r.shiftRight(e).intValue();else{var i=new rt;i.fromInt(2);var s=~e,o="";if(s<0){for(var a=64+s,u=0;u<a;u++)o+="0";var c=new rt;c.fromInt(t>>e);var h=new rt("10"+o,2);o=h.toRadix(10),n=h.add(c).toRadix(10)}else n=(t>>e)+(o=i.shiftLeft(~e).intValue())}return n},GetZ:function(t,e){var n=u.enc.Utf8.parse("1234567812345679"),r=4*n.words.length*8;this.Update(r>>8&255),this.Update(255&r);var i=this.GetWords(n.toString());this.BlockUpdate(i,0,i.length);var s=this.GetWords(t.curve.a.toBigInteger().toRadix(16)),o=this.GetWords(t.curve.b.toBigInteger().toRadix(16)),a=this.GetWords(t.getX().toBigInteger().toRadix(16)),c=this.GetWords(t.getY().toBigInteger().toRadix(16)),h=this.GetWords(e.substr(0,64)),f=this.GetWords(e.substr(64,64));this.BlockUpdate(s,0,s.length),this.BlockUpdate(o,0,o.length),this.BlockUpdate(a,0,a.length),this.BlockUpdate(c,0,c.length),this.BlockUpdate(h,0,h.length),this.BlockUpdate(f,0,f.length);var l=new Array(this.GetDigestSize());return this.DoFinal(l,0),l},GetWords:function(t){for(var e=[],n=t.length,r=0;r<n;r+=2)e[e.length]=parseInt(t.substr(r,2),16);return e},GetHex:function(t){for(var e=[],n=0,r=0;r<2*t.length;r+=2)e[r>>>3]|=parseInt(t[n])<<24-r%8*4,n++;return new u.lib.WordArray.init(e,t.length)}},Array.Clear=function(t,e,n){for(elm in t)t[elm]=null},Array.Copy=function(t,e,n,r,i){for(var s=t.slice(e,e+i),o=0;o<s.length;o++)n[r]=s[o],r++},window.Int32={minValue:-parseInt("10000000000000000000000000000000",2),maxValue:parseInt("1111111111111111111111111111111",2),parse:function(t){if(t<this.minValue){for(var e=(i=new Number(-t).toString(2)).substr(i.length-31,31),n="",r=0;r<e.length;r++){n+="0"==e.substr(r,1)?"1":"0"}return parseInt(n,2)+1}if(t>this.maxValue){var i;for(e=(i=Number(t).toString(2)).substr(i.length-31,31),n="",r=0;r<e.length;r++){n+="0"==e.substr(r,1)?"1":"0"}return-(parseInt(n,2)+1)}return t},parseByte:function(t){if(t>255)return e=255&t;if(t<-256){var e=255&t;return(e^=255)+1}return t}},f.crypto.ECDSA,f.crypto.DSA,f.crypto.Signature,f.crypto.MessageDigest,f.crypto.Mac,f.crypto.Cipher,f.crypto,f.asn1,f.jws,f.lang,e.aN=function(t,e,n){n=0==n?n:1;var r=u.enc.Utf8.parse(t),i=e;i.length>128&&(i=i.substr(i.length-128));var s=i.substr(0,64),o=i.substr(64),a=new Yt(n),c=a.CreatePoint(s,o);return r=a.GetWords(r.toString()),"04"+a.Encrypt(c,r)}}}]);